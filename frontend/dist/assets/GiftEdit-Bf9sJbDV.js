import{_,b as G,D as k,k as F,c as u,o as f,a as o,m,n as x,t as I,p as v,u as b,v as A,w as E,y as B,G as h,z as C,C as N}from"./index-ChsQcVH8.js";import{G as S}from"./GiftForm-fibn1kT_.js";import"./PhotoIcon-D2x7iyB1.js";import"./TrashIcon-B1nwDLsP.js";const T={name:"GiftEdit",components:{ArrowLeftIcon:F,ArrowPathIcon:k,ExclamationTriangleIcon:G,GiftForm:S},setup(){const l=N(),a=B(),{showNotification:i}=C(),t=b(!1),n=b(null),c=b(null),r=A({}),d=async()=>{try{t.value=!0,n.value=null;const s=a.params.id,e=await h.get(s);e.success?Object.assign(r,e.data):n.value=e.error||"Failed to load gift details"}catch(s){console.error("Failed to load gift:",s),n.value="Failed to load gift details. Please try again."}finally{t.value=!1}},g=async s=>{try{t.value=!0;const e=await h.update(r.name,{...s,docstatus:r.docstatus});e.success?(i("Gift updated successfully","success"),l.push(`/gifts/${r.name}`)):i(e.error||"Failed to update gift","error")}catch(e){console.error("Failed to update gift:",e),i("Failed to update gift. Please try again.","error")}finally{t.value=!1,c.value&&c.value.resetSaving()}},p=async s=>{try{t.value=!0,await new Promise(e=>setTimeout(e,1e3)),r.status=s,i(`Gift ${s==="expired"?"marked as expired":"cancelled"}`,"success")}catch(e){console.error("Failed to update status:",e),i("Failed to update gift status","error")}finally{t.value=!1}},y=s=>{const e={available:"bg-gray-100 text-gray-800",issued:"bg-blue-100 text-blue-800",expired:"bg-red-100 text-red-800",cancelled:"bg-charcoal-100 text-charcoal-800",redeemed:"bg-purple-100 text-purple-800"};return e[s]||e.available},w=s=>({available:"Available",issued:"Issued",expired:"Expired",cancelled:"Cancelled",redeemed:"Redeemed"})[s]||"Available";return E(()=>{d()}),{loading:t,error:n,gift:r,giftFormRef:c,updateGift:g,updateStatus:p,getStatusClasses:y,getStatusText:w}}},P={class:"min-h-full bg-desert-sand-50"},R={key:0,class:"flex items-center justify-center min-h-screen"},$={key:1,class:"flex items-center justify-center min-h-screen"},j={class:"text-center"},L={class:"text-charcoal-600 mb-4"},V={key:2,class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},D={class:"mb-6"};function z(l,a,i,t,n,c){const r=x("ExclamationTriangleIcon"),d=x("ArrowLeftIcon"),g=x("GiftForm");return f(),u("div",P,[t.loading&&!t.gift.name?(f(),u("div",R,[...a[2]||(a[2]=[o("div",{class:"animate-pulse text-center"},[o("div",{class:"w-.peer:checked~.peer-checked\\:bg-gray-600 { background-color: #4B5563; }h-16 bg-gray-100 rounded-xl mx-auto mb-4"}),o("div",{class:"h-4 bg-charcoal-200 rounded w-32 mx-auto mb-2"}),o("div",{class:"h-3 bg-charcoal-200 rounded w-24 mx-auto"})],-1)])])):t.error?(f(),u("div",$,[o("div",j,[m(r,{class:"w-16 h-16 text-red-500 mx-auto mb-4"}),a[4]||(a[4]=o("h3",{class:"text-lg font-semibold text-charcoal-900 mb-2"},"Gift Not Found",-1)),o("p",L,I(t.error),1),o("button",{onClick:a[0]||(a[0]=p=>l.$router.push("/gifts")),class:"inline-flex items-center px-4 py-2 border border-charcoal-300 text-sm font-medium rounded-lg text-charcoal-700 bg-white hover:bg-charcoal-50 transition-colors"},[m(d,{class:"w-4 h-4 mr-2"}),a[3]||(a[3]=v(" Back to Gifts ",-1))])])])):(f(),u("div",V,[o("div",D,[o("button",{onClick:a[1]||(a[1]=p=>l.$router.go(-1)),class:"inline-flex items-center px-4 py-2 text-sm font-medium text-charcoal-600 hover:text-charcoal-900 transition-colors"},[m(d,{class:"w-4 h-4 mr-2"}),a[5]||(a[5]=v(" Back ",-1))])]),m(g,{ref:"giftFormRef","initial-data":t.gift,"is-edit-mode":!0,"gift-status":t.gift.status,onSubmit:t.updateGift},null,8,["initial-data","gift-status","onSubmit"])]))])}const J=_(T,[["render",z],["__scopeId","data-v-d2c02927"]]);export{J as default};
