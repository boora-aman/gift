import{c as m,o as d,a as t,_ as oe,h as re,d as le,b as ie,E as ne,P as ae,i as de,Q as ce,f as me,j as fe,k as ue,m as a,n as b,t as n,p as g,l as h,J as w,R as H,N as K,q as _,S as be,M as Q,K as F,u as p,v as O,w as xe,y as ge,T as R,z as he,C as pe,O as ye}from"./index-ChsQcVH8.js";import{r as ve}from"./TrashIcon-B1nwDLsP.js";import{r as we}from"./PhotoIcon-D2x7iyB1.js";function _e(I,e){return d(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"})])}const Ie={name:"IssueDetail",components:{ArrowLeftIcon:ue,GiftIcon:fe,ClipboardDocumentIcon:me,CheckIcon:ce,PencilIcon:de,PlusIcon:ae,XMarkIcon:ne,ExclamationTriangleIcon:ie,UserIcon:le,PhoneIcon:_e,PhotoIcon:we,TrashIcon:ve,EllipsisVerticalIcon:re},setup(){const I=ge(),e=pe(),{showNotification:x}=he(),s=p(!0),V=p(null),j=p(!1),k=p(!1),D=p(!1),E=p(!1),y=p(!1),C=p(!1),l=O({}),f=O({}),u=O({}),A=async()=>{try{s.value=!0;const o=I.params.id,i=await R.get(o);if(i.success)Object.keys(l).forEach(c=>delete l[c]),y.value=!1,Object.assign(l,i.data),M();else throw new Error(i.error||"Failed to load issue")}catch(o){console.error("Failed to load issue:",o),V.value=o.message||"Failed to load issue details. Please try again."}finally{s.value=!1}},M=()=>{Object.assign(f,{first_name:l.first_name||"",last_name:l.last_name||"",emirates_id:l.emirates_id||"",mobile_number:l.mobile_number||"",person_photo:l.person_photo||"",date:l.date||""}),Object.keys(u).forEach(o=>delete u[o])},z=o=>{const i=o.replace(/[\s\-()]/g,"");return[/^\+971(50|51|52|53|54|55|56|58)\d{7}$/,/^00971(50|51|52|53|54|55|56|58)\d{7}$/,/^0(50|51|52|53|54|55|56|58)\d{7}$/,/^(50|51|52|53|54|55|56|58)\d{7}$/].some(v=>v.test(i))},S=o=>{const i=o.replace(/[\s\-]/g,"");return[/^\d{3}-\d{4}-\d{7}-\d{1}$/,/^\d{15}$/].some(v=>v.test(o))||/^\d{15}$/.test(i)},P=()=>{Object.keys(u).forEach(i=>delete u[i]);let o=!0;return f.first_name.trim()||(u.first_name="First name is required",o=!1),f.last_name.trim()||(u.last_name="Last name is required",o=!1),f.emirates_id.trim()?S(f.emirates_id)||(u.emirates_id="Please enter a valid Emirates ID (e.g., 784-1234-1234567-8)",o=!1):(u.emirates_id="Emirates ID is required",o=!1),f.mobile_number&&!z(f.mobile_number)&&(u.mobile_number="Please enter a valid UAE mobile number (e.g., +971501234567, 0501234567, 501234567)",o=!1),f.date||(u.date="Issue date is required",o=!1),o},L=async()=>{if(P())try{D.value=!0;const o=await R.update(l.name,f);if(o.success)Object.assign(l,f),j.value=!1,x("Gift issue updated successfully","success");else throw new Error(o.error||"Failed to update issue")}catch(o){console.error("Failed to save changes:",o),x(o.message||"Failed to save changes","error")}finally{D.value=!1}},N=()=>{j.value=!1,M()},G=async o=>{const i=o.target.files[0];if(i){if(i.size>2*1024*1024){x("File size must be less than 2MB","error");return}if(!i.type.startsWith("image/")){x("Please select an image file","error");return}try{const c=await ye.upload(i,!0);if(c.success)f.person_photo=c.data.file_url,x("Photo uploaded successfully","success");else throw new Error(c.error||"Failed to upload photo")}catch(c){console.error("Failed to upload photo:",c),x(c.message||"Failed to upload photo","error")}}},T=()=>{k.value=!0},r=async()=>{try{E.value=!0;const o=await R.delete(l.name);if(o.success)x("Gift issue deleted successfully","success"),e.push("/issues");else throw new Error(o.error||"Failed to delete issue")}catch(o){console.error("Failed to delete issue:",o),x(o.message||"Failed to delete issue","error")}finally{E.value=!1,k.value=!1}},J=async(o,i)=>{try{await navigator.clipboard.writeText(o),x(`${i} copied to clipboard`,"success")}catch{x(`Failed to copy ${i.toLowerCase()}`,"error")}},Z=async()=>{const o=`
Gift Issue Details:
Name: ${l.first_name} ${l.last_name}
Emirates ID: ${l.emirates_id}
Mobile: ${l.mobile_number||"N/A"}
Gift: ${l.gift}
Category: ${X(l.category)}
Issue Date: ${W(l.date)}
Issue ID: ${l.name}
      `.trim();await J(o,"Issue details")},Y=()=>{l.mobile_number&&window.open(`tel:${l.mobile_number}`)},$=o=>{o.target.style.display="none";const i=o.target.parentElement;if(i){const c=i.querySelector("svg");c&&(c.style.display="block")}},ee=o=>o?o.startsWith("http://")||o.startsWith("https://")?o:o.startsWith("/private/")||o.startsWith("private/")?`/api/method/frappe.core.doctype.file.file.download_file?file_url=${o.startsWith("/")?o:`/${o}`}`:o.startsWith("/files/")||o.startsWith("files/")?o.startsWith("/")?o:`/${o}`:`/files/${o}`:"",X=o=>o?o.charAt(0).toUpperCase()+o.slice(1):"General",W=o=>o?new Date(o).toLocaleDateString("en-AE",{year:"numeric",month:"short",day:"numeric"}):"",te=o=>o?new Date(o).toLocaleString("en-AE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",se=o=>{if(!o)return"";const i=new Date,c=new Date(o),v=i-c,U=Math.floor(v/(1e3*60)),q=Math.floor(v/(1e3*60*60)),B=Math.floor(v/(1e3*60*60*24));return U<1?"Just now":U<60?`${U} minute${U===1?"":"s"} ago`:q<24?`${q} hour${q===1?"":"s"} ago`:B<7?`${B} day${B===1?"":"s"} ago`:W(o)};return xe(()=>{A(),document.addEventListener("click",o=>{(!o.target.closest(".relative")||o.target.closest(".fixed"))&&(C.value=!1)})}),{loading:s,error:V,issue:l,imageLoaded:y,showEditForm:j,showDeleteConfirm:k,saving:D,deleting:E,showActionsDropdown:C,editForm:f,errors:u,saveChanges:L,cancelEdit:N,handlePhotoChange:G,deleteIssue:T,confirmDelete:r,copyToClipboard:J,copyIssueDetails:Z,callRecipient:Y,getFullImageUrl:ee,handleImageError:$,formatCategory:X,formatDate:W,formatDateTime:te,formatTimeAgo:se}}},ke={class:"min-h-full bg-desert-sand-50"},De={key:0,class:"flex items-center justify-center min-h-screen"},Ce={key:1,class:"flex items-center justify-center min-h-screen"},Ee={class:"text-center"},Fe={class:"text-charcoal-600 mb-4"},je={key:2},Ae={class:"lg:hidden bg-white border-b border-charcoal-200 px-4 py-4 sticky top-0 z-30"},Me={class:"flex items-center justify-between"},Pe={class:"flex items-center space-x-3"},Le={class:"relative"},Ne={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Ge={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Te={class:"col-span-1 lg:col-span-2 space-y-8"},Ue={class:"bg-white rounded-xl shadow-card p-6"},Ve={class:"flex items-center justify-between mb-6"},ze={class:"space-y-6"},Se={class:"flex items-start space-x-6"},We={class:"flex-shrink-0"},qe={class:"w-20 h-20 rounded-xl overflow-hidden bg-gray-100 flex items-center justify-center relative"},Be=["src","alt"],Oe={class:"flex-1"},Re={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Je={class:"md:col-span-2 space-y-3"},Xe={class:"space-y-4"},He={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},Ke={class:"border-t border-charcoal-100 pt-6"},Qe={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Ze={class:"text-charcoal-900 font-medium"},Ye={class:"text-charcoal-900 font-mono text-sm"},$e={class:"bg-white rounded-xl shadow-card p-6"},et={class:"flex items-center justify-between mb-6"},tt={class:"flex items-start space-x-6 mb-6"},st={class:"flex-shrink-0"},ot={class:"w-20 h-20 rounded-xl overflow-hidden bg-gray-100 flex items-center justify-center"},rt=["src","alt"],lt={class:"flex-1"},it={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},nt={class:"text-charcoal-900 font-medium"},at={class:"text-charcoal-900 font-medium"},dt={class:"flex items-center space-x-2"},ct={class:"text-charcoal-900 font-mono"},mt={key:0},ft={class:"flex items-center space-x-2"},ut={class:"text-charcoal-900"},bt={class:"hidden lg:block lg:col-span-1 space-y-6"},xt={class:"bg-white rounded-xl shadow-card p-6"},gt={class:"space-y-3"},ht={class:"bg-white rounded-xl shadow-card p-6"},pt={class:"space-y-4 text-sm"},yt={class:"flex justify-between"},vt={class:"text-charcoal-900 font-mono"},wt={class:"flex justify-between"},_t={class:"text-charcoal-900"},It={class:"flex justify-between"},kt={class:"text-charcoal-900"},Dt={class:"flex justify-between"},Ct={class:"text-charcoal-900"},Et={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},Ft={class:"bg-white rounded-xl shadow-elevated max-w-2xl w-full max-h-[90vh] overflow-y-auto"},jt={class:"p-6"},At={class:"flex items-center justify-between mb-6"},Mt={class:"space-y-4"},Pt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Lt={key:0,class:"text-red-600 text-sm mt-1"},Nt={key:0,class:"text-red-600 text-sm mt-1"},Gt={key:0,class:"text-red-600 text-sm mt-1"},Tt={key:0,class:"text-red-600 text-sm mt-1"},Ut={class:"flex items-center space-x-4"},Vt={class:"w-16 h-16 rounded-lg overflow-hidden bg-charcoal-100 flex items-center justify-center"},zt=["src"],St={class:"flex-1"},Wt={class:"space-y-4"},qt={key:0,class:"text-red-600 text-sm mt-1"},Bt={class:"flex items-center justify-end space-x-3 pt-6 border-t border-charcoal-200"},Ot=["disabled"],Rt={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},Jt={class:"bg-white rounded-xl shadow-elevated max-w-md w-full p-6"},Xt={class:"flex items-center mb-4"},Ht={class:"flex items-center justify-end space-x-3"},Kt=["disabled"];function Qt(I,e,x,s,V,j){var P,L,N,G,T;const k=b("ExclamationTriangleIcon"),D=b("ArrowLeftIcon"),E=b("EllipsisVerticalIcon"),y=b("PencilIcon"),C=b("ClipboardDocumentIcon"),l=b("TrashIcon"),f=b("GiftIcon"),u=b("router-link"),A=b("UserIcon"),M=b("PhoneIcon"),z=b("XMarkIcon"),S=b("PhotoIcon");return d(),m("div",ke,[s.loading?(d(),m("div",De,[...e[31]||(e[31]=[t("div",{class:"animate-pulse text-center"},[t("div",{class:"w-16 h-16 bg-gray-100 rounded-xl mx-auto mb-4"}),t("div",{class:"h-4 bg-charcoal-200 rounded w-32 mx-auto mb-2"}),t("div",{class:"h-3 bg-charcoal-200 rounded w-24 mx-auto"})],-1)])])):s.error?(d(),m("div",Ce,[t("div",Ee,[a(k,{class:"w-16 h-16 text-red-500 mx-auto mb-4"}),e[33]||(e[33]=t("h3",{class:"text-lg font-semibold text-charcoal-900 mb-2"},"Issue Not Found",-1)),t("p",Fe,n(s.error),1),t("button",{onClick:e[0]||(e[0]=r=>I.$router.go(-1)),class:"inline-flex items-center px-4 py-2 border border-charcoal-300 text-sm font-medium rounded-lg text-charcoal-700 bg-white hover:bg-charcoal-50 transition-colors"},[a(D,{class:"w-4 h-4 mr-2"}),e[32]||(e[32]=g(" Go Back ",-1))])])])):(d(),m("div",je,[t("div",Ae,[t("div",Me,[t("div",Pe,[t("button",{onClick:e[1]||(e[1]=r=>I.$router.go(-1)),class:"p-2 text-charcoal-500 hover:text-charcoal-700 hover:bg-charcoal-100 rounded-lg transition-colors"},[a(D,{class:"w-5 h-5"})]),e[34]||(e[34]=t("h1",{class:"text-lg font-semibold text-charcoal-900 truncate"}," Gift Issue Details ",-1))]),t("div",Le,[w(t("div",{class:"fixed inset-0 bg-black bg-opacity-25 z-40",onClick:e[2]||(e[2]=r=>s.showActionsDropdown=!1)},null,512),[[H,s.showActionsDropdown]]),t("button",{onClick:e[3]||(e[3]=r=>s.showActionsDropdown=!s.showActionsDropdown),class:"p-2 text-charcoal-500 hover:text-charcoal-700 hover:bg-charcoal-100 rounded-lg transition-colors relative z-50"},[a(E,{class:"w-5 h-5"})]),w(t("div",{class:"absolute right-0 top-full mt-2 w-48 bg-white rounded-lg shadow-lg border border-charcoal-200 py-1 z-50",onClick:e[7]||(e[7]=K(()=>{},["stop"]))},[t("button",{onClick:e[4]||(e[4]=r=>{s.showEditForm=!0,s.showActionsDropdown=!1}),class:"w-full flex items-center px-4 py-3 text-sm text-charcoal-700 hover:bg-charcoal-50 transition-colors"},[a(y,{class:"w-4 h-4 mr-3"}),e[35]||(e[35]=g(" Edit Issue ",-1))]),t("button",{onClick:e[5]||(e[5]=r=>{s.copyIssueDetails(),s.showActionsDropdown=!1}),class:"w-full flex items-center px-4 py-3 text-sm text-charcoal-700 hover:bg-charcoal-50 transition-colors"},[a(C,{class:"w-4 h-4 mr-3"}),e[36]||(e[36]=g(" Copy Details ",-1))]),e[38]||(e[38]=t("div",{class:"border-t border-charcoal-100 my-1"},null,-1)),t("button",{onClick:e[6]||(e[6]=r=>{s.deleteIssue(),s.showActionsDropdown=!1}),class:"w-full flex items-center px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition-colors"},[a(l,{class:"w-4 h-4 mr-3"}),e[37]||(e[37]=g(" Delete Issue ",-1))])],512),[[H,s.showActionsDropdown]])])])]),t("div",Ne,[t("div",Ge,[t("div",Te,[t("div",Ue,[t("div",Ve,[e[40]||(e[40]=t("h2",{class:"text-xl font-semibold text-charcoal-900"},"Gift Issue Information",-1)),t("button",{onClick:e[8]||(e[8]=r=>s.showEditForm=!0),class:"hidden lg:inline-flex items-center px-3 py-1.5 text-sm font-medium text-gray-700 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 transition-colors"},[a(y,{class:"w-4 h-4 mr-1.5"}),e[39]||(e[39]=g(" Edit ",-1))])]),t("div",ze,[t("div",Se,[t("div",We,[t("div",qe,[(P=s.issue.gift_details)!=null&&P.first_image?(d(),m("img",{key:0,src:s.issue.gift_details.first_image,alt:((L=s.issue.gift_details)==null?void 0:L.gift_name)||"Gift image",class:_(["w-full h-full object-cover absolute inset-0",{"opacity-100":s.imageLoaded,"opacity-0":!s.imageLoaded}]),onLoad:e[9]||(e[9]=r=>s.imageLoaded=!0),onError:e[10]||(e[10]=r=>s.imageLoaded=!1)},null,42,Be)):h("",!0),a(f,{class:_(["w-10 h-10 text-gray-700",{"opacity-100":!s.imageLoaded||!((N=s.issue.gift_details)!=null&&N.first_image),"opacity-0":s.imageLoaded&&((G=s.issue.gift_details)==null?void 0:G.first_image)}])},null,8,["class"])])]),t("div",Oe,[t("div",Re,[t("div",Je,[t("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm font-medium text-charcoal-700 mb-1"}," Gift Name ",-1)),a(u,{to:`/gifts/${s.issue.gift}`,class:"text-gray-700 hover:text-gray-800 font-semibold text-lg"},{default:be(()=>{var r;return[g(n(((r=s.issue.gift_details)==null?void 0:r.gift_name)||s.issue.gift_name||s.issue.gift),1)]}),_:1},8,["to"])])]),t("div",Xe,[t("div",null,[e[42]||(e[42]=t("label",{class:"block text-sm font-medium text-charcoal-700 mb-1"}," Category ",-1)),t("span",He,n(s.formatCategory(((T=s.issue.gift_details)==null?void 0:T.category)||s.issue.category)),1)])])])])]),t("div",Ke,[t("div",Qe,[t("div",null,[e[43]||(e[43]=t("label",{class:"block text-sm font-medium text-charcoal-700 mb-1"}," Issue Date ",-1)),t("p",Ze,n(s.formatDate(s.issue.date)),1)]),t("div",null,[e[44]||(e[44]=t("label",{class:"block text-sm font-medium text-charcoal-700 mb-1"}," Issue ID ",-1)),t("p",Ye,n(s.issue.name),1)]),e[45]||(e[45]=t("div",null,[t("label",{class:"block text-sm font-medium text-charcoal-700 mb-1"}," Status "),t("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"}," Issued ")],-1))])])])]),t("div",$e,[t("div",et,[e[47]||(e[47]=t("h2",{class:"text-xl font-semibold text-charcoal-900"},"Recipient Information",-1)),t("button",{onClick:e[11]||(e[11]=r=>s.showEditForm=!0),class:"hidden lg:inline-flex items-center px-3 py-1.5 text-sm font-medium text-gray-700 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 transition-colors"},[a(y,{class:"w-4 h-4 mr-1.5"}),e[46]||(e[46]=g(" Edit ",-1))])]),t("div",tt,[t("div",st,[t("div",ot,[s.issue.person_photo?(d(),m("img",{key:0,src:s.getFullImageUrl(s.issue.person_photo),alt:`${s.issue.first_name} ${s.issue.last_name} photo`,class:"w-full h-full object-cover",onError:e[12]||(e[12]=(...r)=>s.handleImageError&&s.handleImageError(...r))},null,40,rt)):(d(),Q(A,{key:1,class:"w-10 h-10 text-gray-700"}))])]),t("div",lt,[t("div",it,[t("div",null,[e[48]||(e[48]=t("label",{class:"block text-sm font-medium text-charcoal-700 mb-1"}," First Name ",-1)),t("p",nt,n(s.issue.first_name),1)]),t("div",null,[e[49]||(e[49]=t("label",{class:"block text-sm font-medium text-charcoal-700 mb-1"}," Last Name ",-1)),t("p",at,n(s.issue.last_name),1)]),t("div",null,[e[50]||(e[50]=t("label",{class:"block text-sm font-medium text-charcoal-700 mb-1"}," Emirates ID ",-1)),t("div",dt,[t("p",ct,n(s.issue.emirates_id),1),t("button",{onClick:e[13]||(e[13]=r=>s.copyToClipboard(s.issue.emirates_id,"Emirates ID")),class:"p-1 text-charcoal-500 hover:text-gray-700 transition-colors",title:"Copy Emirates ID"},[a(C,{class:"w-4 h-4"})])])]),s.issue.mobile_number?(d(),m("div",mt,[e[51]||(e[51]=t("label",{class:"block text-sm font-medium text-charcoal-700 mb-1"}," Mobile Number ",-1)),t("div",ft,[t("p",ut,n(s.issue.mobile_number),1),t("button",{onClick:e[14]||(e[14]=(...r)=>s.callRecipient&&s.callRecipient(...r)),class:"p-1 text-charcoal-500 hover:text-gray-700 transition-colors",title:"Call recipient"},[a(M,{class:"w-4 h-4"})])])])):h("",!0)])])])])]),t("div",bt,[t("div",xt,[e[55]||(e[55]=t("h3",{class:"text-lg font-semibold text-charcoal-900 mb-4"},"Actions",-1)),t("div",gt,[t("button",{onClick:e[15]||(e[15]=r=>s.showEditForm=!0),class:"w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-gray-600 hover:bg-gray-700 transition-colors"},[a(y,{class:"w-4 h-4 mr-2"}),e[52]||(e[52]=g(" Edit Issue ",-1))]),t("button",{onClick:e[16]||(e[16]=(...r)=>s.copyIssueDetails&&s.copyIssueDetails(...r)),class:"w-full inline-flex items-center justify-center px-4 py-2 border border-charcoal-300 text-sm font-medium rounded-lg text-charcoal-700 bg-white hover:bg-charcoal-50 transition-colors"},[a(C,{class:"w-4 h-4 mr-2"}),e[53]||(e[53]=g(" Copy Details ",-1))]),t("button",{onClick:e[17]||(e[17]=(...r)=>s.deleteIssue&&s.deleteIssue(...r)),class:"w-full inline-flex items-center justify-center px-4 py-2 border border-red-300 text-sm font-medium rounded-lg text-red-600 bg-red-50 hover:bg-red-100 transition-colors"},[a(l,{class:"w-4 h-4 mr-2"}),e[54]||(e[54]=g(" Delete Issue ",-1))])])]),t("div",ht,[e[60]||(e[60]=t("h3",{class:"text-lg font-semibold text-charcoal-900 mb-4"},"Details",-1)),t("div",pt,[t("div",yt,[e[56]||(e[56]=t("span",{class:"text-charcoal-600"},"Issue ID",-1)),t("span",vt,n(s.issue.name),1)]),t("div",wt,[e[57]||(e[57]=t("span",{class:"text-charcoal-600"},"Created",-1)),t("span",_t,n(s.formatDate(s.issue.creation)),1)]),t("div",It,[e[58]||(e[58]=t("span",{class:"text-charcoal-600"},"Modified",-1)),t("span",kt,n(s.formatDate(s.issue.modified)),1)]),t("div",Dt,[e[59]||(e[59]=t("span",{class:"text-charcoal-600"},"Issued by",-1)),t("span",Ct,n(s.issue.owner||"System"),1)])])])])])]),s.showEditForm?(d(),m("div",Et,[t("div",Ft,[t("div",jt,[t("div",At,[e[61]||(e[61]=t("h3",{class:"text-xl font-semibold text-charcoal-900"},"Edit Gift Issue",-1)),t("button",{onClick:e[18]||(e[18]=(...r)=>s.cancelEdit&&s.cancelEdit(...r)),class:"p-2 text-charcoal-500 hover:text-charcoal-700 transition-colors"},[a(z,{class:"w-5 h-5"})])]),t("form",{onSubmit:e[28]||(e[28]=K((...r)=>s.saveChanges&&s.saveChanges(...r),["prevent"])),class:"space-y-6"},[t("div",Mt,[e[68]||(e[68]=t("h4",{class:"text-lg font-medium text-charcoal-900"},"Personal Information",-1)),t("div",Pt,[t("div",null,[e[62]||(e[62]=t("label",{class:"block text-sm font-medium text-charcoal-700 mb-1"}," First Name * ",-1)),w(t("input",{"onUpdate:modelValue":e[19]||(e[19]=r=>s.editForm.first_name=r),type:"text",required:"",class:_(["w-full px-3 py-2 border border-charcoal-300 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all",{"border-red-500":s.errors.first_name}])},null,2),[[F,s.editForm.first_name]]),s.errors.first_name?(d(),m("p",Lt,n(s.errors.first_name),1)):h("",!0)]),t("div",null,[e[63]||(e[63]=t("label",{class:"block text-sm font-medium text-charcoal-700 mb-1"}," Last Name * ",-1)),w(t("input",{"onUpdate:modelValue":e[20]||(e[20]=r=>s.editForm.last_name=r),type:"text",required:"",class:_(["w-full px-3 py-2 border border-charcoal-300 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all",{"border-red-500":s.errors.last_name}])},null,2),[[F,s.editForm.last_name]]),s.errors.last_name?(d(),m("p",Nt,n(s.errors.last_name),1)):h("",!0)]),t("div",null,[e[64]||(e[64]=t("label",{class:"block text-sm font-medium text-charcoal-700 mb-1"}," Emirates ID * ",-1)),w(t("input",{"onUpdate:modelValue":e[21]||(e[21]=r=>s.editForm.emirates_id=r),type:"text",required:"",placeholder:"xxx-xxxx-xxxxxxx-x",class:_(["w-full px-3 py-2 border border-charcoal-300 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all",{"border-red-500":s.errors.emirates_id}])},null,2),[[F,s.editForm.emirates_id]]),s.errors.emirates_id?(d(),m("p",Gt,n(s.errors.emirates_id),1)):h("",!0)]),t("div",null,[e[65]||(e[65]=t("label",{class:"block text-sm font-medium text-charcoal-700 mb-1"}," Mobile Number ",-1)),w(t("input",{"onUpdate:modelValue":e[22]||(e[22]=r=>s.editForm.mobile_number=r),type:"tel",placeholder:"+971 50 123 4567",class:_(["w-full px-3 py-2 border border-charcoal-300 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all",{"border-red-500":s.errors.mobile_number}])},null,2),[[F,s.editForm.mobile_number]]),s.errors.mobile_number?(d(),m("p",Tt,n(s.errors.mobile_number),1)):h("",!0)])]),t("div",null,[e[67]||(e[67]=t("label",{class:"block text-sm font-medium text-charcoal-700 mb-1"}," Person Photo ",-1)),t("div",Ut,[t("div",Vt,[s.editForm.person_photo?(d(),m("img",{key:0,src:s.getFullImageUrl(s.editForm.person_photo),alt:"Preview photo",class:"w-full h-full object-cover",onError:e[23]||(e[23]=(...r)=>s.handleImageError&&s.handleImageError(...r))},null,40,zt)):(d(),Q(A,{key:1,class:"w-8 h-8 text-charcoal-400"}))]),t("div",St,[t("input",{ref:"photoInput",type:"file",accept:"image/*",onChange:e[24]||(e[24]=(...r)=>s.handlePhotoChange&&s.handlePhotoChange(...r)),class:"hidden"},null,544),t("button",{type:"button",onClick:e[25]||(e[25]=r=>I.$refs.photoInput.click()),class:"inline-flex items-center px-3 py-2 border border-charcoal-300 text-sm font-medium rounded-lg text-charcoal-700 bg-white hover:bg-charcoal-50 transition-colors"},[a(S,{class:"w-4 h-4 mr-2"}),g(" "+n(s.editForm.person_photo?"Change Photo":"Upload Photo"),1)]),e[66]||(e[66]=t("p",{class:"text-xs text-charcoal-500 mt-1"}," JPG, PNG or WebP. Max file size 2MB. ",-1))])])])]),t("div",Wt,[e[70]||(e[70]=t("h4",{class:"text-lg font-medium text-charcoal-900"},"Issue Information",-1)),t("div",null,[e[69]||(e[69]=t("label",{class:"block text-sm font-medium text-charcoal-700 mb-1"}," Issue Date ",-1)),w(t("input",{"onUpdate:modelValue":e[26]||(e[26]=r=>s.editForm.date=r),type:"date",class:_(["w-full px-3 py-2 border border-charcoal-300 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all",{"border-red-500":s.errors.date}])},null,2),[[F,s.editForm.date]]),s.errors.date?(d(),m("p",qt,n(s.errors.date),1)):h("",!0)])]),t("div",Bt,[t("button",{type:"button",onClick:e[27]||(e[27]=(...r)=>s.cancelEdit&&s.cancelEdit(...r)),class:"px-4 py-2 border border-charcoal-300 text-sm font-medium rounded-lg text-charcoal-700 bg-white hover:bg-charcoal-50 transition-colors"}," Cancel "),t("button",{type:"submit",disabled:s.saving,class:"px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-gray-600 hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},n(s.saving?"Saving...":"Save Changes"),9,Ot)])],32)])])])):h("",!0),s.showDeleteConfirm?(d(),m("div",Rt,[t("div",Jt,[t("div",Xt,[a(k,{class:"w-8 h-8 text-red-500 mr-3"}),e[71]||(e[71]=t("h3",{class:"text-lg font-semibold text-charcoal-900"},"Confirm Deletion",-1))]),e[72]||(e[72]=t("p",{class:"text-charcoal-600 mb-6"}," Are you sure you want to delete this gift issue? This action cannot be undone. ",-1)),t("div",Ht,[t("button",{onClick:e[29]||(e[29]=r=>s.showDeleteConfirm=!1),class:"px-4 py-2 border border-charcoal-300 text-sm font-medium rounded-lg text-charcoal-700 bg-white hover:bg-charcoal-50 transition-colors"}," Cancel "),t("button",{onClick:e[30]||(e[30]=(...r)=>s.confirmDelete&&s.confirmDelete(...r)),disabled:s.deleting,class:"px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-red-600 hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},n(s.deleting?"Deleting...":"Delete"),9,Kt)])])])):h("",!0)]))])}const es=oe(Ie,[["render",Qt],["__scopeId","data-v-4effbe30"]]);export{es as default};
