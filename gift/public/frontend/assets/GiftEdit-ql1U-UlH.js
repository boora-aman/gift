var A=Object.defineProperty,E=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var y=(s,e,t)=>e in s?A(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,_=(s,e)=>{for(var t in e||(e={}))N.call(e,t)&&y(s,t,e[t]);if(h)for(var t of h(e))S.call(e,t)&&y(s,t,e[t]);return s},w=(s,e)=>E(s,B(e));var m=(s,e,t)=>new Promise((a,c)=>{var f=i=>{try{d(t.next(i))}catch(u){c(u)}},n=i=>{try{d(t.throw(i))}catch(u){c(u)}},d=i=>i.done?a(i.value):Promise.resolve(i.value).then(f,n);d((t=t.apply(s,e)).next())});import{_ as T,q as C,s as P,l as R,e as b,c as g,o as p,a as l,g as x,t as $,h as G,m as j,x as L,u as V,p as v,y as q,z,G as F}from"./index-DXfJHqnU.js";import{G as M}from"./GiftForm-QMECSCxH.js";import"./PhotoIcon-DBuEETk9.js";import"./TrashIcon-BtZczJiP.js";const O={name:"GiftEdit",components:{ArrowLeftIcon:R,ArrowPathIcon:P,ExclamationTriangleIcon:C,GiftForm:M},setup(){const s=j(),e=L(),{showNotification:t}=V(),a=v(!1),c=v(null),f=v(null),n=q({}),d=()=>m(this,null,function*(){try{a.value=!0,c.value=null;const r=e.params.id,o=yield F.get(r);o.success?Object.assign(n,o.data):c.value=o.error||"Failed to load gift details"}catch(r){console.error("Failed to load gift:",r),c.value="Failed to load gift details. Please try again."}finally{a.value=!1}}),i=r=>m(this,null,function*(){try{a.value=!0;const o=yield F.update(n.name,w(_({},r),{gender:r.gender,docstatus:n.docstatus}));o.success?(t("Gift updated successfully","success"),s.push(`/gifts/${n.name}`)):t(o.error||"Failed to update gift","error")}catch(o){console.error("Failed to update gift:",o),t("Failed to update gift. Please try again.","error")}finally{a.value=!1,f.value&&f.value.resetSaving()}}),u=r=>m(this,null,function*(){try{a.value=!0,yield new Promise(o=>setTimeout(o,1e3)),n.status=r,t(`Gift ${r==="expired"?"marked as expired":"cancelled"}`,"success")}catch(o){console.error("Failed to update status:",o),t("Failed to update gift status","error")}finally{a.value=!1}}),k=r=>{const o={available:"bg-gray-100 text-gray-800",issued:"bg-blue-100 text-blue-800",expired:"bg-red-100 text-red-800",cancelled:"bg-charcoal-100 text-charcoal-800",redeemed:"bg-purple-100 text-purple-800"};return o[r]||o.available},I=r=>({available:"Available",issued:"Issued",expired:"Expired",cancelled:"Cancelled",redeemed:"Redeemed"})[r]||"Available";return z(()=>{d()}),{loading:a,error:c,gift:n,giftFormRef:f,updateGift:i,updateStatus:u,getStatusClasses:k,getStatusText:I}}},D={class:"min-h-full bg-desert-sand-50"},H={key:0,class:"flex items-center justify-center min-h-screen"},J={key:1,class:"flex items-center justify-center min-h-screen"},K={class:"text-center"},Q={class:"text-charcoal-600 mb-4"},U={key:2,class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 safe-area-padding"},W={class:"mb-6"};function X(s,e,t,a,c,f){const n=b("ExclamationTriangleIcon"),d=b("ArrowLeftIcon"),i=b("GiftForm");return p(),g("div",D,[a.loading&&!a.gift.name?(p(),g("div",H,[...e[2]||(e[2]=[l("div",{class:"animate-pulse text-center"},[l("div",{class:"w-.peer:checked~.peer-checked\\:bg-gray-600 { background-color: #4B5563; }h-16 bg-gray-100 rounded-xl mx-auto mb-4"}),l("div",{class:"h-4 bg-charcoal-200 rounded w-32 mx-auto mb-2"}),l("div",{class:"h-3 bg-charcoal-200 rounded w-24 mx-auto"})],-1)])])):a.error?(p(),g("div",J,[l("div",K,[x(n,{class:"w-16 h-16 text-red-500 mx-auto mb-4"}),e[4]||(e[4]=l("h3",{class:"text-lg font-semibold text-charcoal-900 mb-2"},"Gift Not Found",-1)),l("p",Q,$(a.error),1),l("button",{onClick:e[0]||(e[0]=u=>s.$router.push("/gifts")),class:"inline-flex items-center px-4 py-2 border border-charcoal-300 text-sm font-medium rounded-lg text-charcoal-700 bg-white hover:bg-charcoal-50 transition-colors"},[x(d,{class:"w-4 h-4 mr-2"}),e[3]||(e[3]=G(" Back to Gifts ",-1))])])])):(p(),g("div",U,[l("div",W,[l("button",{onClick:e[1]||(e[1]=u=>s.$router.go(-1)),class:"inline-flex items-center px-4 py-2 text-sm font-medium text-charcoal-600 hover:text-charcoal-900 transition-colors"},[x(d,{class:"w-4 h-4 mr-2"}),e[5]||(e[5]=G(" Back ",-1))])]),x(i,{ref:"giftFormRef","initial-data":a.gift,"is-edit-mode":!0,"gift-status":a.gift.status,onSubmit:a.updateGift},null,8,["initial-data","gift-status","onSubmit"])]))])}const se=T(O,[["render",X],["__scopeId","data-v-5fe67014"]]);export{se as default};
//# sourceMappingURL=GiftEdit-ql1U-UlH.js.map
