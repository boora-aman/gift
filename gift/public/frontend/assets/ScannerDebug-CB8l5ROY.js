const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/quagga.min-DzTfHC5L.js","assets/_commonjsHelpers-D6Ya60D-.js"])))=>i.map(i=>d[i]);
var v=(b,e,d)=>new Promise((s,g)=>{var y=n=>{try{r(d.next(n))}catch(h){g(h)}},a=n=>{try{r(d.throw(n))}catch(h){g(h)}},r=n=>n.done?s(n.value):Promise.resolve(n.value).then(y,a);r((d=d.apply(b,e)).next())});import{_ as k,c,o as m,a as t,h as u,t as i,f as x,n as A,F as C,k as T,m as p,y as L,p as f,z as E,O as S}from"./index-DXfJHqnU.js";const R={name:"ScannerDebug",setup(){const b=p(),e=L({userAgent:"",isMobile:!1,isHTTPS:!1,isPWA:!1,hasMediaDevices:!1,hasGetUserMedia:!1,isSecureContext:!1}),d=f(!1),s=f(null),g=f(!1),y=f(!1),a=f([]),r=f([]),n=(o,l)=>{const w=new Date().toLocaleTimeString();r.value.push({timestamp:w,level:o.toUpperCase(),message:l})},h=()=>{r.value=[]},M=()=>{var o;e.userAgent=navigator.userAgent,e.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.matchMedia("(max-width: 768px)").matches||window.matchMedia("(pointer: coarse)").matches||"ontouchstart"in window,e.isHTTPS=location.protocol==="https:",e.isPWA=window.matchMedia("(display-mode: standalone)").matches,e.hasMediaDevices=!!navigator.mediaDevices,e.hasGetUserMedia=!!((o=navigator.mediaDevices)!=null&&o.getUserMedia),e.isSecureContext=window.isSecureContext||location.protocol==="https:"||location.hostname==="localhost",n("info","System information collected"),n("info",`Mobile: ${e.isMobile}, HTTPS: ${e.isHTTPS}, PWA: ${e.isPWA}`)},D=()=>v(this,null,function*(){d.value=!0,s.value=null;try{n("info","Testing camera permission..."),(yield navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}})).getTracks().forEach(l=>l.stop()),s.value={success:!0},n("success","Camera permission granted successfully")}catch(o){n("error",`Camera permission failed: ${o.name} - ${o.message}`),s.value={success:!1,error:`${o.name}: ${o.message}`}}finally{d.value=!1}}),_=()=>v(this,null,function*(){g.value=!0;try{n("info","Enumerating devices...");const o=yield navigator.mediaDevices.enumerateDevices();a.value=o.filter(l=>l.kind==="videoinput"),y.value=!0,n("info",`Found ${a.value.length} camera(s)`),a.value.forEach((l,w)=>{n("info",`Camera ${w+1}: ${l.label||"Unknown"} (${l.deviceId.substring(0,10)}...)`)})}catch(o){n("error",`Failed to enumerate devices: ${o.message}`)}finally{g.value=!1}}),P=()=>v(this,null,function*(){try{if(n("info","Testing QuaggaJS scanner..."),(yield S(()=>import("./quagga.min-DzTfHC5L.js").then(w=>w.q),__vite__mapDeps([0,1]))).default)n("success","QuaggaJS loaded successfully"),b.push("/scan?scanner=quagga");else throw new Error("QuaggaJS failed to load")}catch(o){n("error",`QuaggaJS test failed: ${o.message}`)}}),I=()=>v(this,null,function*(){try{n("info","Testing ZXing scanner...");const{BrowserMultiFormatReader:o}=yield S(()=>v(this,null,function*(){const{BrowserMultiFormatReader:l}=yield import("./index-PXOcbEko.js");return{BrowserMultiFormatReader:l}}),[]);if(o)n("success","ZXing loaded successfully"),b.push("/scan?scanner=zxing");else throw new Error("ZXing failed to load")}catch(o){n("error",`ZXing test failed: ${o.message}`)}});return E(()=>{M()}),{systemInfo:e,testingCamera:d,cameraTestResult:s,enumeratingDevices:g,enumeratedDevices:y,cameras:a,debugLogs:r,testCameraPermission:D,enumerateDevices:_,testQuaggaJS:P,testZXing:I,clearLogs:h}}},N={class:"min-h-screen bg-charcoal-50 p-4"},Q={class:"max-w-2xl mx-auto"},U={class:"bg-white rounded-lg shadow p-6 mb-6"},H={class:"space-y-2 text-sm"},J={class:"bg-white rounded-lg shadow p-6 mb-6"},X=["disabled"],Z={key:0,class:"mt-4"},B={key:0,class:"text-red-600 text-sm mt-1"},F={class:"bg-white rounded-lg shadow p-6 mb-6"},W=["disabled"],Y={key:0,class:"space-y-2"},O={class:"font-medium"},V={class:"text-sm text-gray-600"},q={key:1,class:"text-gray-600"},z={class:"bg-white rounded-lg shadow p-6 mb-6"},G={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},j={class:"bg-white rounded-lg shadow p-6"},K={class:"max-h-64 overflow-y-auto bg-gray-900 text-green-400 p-4 rounded font-mono text-sm"};function $(b,e,d,s,g,y){return m(),c("div",N,[t("div",Q,[e[17]||(e[17]=t("h1",{class:"text-2xl font-bold text-charcoal-900 mb-6"},"Scanner Debug & Test",-1)),t("div",U,[e[12]||(e[12]=t("h2",{class:"text-lg font-semibold mb-4"},"System Information",-1)),t("div",H,[t("div",null,[e[5]||(e[5]=t("strong",null,"User Agent:",-1)),u(" "+i(s.systemInfo.userAgent),1)]),t("div",null,[e[6]||(e[6]=t("strong",null,"Is Mobile:",-1)),u(" "+i(s.systemInfo.isMobile?"Yes":"No"),1)]),t("div",null,[e[7]||(e[7]=t("strong",null,"Is HTTPS:",-1)),u(" "+i(s.systemInfo.isHTTPS?"Yes":"No"),1)]),t("div",null,[e[8]||(e[8]=t("strong",null,"Is PWA:",-1)),u(" "+i(s.systemInfo.isPWA?"Yes":"No"),1)]),t("div",null,[e[9]||(e[9]=t("strong",null,"Has Media Devices:",-1)),u(" "+i(s.systemInfo.hasMediaDevices?"Yes":"No"),1)]),t("div",null,[e[10]||(e[10]=t("strong",null,"Has getUserMedia:",-1)),u(" "+i(s.systemInfo.hasGetUserMedia?"Yes":"No"),1)]),t("div",null,[e[11]||(e[11]=t("strong",null,"Is Secure Context:",-1)),u(" "+i(s.systemInfo.isSecureContext?"Yes":"No"),1)])])]),t("div",J,[e[13]||(e[13]=t("h2",{class:"text-lg font-semibold mb-4"},"Camera Permission Test",-1)),t("button",{onClick:e[0]||(e[0]=(...a)=>s.testCameraPermission&&s.testCameraPermission(...a)),disabled:s.testingCamera,class:"btn btn-primary mb-4"},i(s.testingCamera?"Testing...":"Test Camera Access"),9,X),s.cameraTestResult?(m(),c("div",Z,[t("div",{class:A([s.cameraTestResult.success?"text-green-600":"text-red-600","font-medium"])},i(s.cameraTestResult.success?"✓ Camera access granted":"✗ Camera access failed"),3),s.cameraTestResult.error?(m(),c("div",B,i(s.cameraTestResult.error),1)):x("",!0)])):x("",!0)]),t("div",F,[e[14]||(e[14]=t("h2",{class:"text-lg font-semibold mb-4"},"Available Cameras",-1)),t("button",{onClick:e[1]||(e[1]=(...a)=>s.enumerateDevices&&s.enumerateDevices(...a)),disabled:s.enumeratingDevices,class:"btn btn-secondary mb-4"},i(s.enumeratingDevices?"Checking...":"Check Available Cameras"),9,W),s.cameras.length>0?(m(),c("div",Y,[(m(!0),c(C,null,T(s.cameras,(a,r)=>(m(),c("div",{key:r,class:"p-3 bg-gray-50 rounded"},[t("div",O,i(a.label||`Camera ${r+1}`),1),t("div",V,"ID: "+i(a.deviceId.substring(0,20))+"...",1)]))),128))])):s.cameras.length===0&&s.enumeratedDevices?(m(),c("div",q," No cameras found ")):x("",!0)]),t("div",z,[e[15]||(e[15]=t("h2",{class:"text-lg font-semibold mb-4"},"Test Scanner Components",-1)),t("div",G,[t("button",{onClick:e[2]||(e[2]=(...a)=>s.testQuaggaJS&&s.testQuaggaJS(...a)),class:"btn btn-primary"}," Test QuaggaJS Scanner "),t("button",{onClick:e[3]||(e[3]=(...a)=>s.testZXing&&s.testZXing(...a)),class:"btn btn-secondary"}," Test ZXing Scanner ")])]),t("div",j,[e[16]||(e[16]=t("h2",{class:"text-lg font-semibold mb-4"},"Debug Log",-1)),t("div",K,[(m(!0),c(C,null,T(s.debugLogs,(a,r)=>(m(),c("div",{key:r,class:"mb-1"}," ["+i(a.timestamp)+"] "+i(a.level)+": "+i(a.message),1))),128))]),t("button",{onClick:e[4]||(e[4]=(...a)=>s.clearLogs&&s.clearLogs(...a)),class:"btn btn-ghost mt-2"}," Clear Logs ")])])])}const te=k(R,[["render",$],["__scopeId","data-v-291d39d6"]]);export{te as default};
//# sourceMappingURL=ScannerDebug-CB8l5ROY.js.map
