var E=(I,e,v)=>new Promise((t,y)=>{var P=r=>{try{f(v.next(r))}catch(g){y(g)}},x=r=>{try{f(v.throw(r))}catch(g){y(g)}},f=r=>r.done?t(r.value):Promise.resolve(r.value).then(P,x);f((v=v.apply(I,e)).next())});import{_ as H,q as J,A as W,W as Y,T as K,J as $,P as ee,s as te,Q as oe,e as u,c,o as i,a as o,f as N,g as d,N as ae,h as D,n as se,w as S,v as V,i as re,t as l,X as ne,F as le,k as ce,H as F,m as ie,p as n,B as de,z as ge,Y as me,V as j}from"./index-DXfJHqnU.js";import{u as ue}from"./useToast-Dqmum05C.js";import{r as ve}from"./TrashIcon-BtZczJiP.js";const fe={name:"CategoryManagement",components:{ChevronRightIcon:oe,ArrowPathIcon:te,PlusIcon:ee,MagnifyingGlassIcon:$,TagIcon:K,PencilIcon:Y,TrashIcon:ve,XMarkIcon:W,ExclamationTriangleIcon:J},setup(){ie();const{showSuccess:I,showError:e}=ue(),v=n(!1),t=n(!1),y=n(!1),P=n([]),x=n(""),f=n("asc"),r=n(1),g=n(20),b=n(0),M=n(0),k=n(!1),T=n(!1),h=n(!1),p=n(null),_=n(null),a=n({category_name:"",description:""}),A=de(()=>{if(b.value===0)return"No categories found";const s=(r.value-1)*g.value+1,m=Math.min(r.value*g.value,b.value);return`${s}-${m} of ${b.value} categories`}),C=()=>E(this,null,function*(){try{v.value=!0;const s={page:r.value,limit:g.value,order_by:"category_name",sort_order:f.value};x.value.trim()&&(s.search=x.value.trim());const m=yield j.getCategories(s);m.success?(P.value=m.data||[],b.value=m.total||0,M.value=m.totalPages||0):e(m.error)}catch(s){console.error("Error loading categories:",s),e("Failed to load categories")}finally{v.value=!1}}),z=me(()=>{r.value=1,C()},300),R=()=>{C()},B=s=>{s>=1&&s<=M.value&&(r.value=s,C())},G=()=>{h.value=!1,p.value=null,a.value={category_name:"",description:""},k.value=!0},X=s=>{h.value=!0,p.value=s,a.value={category_name:s.category_name,description:s.description||""},k.value=!0},Q=()=>{k.value=!1,h.value=!1,p.value=null,a.value={category_name:"",description:""}},L=()=>E(this,null,function*(){var s,m;try{t.value=!0;let w;h.value?w=yield j.updateCategory(p.value.name,{category_name:a.value.category_name,description:a.value.description}):w=yield j.createCategory({category_name:a.value.category_name,description:a.value.description}),w.success?(I(h.value?"Category updated successfully":"Category created successfully"),Q(),C()):e(w.error)}catch(w){console.error("Error saving category:",w),e(((m=(s=w.response)==null?void 0:s.data)==null?void 0:m.message)||"Failed to save category")}finally{t.value=!1}}),O=s=>{_.value=s,T.value=!0},U=()=>{T.value=!1,_.value=null},q=()=>E(this,null,function*(){try{y.value=!0;const s=yield j.deleteCategory(_.value.name);s.success?(I("Category deleted successfully"),U(),C()):e(s.error)}catch(s){console.error("Error deleting category:",s),e("Failed to delete category")}finally{y.value=!1}}),Z=s=>s?new Date(s).toLocaleDateString():"";return ge(()=>{C()}),{loading:v,saving:t,deleting:y,categories:P,searchQuery:x,sortOrder:f,currentPage:r,limit:g,total:b,totalPages:M,showModal:k,showDeleteModal:T,isEditMode:h,editingCategory:p,categoryToDelete:_,formData:a,paginationInfo:A,loadCategories:C,debouncedSearch:z,refreshData:R,goToPage:B,openCreateModal:G,openEditModal:X,closeModal:Q,saveCategory:L,confirmDelete:O,closeDeleteModal:U,deleteCategory:q,formatDate:Z}}},he={class:"min-h-screen bg-off-white"},ye={class:"bg-white border-b border-charcoal-200"},xe={class:"container-responsive py-6"},be={class:"flex items-center justify-between"},pe={class:"flex items-center space-x-2 text-sm text-charcoal-500 mb-2"},_e={class:"flex items-center space-x-3"},Ce=["disabled"],we={class:"container-responsive py-6"},Me={class:"bg-white rounded-lg border border-charcoal-200 p-4 mb-6"},ke={class:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0"},De={class:"flex-1 max-w-md"},Ie={class:"relative"},Pe={class:"flex items-center space-x-4"},Te={class:"text-sm text-charcoal-500"},Ee={class:"bg-white rounded-lg border border-charcoal-200 overflow-hidden"},Ne={key:0,class:"p-8 text-center"},Se={key:1,class:"p-8 text-center"},je={class:"text-charcoal-500 mb-4"},Ae={key:2},Ve={class:"divide-y divide-charcoal-200"},Fe={class:"col-span-4"},Qe={class:"flex items-center space-x-3"},Ue={class:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center"},ze={class:"font-medium text-charcoal-800"},Re={class:"col-span-4"},Be={class:"text-charcoal-600 text-sm"},Ge={class:"col-span-2"},Xe={class:"text-charcoal-600 text-sm"},Le={class:"text-charcoal-500 text-xs"},Oe={class:"col-span-2 text-right"},qe={class:"flex items-center justify-end space-x-2"},Ze=["onClick"],He=["onClick"],Je={key:0,class:"flex items-center justify-between mt-6"},We={class:"text-sm text-charcoal-600"},Ye={class:"flex items-center space-x-2"},Ke=["disabled"],$e={class:"px-3 py-2 text-sm font-medium text-charcoal-700"},et=["disabled"],tt={class:"bg-white rounded-xl max-w-md w-full p-6"},ot={class:"flex items-center justify-between mb-6"},at={class:"text-xl font-semibold text-charcoal-800"},st={class:"flex items-center justify-end space-x-3 pt-4"},rt=["disabled"],nt={key:0},lt={key:1},ct={class:"bg-white rounded-xl max-w-md w-full p-6"},it={class:"flex items-center mb-4"},dt={class:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mr-4"},gt={class:"text-charcoal-700 mb-6"},mt={class:"flex items-center justify-end space-x-3"},ut=["disabled"],vt={key:0},ft={key:1};function ht(I,e,v,t,y,P){var _;const x=u("router-link"),f=u("ChevronRightIcon"),r=u("ArrowPathIcon"),g=u("PlusIcon"),b=u("MagnifyingGlassIcon"),M=u("TagIcon"),k=u("PencilIcon"),T=u("TrashIcon"),h=u("XMarkIcon"),p=u("ExclamationTriangleIcon");return i(),c("div",he,[o("div",ye,[o("div",xe,[o("div",be,[o("div",null,[o("div",pe,[d(x,{to:"/settings",class:"hover:text-gray-600"},{default:ae(()=>[...e[18]||(e[18]=[D("Settings",-1)])]),_:1}),d(f,{class:"w-4 h-4"}),e[19]||(e[19]=o("span",null,"Category Management",-1))]),e[20]||(e[20]=o("h1",{class:"text-2xl md:text-3xl font-bold text-charcoal-800"}," Category Management ",-1)),e[21]||(e[21]=o("p",{class:"text-charcoal-600 mt-1"}," Manage gift categories and organization ",-1))]),o("div",_e,[o("button",{onClick:e[0]||(e[0]=(...a)=>t.refreshData&&t.refreshData(...a)),disabled:t.loading,class:"inline-flex items-center px-4 py-2 border border-charcoal-300 rounded-lg text-sm font-medium text-charcoal-700 bg-white hover:bg-charcoal-50 disabled:opacity-50"},[d(r,{class:se(["w-4 h-4 mr-2",{"animate-spin":t.loading}])},null,8,["class"]),e[22]||(e[22]=D(" Refresh ",-1))],8,Ce),o("button",{onClick:e[1]||(e[1]=(...a)=>t.openCreateModal&&t.openCreateModal(...a)),class:"inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg text-sm font-medium hover:bg-gray-700"},[d(g,{class:"w-4 h-4 mr-2"}),e[23]||(e[23]=D(" Add Category ",-1))])])])])]),o("div",we,[o("div",Me,[o("div",ke,[o("div",De,[o("div",Ie,[d(b,{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-charcoal-400"}),S(o("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>t.searchQuery=a),onInput:e[3]||(e[3]=(...a)=>t.debouncedSearch&&t.debouncedSearch(...a)),type:"text",placeholder:"Search categories...",class:"w-full pl-10 pr-4 py-2 border border-charcoal-300 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-transparent"},null,544),[[V,t.searchQuery]])])]),o("div",Pe,[S(o("select",{"onUpdate:modelValue":e[4]||(e[4]=a=>t.sortOrder=a),onChange:e[5]||(e[5]=(...a)=>t.loadCategories&&t.loadCategories(...a)),class:"px-3 py-2 border border-charcoal-300 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-transparent"},[...e[24]||(e[24]=[o("option",{value:"asc"},"A-Z",-1),o("option",{value:"desc"},"Z-A",-1)])],544),[[re,t.sortOrder]]),o("span",Te,l(t.paginationInfo),1)])])]),o("div",Ee,[t.loading&&t.categories.length===0?(i(),c("div",Ne,[d(r,{class:"w-8 h-8 text-charcoal-400 mx-auto mb-4 animate-spin"}),e[25]||(e[25]=o("p",{class:"text-charcoal-500"},"Loading categories...",-1))])):t.categories.length===0?(i(),c("div",Se,[d(M,{class:"w-12 h-12 text-charcoal-300 mx-auto mb-4"}),e[27]||(e[27]=o("h3",{class:"text-lg font-medium text-charcoal-800 mb-2"},"No categories found",-1)),o("p",je,l(t.searchQuery?"No categories match your search.":"Get started by creating your first category."),1),t.searchQuery?N("",!0):(i(),c("button",{key:0,onClick:e[6]||(e[6]=(...a)=>t.openCreateModal&&t.openCreateModal(...a)),class:"inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg text-sm font-medium hover:bg-gray-700"},[d(g,{class:"w-4 h-4 mr-2"}),e[26]||(e[26]=D(" Add First Category ",-1))]))])):(i(),c("div",Ae,[e[28]||(e[28]=ne('<div class="bg-charcoal-50 border-b border-charcoal-200" data-v-b701531c><div class="grid grid-cols-12 gap-4 px-6 py-4 text-sm font-medium text-charcoal-700" data-v-b701531c><div class="col-span-4" data-v-b701531c>Category Name</div><div class="col-span-4" data-v-b701531c>Description</div><div class="col-span-2" data-v-b701531c>Created</div><div class="col-span-2 text-right" data-v-b701531c>Actions</div></div></div>',1)),o("div",Ve,[(i(!0),c(le,null,ce(t.categories,a=>(i(),c("div",{key:a.name,class:"grid grid-cols-12 gap-4 px-6 py-4 hover:bg-charcoal-50 transition-colors"},[o("div",Fe,[o("div",Qe,[o("div",Ue,[d(M,{class:"w-4 h-4 text-purple-600"})]),o("div",null,[o("p",ze,l(a.category_name),1)])])]),o("div",Re,[o("p",Be,l(a.description||"No description"),1)]),o("div",Ge,[o("p",Xe,l(t.formatDate(a.creation)),1),o("p",Le,"by "+l(a.creator_name||"System"),1)]),o("div",Oe,[o("div",qe,[o("button",{onClick:A=>t.openEditModal(a),class:"p-2 text-charcoal-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit category"},[d(k,{class:"w-4 h-4"})],8,Ze),o("button",{onClick:A=>t.confirmDelete(a),class:"p-2 text-charcoal-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete category"},[d(T,{class:"w-4 h-4"})],8,He)])])]))),128))])]))]),t.totalPages>1?(i(),c("div",Je,[o("p",We," Showing "+l((t.currentPage-1)*t.limit+1)+" to "+l(Math.min(t.currentPage*t.limit,t.total))+" of "+l(t.total)+" categories ",1),o("div",Ye,[o("button",{onClick:e[7]||(e[7]=a=>t.goToPage(t.currentPage-1)),disabled:t.currentPage===1,class:"px-3 py-2 border border-charcoal-300 rounded-lg text-sm font-medium text-charcoal-700 hover:bg-charcoal-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,Ke),o("span",$e," Page "+l(t.currentPage)+" of "+l(t.totalPages),1),o("button",{onClick:e[8]||(e[8]=a=>t.goToPage(t.currentPage+1)),disabled:t.currentPage===t.totalPages,class:"px-3 py-2 border border-charcoal-300 rounded-lg text-sm font-medium text-charcoal-700 hover:bg-charcoal-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,et)])])):N("",!0)]),t.showModal?(i(),c("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e[14]||(e[14]=F((...a)=>t.closeModal&&t.closeModal(...a),["self"]))},[o("div",tt,[o("div",ot,[o("h2",at,l(t.isEditMode?"Edit Category":"Create New Category"),1),o("button",{onClick:e[9]||(e[9]=(...a)=>t.closeModal&&t.closeModal(...a)),class:"p-2 text-charcoal-500 hover:text-charcoal-700 rounded-lg hover:bg-charcoal-100"},[d(h,{class:"w-5 h-5"})])]),o("form",{onSubmit:e[13]||(e[13]=F((...a)=>t.saveCategory&&t.saveCategory(...a),["prevent"])),class:"space-y-4"},[o("div",null,[e[29]||(e[29]=o("label",{for:"categoryName",class:"block text-sm font-medium text-charcoal-700 mb-2"}," Category Name * ",-1)),S(o("input",{id:"categoryName","onUpdate:modelValue":e[10]||(e[10]=a=>t.formData.category_name=a),type:"text",required:"",maxlength:"100",class:"w-full px-3 py-2 border border-charcoal-300 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-transparent",placeholder:"Enter category name"},null,512),[[V,t.formData.category_name]])]),o("div",null,[e[30]||(e[30]=o("label",{for:"description",class:"block text-sm font-medium text-charcoal-700 mb-2"}," Description ",-1)),S(o("textarea",{id:"description","onUpdate:modelValue":e[11]||(e[11]=a=>t.formData.description=a),rows:"3",maxlength:"500",class:"w-full px-3 py-2 border border-charcoal-300 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-transparent",placeholder:"Enter category description"},null,512),[[V,t.formData.description]])]),o("div",st,[o("button",{type:"button",onClick:e[12]||(e[12]=(...a)=>t.closeModal&&t.closeModal(...a)),class:"px-4 py-2 border border-charcoal-300 rounded-lg text-sm font-medium text-charcoal-700 hover:bg-charcoal-50"}," Cancel "),o("button",{type:"submit",disabled:t.saving,class:"px-4 py-2 bg-gray-600 text-white rounded-lg text-sm font-medium hover:bg-gray-700 disabled:opacity-50"},[t.saving?(i(),c("span",nt,l(t.isEditMode?"Updating...":"Creating..."),1)):(i(),c("span",lt,l(t.isEditMode?"Update Category":"Create Category"),1))],8,rt)])],32)])])):N("",!0),t.showDeleteModal?(i(),c("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e[17]||(e[17]=F((...a)=>t.closeDeleteModal&&t.closeDeleteModal(...a),["self"]))},[o("div",ct,[o("div",it,[o("div",dt,[d(p,{class:"w-6 h-6 text-red-600"})]),e[31]||(e[31]=o("div",null,[o("h2",{class:"text-lg font-semibold text-charcoal-800"},"Delete Category"),o("p",{class:"text-sm text-charcoal-600"},"This action cannot be undone")],-1))]),o("p",gt,[e[32]||(e[32]=D(' Are you sure you want to delete the category "',-1)),o("strong",null,l((_=t.categoryToDelete)==null?void 0:_.category_name),1),e[33]||(e[33]=D('"? ',-1))]),o("div",mt,[o("button",{type:"button",onClick:e[15]||(e[15]=(...a)=>t.closeDeleteModal&&t.closeDeleteModal(...a)),class:"px-4 py-2 border border-charcoal-300 rounded-lg text-sm font-medium text-charcoal-700 hover:bg-charcoal-50"}," Cancel "),o("button",{onClick:e[16]||(e[16]=(...a)=>t.deleteCategory&&t.deleteCategory(...a)),disabled:t.deleting,class:"px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700 disabled:opacity-50"},[t.deleting?(i(),c("span",vt,"Deleting...")):(i(),c("span",ft,"Delete Category"))],8,ut)])])])):N("",!0)])}const _t=H(fe,[["render",ht],["__scopeId","data-v-b701531c"]]);export{_t as default};
//# sourceMappingURL=CategoryManagement-YGiXWchZ.js.map
