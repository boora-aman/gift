var et=Object.defineProperty,tt=Object.defineProperties;var ot=Object.getOwnPropertyDescriptors;var we=Object.getOwnPropertySymbols;var je=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable;var Oe=(r,e,i)=>e in r?et(r,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[e]=i,ee=(r,e)=>{for(var i in e||(e={}))je.call(e,i)&&Oe(r,i,e[i]);if(we)for(var i of we(e))Fe.call(e,i)&&Oe(r,i,e[i]);return r},ie=(r,e)=>tt(r,ot(e));var Ne=(r,e)=>{var i={};for(var t in r)je.call(r,t)&&e.indexOf(t)<0&&(i[t]=r[t]);if(r!=null&&we)for(var t of we(r))e.indexOf(t)<0&&Fe.call(r,t)&&(i[t]=r[t]);return i};var j=(r,e,i)=>new Promise((t,k)=>{var S=_=>{try{C(i.next(_))}catch(F){k(F)}},p=_=>{try{C(i.throw(_))}catch(F){k(F)}},C=_=>_.done?t(_.value):Promise.resolve(_.value).then(S,p);C((i=i.apply(r,e)).next())});import{c as m,o as d,a as o,_ as Ce,aj as He,q as De,s as Ae,A as Me,p as E,z as Pe,a4 as qe,e as U,g as O,f as M,n as $,j as ve,t as A,W as rt,y as Ye,w as ae,v as le,ac as at,ak as nt,af as st,K as it,l as lt,h as de,H as ct,X as Ee,F as _e,k as xe,i as dt,m as ut,x as mt,u as ht,G as ft,I as Ge,L as gt}from"./index-DXfJHqnU.js";import{g as vt}from"./_commonjsHelpers-D6Ya60D-.js";import{C as bt,I as pt}from"./InterestForm-Cl3e1yb1.js";import{r as yt}from"./TrashIcon-BtZczJiP.js";import{r as wt}from"./PhotoIcon-DBuEETk9.js";function Ke(r,e){return d(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.412 15.655 9.75 21.75l3.745-4.012M9.257 13.5H3.75l2.659-2.849m2.048-2.194L14.25 2.25 12 10.5h8.25l-4.707 5.043M8.457 8.457 3 3m5.457 5.457 7.086 7.086m0 0L21 21"})])}function Je(r,e){return d(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"})])}function _t(r,e){return d(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}const xt={name:"CameraModal",components:{XMarkIcon:Me,BoltIcon:Je,BoltSlashIcon:Ke,ArrowPathIcon:Ae,ExclamationTriangleIcon:De,CameraIcon:He},emits:["close","photo-captured"],setup(r,{emit:e}){const i=E(null),t=E(null),k=E(!1),S=E(!0),p=E(!1),C=E(!1),_=E(!1),F=E("");let R=null,y=[];const f=()=>j(this,null,function*(){try{F.value="",y=(yield navigator.mediaDevices.enumerateDevices()).filter(B=>B.kind==="videoinput"),p.value=y.length>1;const P={video:{facingMode:S.value?"user":"environment",width:{ideal:1280},height:{ideal:1280}},audio:!1};if(R=yield navigator.mediaDevices.getUserMedia(P),i.value){i.value.srcObject=R,yield new Promise(H=>{i.value.onloadedmetadata=H});const K=R.getVideoTracks()[0].getCapabilities();C.value=!!K.torch,k.value=!0}}catch(D){console.error("Camera initialization error:",D),D.name==="NotAllowedError"?F.value="Camera permission denied. Please allow camera access and try again.":D.name==="NotFoundError"?F.value="No camera found. Please ensure your device has a camera.":D.name==="NotReadableError"?F.value="Camera is being used by another application.":F.value="Unable to access camera. Please check your device settings.",k.value=!1}}),Y=()=>j(this,null,function*(){p.value&&(R&&R.getTracks().forEach(D=>D.stop()),S.value=!S.value,k.value=!1,yield f())}),W=()=>j(this,null,function*(){if(!(!C.value||!R))try{yield R.getVideoTracks()[0].applyConstraints({advanced:[{torch:!_.value}]}),_.value=!_.value}catch(D){console.error("Flash toggle error:",D)}}),I=()=>{if(!i.value||!t.value||!k.value)return;const D=i.value,P=t.value,B=P.getContext("2d");P.width=D.videoWidth,P.height=D.videoHeight,B.drawImage(D,0,0,P.width,P.height),P.toBlob(K=>{K&&e("photo-captured",K)},"image/jpeg",.9)},V=()=>{R&&(R.getTracks().forEach(D=>D.stop()),R=null),k.value=!1};return Pe(()=>{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){F.value="Camera not supported on this device";return}f()}),qe(()=>{V()}),{videoElement:i,canvasElement:t,cameraReady:k,isFrontCamera:S,hasMultipleCameras:p,hasFlash:C,flashOn:_,error:F,initializeCamera:f,switchCamera:Y,toggleFlash:W,capturePhoto:I}}},kt={class:"fixed inset-0 bg-black bg-opacity-90 z-50"},Ct={class:"h-full flex flex-col"},It={class:"flex items-center justify-between p-4 bg-black text-white safe-area-padding"},Et={class:"flex items-center space-x-3"},St={class:"flex items-center space-x-2"},Rt=["disabled"],Dt=["disabled"],At={class:"flex-1 relative overflow-hidden"},Mt={ref:"canvasElement",class:"hidden"},Pt={key:0,class:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-90"},Lt={class:"bg-white rounded-xl p-6 mx-4 text-center max-w-md"},Tt={class:"text-charcoal-600 mb-4"},Ot={class:"flex space-x-3"},jt={class:"absolute inset-0 flex items-center justify-center pointer-events-none"},Ft=["disabled"],Nt={class:"bg-black text-white p-4 safe-area-padding"},Gt={class:"text-center"},Ut={class:"text-white/80 text-sm mb-2"},Bt={class:"text-white/60 text-xs"};function zt(r,e,i,t,k,S){const p=U("CameraIcon"),C=U("BoltIcon"),_=U("BoltSlashIcon"),F=U("ArrowPathIcon"),R=U("XMarkIcon"),y=U("ExclamationTriangleIcon");return d(),m("div",kt,[o("div",Ct,[o("div",It,[o("div",Et,[O(p,{class:"w-6 h-6 text-white"}),e[6]||(e[6]=o("h2",{class:"text-lg font-semibold"},"Take Photo",-1))]),o("div",St,[t.hasFlash?(d(),m("button",{key:0,onClick:e[0]||(e[0]=(...f)=>t.toggleFlash&&t.toggleFlash(...f)),disabled:!t.cameraReady,class:$(["p-2 rounded-lg bg-white bg-opacity-20 hover:bg-opacity-30 transition-all duration-200 disabled:opacity-50",{"bg-yellow-500 bg-opacity-80 hover:bg-yellow-500":t.flashOn}])},[t.flashOn?(d(),ve(_,{key:1,class:"w-5 h-5"})):(d(),ve(C,{key:0,class:"w-5 h-5"}))],10,Rt)):M("",!0),t.hasMultipleCameras?(d(),m("button",{key:1,onClick:e[1]||(e[1]=(...f)=>t.switchCamera&&t.switchCamera(...f)),disabled:!t.cameraReady,class:"p-2 rounded-lg bg-white bg-opacity-20 hover:bg-opacity-30 transition-all duration-200 disabled:opacity-50"},[O(F,{class:"w-5 h-5"})],8,Dt)):M("",!0),o("button",{onClick:e[2]||(e[2]=f=>r.$emit("close")),class:"p-2 rounded-lg bg-white bg-opacity-20 hover:bg-opacity-30 transition-all duration-200"},[O(R,{class:"w-5 h-5"})])])]),o("div",At,[o("video",{ref:"videoElement",class:$(["w-full h-full object-cover",{mirror:t.isFrontCamera}]),playsinline:"",muted:"",autoplay:""},null,2),o("canvas",Mt,null,512),t.error?(d(),m("div",Pt,[o("div",Lt,[O(y,{class:"w-12 h-12 text-red-500 mx-auto mb-4"}),e[7]||(e[7]=o("h3",{class:"text-lg font-semibold text-charcoal-900 mb-2"}," Camera Error ",-1)),o("p",Tt,A(t.error),1),o("div",Ot,[o("button",{onClick:e[3]||(e[3]=(...f)=>t.initializeCamera&&t.initializeCamera(...f)),class:"flex-1 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors"}," Try Again "),o("button",{onClick:e[4]||(e[4]=f=>r.$emit("close")),class:"flex-1 px-4 py-2 bg-charcoal-100 text-charcoal-700 rounded-lg hover:bg-charcoal-200 transition-colors"}," Cancel ")])])])):M("",!0),o("div",jt,[o("button",{onClick:e[5]||(e[5]=(...f)=>t.capturePhoto&&t.capturePhoto(...f)),disabled:!t.cameraReady,class:"w-20 h-20 rounded-full bg-white hover:bg-white/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center shadow-2xl border-4 border-white/50 pointer-events-auto"},[O(p,{class:"w-8 h-8 text-charcoal-900"})],8,Ft)])]),o("div",Nt,[o("div",Gt,[o("p",Ut,A(t.cameraReady?"Tap the camera button to take photo":"Preparing camera..."),1),o("p",Bt,A(t.isFrontCamera?"Using front camera":"Using back camera"),1)])])])])}const Vt=Ce(xt,[["render",zt],["__scopeId","data-v-d869838f"]]);var Wt={exports:{}};(function(r){var e=function(i){var t=Object.prototype,k=t.hasOwnProperty,S=Object.defineProperty||function(a,n,l){a[n]=l.value},p,C=typeof Symbol=="function"?Symbol:{},_=C.iterator||"@@iterator",F=C.asyncIterator||"@@asyncIterator",R=C.toStringTag||"@@toStringTag";function y(a,n,l){return Object.defineProperty(a,n,{value:l,enumerable:!0,configurable:!0,writable:!0}),a[n]}try{y({},"")}catch(a){y=function(n,l,g){return n[l]=g}}function f(a,n,l,g){var c=n&&n.prototype instanceof B?n:B,w=Object.create(c.prototype),u=new x(g||[]);return S(w,"_invoke",{value:he(a,l,u)}),w}i.wrap=f;function Y(a,n,l){try{return{type:"normal",arg:a.call(n,l)}}catch(g){return{type:"throw",arg:g}}}var W="suspendedStart",I="suspendedYield",V="executing",D="completed",P={};function B(){}function K(){}function H(){}var s={};y(s,_,function(){return this});var v=Object.getPrototypeOf,J=v&&v(v(T([])));J&&J!==t&&k.call(J,_)&&(s=J);var oe=H.prototype=B.prototype=Object.create(s);K.prototype=H,S(oe,"constructor",{value:H,configurable:!0}),S(H,"constructor",{value:K,configurable:!0}),K.displayName=y(H,R,"GeneratorFunction");function ue(a){["next","throw","return"].forEach(function(n){y(a,n,function(l){return this._invoke(n,l)})})}i.isGeneratorFunction=function(a){var n=typeof a=="function"&&a.constructor;return n?n===K||(n.displayName||n.name)==="GeneratorFunction":!1},i.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,H):(a.__proto__=H,y(a,R,"GeneratorFunction")),a.prototype=Object.create(oe),a},i.awrap=function(a){return{__await:a}};function ne(a,n){function l(w,u,b,L){var G=Y(a[w],a,u);if(G.type==="throw")L(G.arg);else{var q=G.arg,Z=q.value;return Z&&typeof Z=="object"&&k.call(Z,"__await")?n.resolve(Z.__await).then(function(te){l("next",te,b,L)},function(te){l("throw",te,b,L)}):n.resolve(Z).then(function(te){q.value=te,b(q)},function(te){return l("throw",te,b,L)})}}var g;function c(w,u){function b(){return new n(function(L,G){l(w,u,L,G)})}return g=g?g.then(b,b):b()}S(this,"_invoke",{value:c})}ue(ne.prototype),y(ne.prototype,F,function(){return this}),i.AsyncIterator=ne,i.async=function(a,n,l,g,c){c===void 0&&(c=Promise);var w=new ne(f(a,n,l,g),c);return i.isGeneratorFunction(n)?w:w.next().then(function(u){return u.done?u.value:w.next()})};function he(a,n,l){var g=W;return function(w,u){if(g===V)throw new Error("Generator is already running");if(g===D){if(w==="throw")throw u;return N()}for(l.method=w,l.arg=u;;){var b=l.delegate;if(b){var L=me(b,l);if(L){if(L===P)continue;return L}}if(l.method==="next")l.sent=l._sent=l.arg;else if(l.method==="throw"){if(g===W)throw g=D,l.arg;l.dispatchException(l.arg)}else l.method==="return"&&l.abrupt("return",l.arg);g=V;var G=Y(a,n,l);if(G.type==="normal"){if(g=l.done?D:I,G.arg===P)continue;return{value:G.arg,done:l.done}}else G.type==="throw"&&(g=D,l.method="throw",l.arg=G.arg)}}}function me(a,n){var l=n.method,g=a.iterator[l];if(g===p)return n.delegate=null,l==="throw"&&a.iterator.return&&(n.method="return",n.arg=p,me(a,n),n.method==="throw")||l!=="return"&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+l+"' method")),P;var c=Y(g,a.iterator,n.arg);if(c.type==="throw")return n.method="throw",n.arg=c.arg,n.delegate=null,P;var w=c.arg;if(!w)return n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,P;if(w.done)n[a.resultName]=w.value,n.next=a.nextLoc,n.method!=="return"&&(n.method="next",n.arg=p);else return w;return n.delegate=null,P}ue(oe),y(oe,R,"Generator"),y(oe,_,function(){return this}),y(oe,"toString",function(){return"[object Generator]"});function se(a){var n={tryLoc:a[0]};1 in a&&(n.catchLoc=a[1]),2 in a&&(n.finallyLoc=a[2],n.afterLoc=a[3]),this.tryEntries.push(n)}function ce(a){var n=a.completion||{};n.type="normal",delete n.arg,a.completion=n}function x(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(se,this),this.reset(!0)}i.keys=function(a){var n=Object(a),l=[];for(var g in n)l.push(g);return l.reverse(),function c(){for(;l.length;){var w=l.pop();if(w in n)return c.value=w,c.done=!1,c}return c.done=!0,c}};function T(a){if(a){var n=a[_];if(n)return n.call(a);if(typeof a.next=="function")return a;if(!isNaN(a.length)){var l=-1,g=function c(){for(;++l<a.length;)if(k.call(a,l))return c.value=a[l],c.done=!1,c;return c.value=p,c.done=!0,c};return g.next=g}}return{next:N}}i.values=T;function N(){return{value:p,done:!0}}return x.prototype={constructor:x,reset:function(a){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(ce),!a)for(var n in this)n.charAt(0)==="t"&&k.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=p)},stop:function(){this.done=!0;var a=this.tryEntries[0],n=a.completion;if(n.type==="throw")throw n.arg;return this.rval},dispatchException:function(a){if(this.done)throw a;var n=this;function l(L,G){return w.type="throw",w.arg=a,n.next=L,G&&(n.method="next",n.arg=p),!!G}for(var g=this.tryEntries.length-1;g>=0;--g){var c=this.tryEntries[g],w=c.completion;if(c.tryLoc==="root")return l("end");if(c.tryLoc<=this.prev){var u=k.call(c,"catchLoc"),b=k.call(c,"finallyLoc");if(u&&b){if(this.prev<c.catchLoc)return l(c.catchLoc,!0);if(this.prev<c.finallyLoc)return l(c.finallyLoc)}else if(u){if(this.prev<c.catchLoc)return l(c.catchLoc,!0)}else if(b){if(this.prev<c.finallyLoc)return l(c.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(a,n){for(var l=this.tryEntries.length-1;l>=0;--l){var g=this.tryEntries[l];if(g.tryLoc<=this.prev&&k.call(g,"finallyLoc")&&this.prev<g.finallyLoc){var c=g;break}}c&&(a==="break"||a==="continue")&&c.tryLoc<=n&&n<=c.finallyLoc&&(c=null);var w=c?c.completion:{};return w.type=a,w.arg=n,c?(this.method="next",this.next=c.finallyLoc,P):this.complete(w)},complete:function(a,n){if(a.type==="throw")throw a.arg;return a.type==="break"||a.type==="continue"?this.next=a.arg:a.type==="return"?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):a.type==="normal"&&n&&(this.next=n),P},finish:function(a){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.finallyLoc===a)return this.complete(l.completion,l.afterLoc),ce(l),P}},catch:function(a){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.tryLoc===a){var g=l.completion;if(g.type==="throw"){var c=g.arg;ce(l)}return c}}throw new Error("illegal catch attempt")},delegateYield:function(a,n,l){return this.delegate={iterator:T(a),resultName:n,nextLoc:l},this.method==="next"&&(this.arg=p),P}},i}(r.exports);try{regeneratorRuntime=e}catch(i){typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(Wt);var Le=(r,e)=>`${r}-${e}-${Math.random().toString(16).slice(3,8)}`;const Ht=Le;let Ue=0;var Xe=({id:r,action:e,payload:i={}})=>{let t=r;return typeof t=="undefined"&&(t=Ht("Job",Ue),Ue+=1),{id:t,action:e,payload:i}},be={};let Te=!1;be.logging=Te;be.setLogging=r=>{Te=r};be.log=(...r)=>Te?console.log.apply(void 0,r):null;const qt=Xe,{log:ke}=be,Yt=Le;let Be=0;var Kt=()=>{const r=Yt("Scheduler",Be),e={},i={};let t=[];Be+=1;const k=()=>t.length,S=()=>Object.keys(e).length,p=()=>{if(t.length!==0){const y=Object.keys(e);for(let f=0;f<y.length;f+=1)if(typeof i[y[f]]=="undefined"){t[0](e[y[f]]);break}}},C=(y,f)=>new Promise((Y,W)=>{const I=qt({action:y,payload:f});t.push(V=>j(void 0,null,function*(){t.shift(),i[V.id]=I;try{Y(yield V[y].apply(void 0,[...f,I.id]))}catch(D){W(D)}finally{delete i[V.id],p()}})),ke(`[${r}]: Add ${I.id} to JobQueue`),ke(`[${r}]: JobQueue length=${t.length}`),p()});return{addWorker:y=>(e[y.id]=y,ke(`[${r}]: Add ${y.id}`),ke(`[${r}]: Number of workers=${S()}`),p(),y.id),addJob:(y,...f)=>j(void 0,null,function*(){if(S()===0)throw Error(`[${r}]: You need to have at least one worker before adding jobs`);return C(y,f)}),terminate:()=>j(void 0,null,function*(){Object.keys(e).forEach(y=>j(void 0,null,function*(){yield e[y].terminate()})),t=[]}),getQueueLen:k,getNumWorkers:S}};function Jt(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function Xt(){return!!(typeof window!="undefined"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process!="undefined"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var Zt=Xt;const Qt=Zt;var $t=r=>{const e={};return typeof WorkerGlobalScope!="undefined"?e.type="webworker":Qt()?e.type="electron":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof Jt=="function"&&(e.type="node"),typeof r=="undefined"?e:e[r]};const eo=$t("type")==="browser",to=eo?r=>new URL(r,window.location.href).href:r=>r;var oo=r=>{const e=ee({},r);return["corePath","workerPath","langPath"].forEach(i=>{r[i]&&(e[i]=to(e[i]))}),e},ro=r=>{const e=[],i=[],t=[],k=[],S=[];return r.blocks&&r.blocks.forEach(p=>{p.paragraphs.forEach(C=>{C.lines.forEach(_=>{_.words.forEach(F=>{F.symbols.forEach(R=>{S.push(ie(ee({},R),{page:r,block:p,paragraph:C,line:_,word:F}))}),k.push(ie(ee({},F),{page:r,block:p,paragraph:C,line:_}))}),t.push(ie(ee({},_),{page:r,block:p,paragraph:C}))}),i.push(ie(ee({},C),{page:r,block:p}))}),e.push(ie(ee({},p),{page:r}))}),ie(ee({},r),{blocks:e,paragraphs:i,lines:t,words:k,symbols:S})},Ze={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const ao="5.1.1",no={version:ao};var so={workerBlobURL:!0,logger:()=>{}};const io=no.version,lo=so;var co=ie(ee({},lo),{workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${io}/dist/worker.min.js`}),uo=({workerPath:r,workerBlobURL:e})=>{let i;if(Blob&&URL&&e){const t=new Blob([`importScripts("${r}");`],{type:"application/javascript"});i=new Worker(URL.createObjectURL(t))}else i=new Worker(r);return i},mo=r=>{r.terminate()},ho=(r,e)=>{r.onmessage=({data:i})=>{e(i)}},fo=(r,e)=>j(void 0,null,function*(){r.postMessage(e)});const Se=r=>new Promise((e,i)=>{const t=new FileReader;t.onload=()=>{e(t.result)},t.onerror=({target:{error:{code:k}}})=>{i(Error(`File could not be read! Code=${k}`))},t.readAsArrayBuffer(r)}),Re=r=>j(void 0,null,function*(){let e=r;if(typeof r=="undefined")return"undefined";if(typeof r=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(r)?e=atob(r.split(",")[1]).split("").map(i=>i.charCodeAt(0)):e=yield(yield fetch(r)).arrayBuffer();else if(typeof HTMLElement!="undefined"&&r instanceof HTMLElement)r.tagName==="IMG"&&(e=yield Re(r.src)),r.tagName==="VIDEO"&&(e=yield Re(r.poster)),r.tagName==="CANVAS"&&(yield new Promise(i=>{r.toBlob(t=>j(void 0,null,function*(){e=yield Se(t),i()}))}));else if(typeof OffscreenCanvas!="undefined"&&r instanceof OffscreenCanvas){const i=yield r.convertToBlob();e=yield Se(i)}else(r instanceof File||r instanceof Blob)&&(e=yield Se(r));return new Uint8Array(e)});var go=Re;const vo=co,bo=uo,po=mo,yo=ho,wo=fo,_o=go;var xo={defaultOptions:vo,spawnWorker:bo,terminateWorker:po,onMessage:yo,send:wo,loadImage:_o};const ko=oo,Co=ro,re=Xe,{log:ze}=be,Io=Le,ge=Ze,{defaultOptions:Eo,spawnWorker:So,terminateWorker:Ro,onMessage:Do,loadImage:Ve,send:Ao}=xo;let We=0;var Qe=(...k)=>j(void 0,[...k],function*(r="eng",e=ge.LSTM_ONLY,i={},t={}){const S=Io("Worker",We),w=ko(ee(ee({},Eo),i)),{logger:p,errorHandler:C}=w,_=Ne(w,["logger","errorHandler"]),F={},R={},y=typeof r=="string"?r.split("+"):r;let f=e,Y=t;const W=[ge.DEFAULT,ge.LSTM_ONLY].includes(e)&&!_.legacyCore;let I,V;const D=new Promise((u,b)=>{V=u,I=b}),P=u=>{I(u.message)};let B=So(_);B.onerror=P,We+=1;const K=(u,b)=>{F[u]=b},H=(u,b)=>{R[u]=b},s=({id:u,action:b,payload:L})=>new Promise((G,q)=>{ze(`[${S}]: Start ${u}, action=${b}`);const Z=`${b}-${u}`;K(Z,G),H(Z,q),Ao(B,{workerId:S,jobId:u,action:b,payload:L})}),v=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),J=u=>s(re({id:u,action:"load",payload:{options:{lstmOnly:W,corePath:_.corePath,logging:_.logging}}})),oe=(u,b,L)=>s(re({id:L,action:"FS",payload:{method:"writeFile",args:[u,b]}})),ue=(u,b)=>s(re({id:b,action:"FS",payload:{method:"readFile",args:[u,{encoding:"utf8"}]}})),ne=(u,b)=>s(re({id:b,action:"FS",payload:{method:"unlink",args:[u]}})),he=(u,b,L)=>s(re({id:L,action:"FS",payload:{method:u,args:b}})),me=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),se=(u,b)=>s(re({id:b,action:"loadLanguage",payload:{langs:u,options:{langPath:_.langPath,dataPath:_.dataPath,cachePath:_.cachePath,cacheMethod:_.cacheMethod,gzip:_.gzip,lstmOnly:[ge.DEFAULT,ge.LSTM_ONLY].includes(f)&&!_.legacyLang}}})),ce=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),x=(u,b,L,G)=>s(re({id:G,action:"initialize",payload:{langs:u,oem:b,config:L}})),T=(u="eng",b,L,G)=>{if(W&&[ge.TESSERACT_ONLY,ge.TESSERACT_LSTM_COMBINED].includes(b))throw Error("Legacy model requested but code missing.");const q=b||f;f=q;const Z=L||Y;Y=Z;const pe=(typeof u=="string"?u.split("+"):u).filter(Ie=>!y.includes(Ie));return y.push(...pe),pe.length>0?se(pe,G).then(()=>x(u,q,Z,G)):x(u,q,Z,G)},N=(u={},b)=>s(re({id:b,action:"setParameters",payload:{params:u}})),a=(q,...Z)=>j(void 0,[q,...Z],function*(u,b={},L={blocks:!0,text:!0,hocr:!0,tsv:!0},G){return s(re({id:G,action:"recognize",payload:{image:yield Ve(u),options:b,output:L}}))}),n=(u="Tesseract OCR Result",b=!1,L)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),s(re({id:L,action:"getPDF",payload:{title:u,textonly:b}}))),l=(u,b)=>j(void 0,null,function*(){if(W)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return s(re({id:b,action:"detect",payload:{image:yield Ve(u)}}))}),g=()=>j(void 0,null,function*(){return B!==null&&(Ro(B),B=null),Promise.resolve()});Do(B,({workerId:u,jobId:b,status:L,action:G,data:q})=>{const Z=`${G}-${b}`;if(L==="resolve"){ze(`[${u}]: Complete ${b}`);let te=q;G==="recognize"?te=Co(q):G==="getPDF"&&(te=Array.from(ie(ee({},q),{length:Object.keys(q).length}))),F[Z]({jobId:b,data:te})}else if(L==="reject")if(R[Z](q),G==="load"&&I(q),C)C(q);else throw Error(q);else L==="progress"&&p(ie(ee({},q),{userJobId:b}))});const c={id:S,worker:B,setResolve:K,setReject:H,load:v,writeText:oe,readText:ue,removeFile:ne,FS:he,loadLanguage:me,initialize:ce,reinitialize:T,setParameters:N,recognize:a,getPDF:n,detect:l,terminate:g};return J().then(()=>se(r)).then(()=>x(r,e,t)).then(()=>V(c)).catch(()=>{}),D});const $e=Qe,Mo=(r,e,i)=>j(void 0,null,function*(){const t=yield $e(e,1,i);return t.recognize(r).finally(()=>j(void 0,null,function*(){yield t.terminate()}))}),Po=(r,e)=>j(void 0,null,function*(){const i=yield $e("osd",0,e);return i.detect(r).finally(()=>j(void 0,null,function*(){yield i.terminate()}))});var Lo={recognize:Mo,detect:Po},To={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},Oo={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const jo=Kt,Fo=Qe,No=Lo,Go=To,Uo=Ze,Bo=Oo,{setLogging:zo}=be;var Vo=ee({languages:Go,OEM:Uo,PSM:Bo,createScheduler:jo,createWorker:Fo,setLogging:zo},No);const Wo=vt(Vo),Ho={name:"EmiratesIdScanner",components:{XMarkIcon:Me,BoltIcon:Je,BoltSlashIcon:Ke,ArrowPathIcon:Ae,PencilIcon:rt,ExclamationTriangleIcon:De},emits:["close","data-extracted"],setup(r,{emit:e}){const i=E(null),t=E(null),k=E(!1),S=E(!1),p=E(!1),C=E(!1),_=E(!1),F=E(!1),R=E(!1),y=E(""),f=E("Position Emirates ID in frame"),Y=E(!1),W=Ye({first_name:"",last_name:"",emirates_id:""});let I=null,V=null,D=[];const P=()=>j(this,null,function*(){try{y.value="",D=(yield navigator.mediaDevices.enumerateDevices()).filter(N=>N.kind==="videoinput"),_.value=D.length>1;const T={video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}},audio:!1};if(I=yield navigator.mediaDevices.getUserMedia(T),i.value){i.value.srcObject=I,yield new Promise(n=>{i.value.onloadedmetadata=n});const a=I.getVideoTracks()[0].getCapabilities();F.value=!!a.torch,k.value=!0,H()}}catch(x){console.error("Camera initialization error:",x),x.name==="NotAllowedError"?y.value="Camera permission denied. Please allow camera access and try again.":x.name==="NotFoundError"?y.value="No camera found. Please ensure your device has a camera.":x.name==="NotReadableError"?y.value="Camera is being used by another application.":y.value="Unable to access camera. Please check your device settings.",k.value=!1}}),B=()=>j(this,null,function*(){_.value&&(I&&I.getTracks().forEach(x=>x.stop()),k.value=!1,yield P())}),K=()=>j(this,null,function*(){if(!(!F.value||!I))try{yield I.getVideoTracks()[0].applyConstraints({advanced:[{torch:!R.value}]}),R.value=!R.value}catch(x){console.error("Flash toggle error:",x)}}),H=()=>{!k.value||S.value||p.value||(S.value=!0,f.value="Scanning...",V=setInterval(()=>{J()},500))},s=()=>{S.value=!1,f.value="Scanning paused",V&&(clearInterval(V),V=null)},v=()=>{S.value?s():H()},J=()=>j(this,null,function*(){if(!(!i.value||!t.value||!S.value||p.value))try{const x=i.value,T=t.value,N=T.getContext("2d");T.width=x.videoWidth,T.height=x.videoHeight,N.drawImage(x,0,0,T.width,T.height);const a=yield oe(T);C.value=a,a&&!p.value&&setTimeout(()=>j(this,null,function*(){if(C.value&&!p.value){const n=T.toDataURL("image/jpeg",.9);yield ne(n)}}),1e3)}catch(x){console.error("Emirates ID detection error:",x),C.value=!1}}),oe=x=>j(this,null,function*(){try{const a=x.getContext("2d").getImageData(0,0,x.width,x.height).data;let n=0;const l=30;for(let g=x.height*.3;g<x.height*.7;g+=10)for(let c=x.width*.2;c<x.width*.8;c+=10){const w=(g*x.width+c)*4,u=a[w];if(c<x.width-1){const b=(g*x.width+(c+1))*4,L=a[b];Math.abs(u-L)>l&&n++}if(g<x.height-1){const b=((g+1)*x.width+c)*4,L=a[b];Math.abs(u-L)>l&&n++}}return n>50}catch(T){return console.error("Document detection error:",T),!1}}),ue=x=>{const T=document.createElement("canvas"),N=T.getContext("2d"),a=new Image;a.src=x,T.width=a.width,T.height=a.height,N.drawImage(a,0,0);const n=N.getImageData(0,0,T.width,T.height),l=n.data;for(let g=0;g<l.length;g+=4)l[g]=Math.min(255,Math.max(0,(l[g]-128)*1.5+128+20)),l[g+1]=Math.min(255,Math.max(0,(l[g+1]-128)*1.5+128+20)),l[g+2]=Math.min(255,Math.max(0,(l[g+2]-128)*1.5+128+20));return N.putImageData(n,0,0),T.toDataURL("image/png")},ne=x=>j(this,null,function*(){try{p.value=!0,s();const T=ue(x),{data:{text:N}}=yield Wo.recognize(T,"eng+ara",{logger:n=>console.log(n),tessedit_char_whitelist:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789- ",preserve_interword_spaces:"1",tessedit_pageseg_mode:"6"}),a=he(N);a&&(a.first_name||a.last_name||a.emirates_id)?(f.value=`Extracted: ${a.first_name?a.first_name+" ":""}${a.last_name?a.last_name+" ":""}${a.emirates_id?"(ID: "+a.emirates_id+")":""}`,e("data-extracted",a)):(f.value="No valid data found, retrying...",setTimeout(()=>{k.value&&H()},1e3))}catch(T){console.error("OCR processing error:",T),f.value="OCR processing failed, retrying...",setTimeout(()=>{k.value&&H()},1e3)}finally{p.value=!1}}),he=x=>{const T=x.replace(/\s+/g," ").trim(),N={first_name:"",last_name:"",emirates_id:""},a=/784[-\s]?\d{4}[-\s]?\d{7}[-\s]?\d{1}/g,n=T.match(a);if(n&&(N.emirates_id=n[0].replace(/\s/g,"").replace(/[^\d-]/g,""),N.emirates_id.length>=15)){const c=N.emirates_id.replace(/-/g,"");c.length===15&&(N.emirates_id=`${c.slice(0,3)}-${c.slice(3,7)}-${c.slice(7,14)}-${c.slice(14,15)}`)}const l=T.split(`
`).map(c=>c.trim()).filter(c=>c.length>0);let g=!1;for(let c=0;c<l.length&&!g;c++){const w=l[c];if(!(/^\d+$/.test(w)||/emirates|identity|card|authority|uae|الإمارات|هوية|nationality|جنسية|sex|جنس|date|تاريخ|birth|ميلاد/i.test(w)||w.length<2)&&/^[A-Z\s]+$/i.test(w)&&w.length>2){const u=w.split(/\s+/).filter(b=>b.length>1);if(u.length>=2){N.first_name=u[0],N.last_name=u.slice(1).join(" "),g=!0;break}else u.length===1&&u[0].length>2&&(N.first_name=u[0],g=!0)}}if(!g){const c=/(name|اسم|الاسم)\s*[:]\s*([A-Z\s]+)/i,w=T.match(c);if(w&&w[2]){const u=w[2].trim().split(/\s+/).filter(b=>b.length>1);u.length>=2&&(N.first_name=u[0],N.last_name=u.slice(1).join(" "),g=!0)}}if(!g){for(const c of l)if(/^[A-Z][a-z]+(\s+[A-Z][a-z]+)+$/.test(c)){const w=c.split(/\s+/);N.first_name=w[0],N.last_name=w.slice(1).join(" "),g=!0;break}}return N},me=()=>{e("data-extracted",ee({},W)),Y.value=!1,se()},se=()=>{W.first_name="",W.last_name="",W.emirates_id=""},ce=()=>{s(),I&&(I.getTracks().forEach(x=>x.stop()),I=null),k.value=!1};return Pe(()=>{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){y.value="Camera not supported on this device";return}P()}),qe(()=>{ce()}),{videoElement:i,canvasElement:t,cameraReady:k,isScanning:S,processing:p,documentDetected:C,hasMultipleCameras:_,hasFlash:F,flashOn:R,error:y,scanStatus:f,showManualInput:Y,manualForm:W,initializeCamera:P,switchCamera:B,toggleFlash:K,toggleScanning:v,processManualInput:me,clearManualForm:se}}},qo={class:"fixed inset-0 z-50 bg-charcoal-900 flex flex-col"},Yo={class:"flex items-center justify-between p-4 bg-charcoal-900/80"},Ko={key:1,class:"w-10 h-10"},Jo={class:"flex-1 relative"},Xo={ref:"videoElement",class:"w-full h-full object-cover",playsinline:"",muted:"",autoplay:""},Zo={ref:"canvasElement",class:"hidden"},Qo={class:"absolute inset-0 flex items-center justify-center"},$o={key:0,class:"absolute left-0 right-0 h-0.5 bg-emerald-400 opacity-80 animate-scan"},er={key:1,class:"absolute top-2 left-2 bg-gray-600 text-white text-xs px-2 py-1 rounded-full"},tr={key:0,class:"absolute inset-0 flex items-center justify-center bg-charcoal-900/90"},or={class:"bg-white rounded-xl p-6 mx-4 text-center max-w-md"},rr={class:"text-charcoal-600 mb-4"},ar={class:"flex space-x-3"},nr={key:1,class:"absolute inset-0 flex items-center justify-center bg-charcoal-900/90"},sr={class:"bg-white rounded-xl p-6 mx-4 text-center max-w-md"},ir={class:"p-6 bg-charcoal-900/80"},lr={class:"text-center mb-4"},cr={key:0,class:"text-white/80 text-sm"},dr={key:1,class:"text-white/80 text-sm"},ur={key:2,class:"text-emerald-400 text-sm font-medium"},mr={class:"flex items-center justify-center space-x-6"},hr=["disabled"],fr={key:1,class:"w-12 h-12"},gr=["disabled"],vr=["disabled"],br={key:0,class:"absolute inset-0 z-10 flex items-center justify-center p-4 bg-charcoal-900/80 backdrop-blur-sm"},pr={class:"bg-white rounded-xl p-6 w-full max-w-md"},yr={class:"space-y-4"},wr={class:"flex space-x-3 mt-6"},_r=["disabled"];function xr(r,e,i,t,k,S){const p=U("XMarkIcon"),C=U("BoltIcon"),_=U("BoltSlashIcon"),F=U("ExclamationTriangleIcon"),R=U("ArrowPathIcon"),y=U("PencilIcon");return d(),m("div",qo,[o("div",Yo,[o("button",{onClick:e[0]||(e[0]=f=>r.$emit("close")),class:"p-2 rounded-lg text-white/80 hover:text-white hover:bg-white/10 transition-colors"},[O(p,{class:"w-6 h-6"})]),e[12]||(e[12]=o("h2",{class:"text-lg font-semibold text-white"},"Scan Emirates ID",-1)),t.hasFlash?(d(),m("button",{key:0,onClick:e[1]||(e[1]=(...f)=>t.toggleFlash&&t.toggleFlash(...f)),class:"p-2 rounded-lg text-white/80 hover:text-white hover:bg-white/10 transition-colors"},[t.flashOn?(d(),ve(_,{key:1,class:"w-6 h-6"})):(d(),ve(C,{key:0,class:"w-6 h-6"}))])):(d(),m("div",Ko))]),o("div",Jo,[o("video",Xo,null,512),o("canvas",Zo,null,512),o("div",Qo,[o("div",{class:$(["relative w-80 h-48 max-w-[90vw] max-h-[40vh] border-2 rounded-lg transition-colors duration-300",t.documentDetected?"border-emerald-400 shadow-lg shadow-emerald-400/50":"border-emerald-500"])},[o("div",{class:$(["absolute -top-1 -left-1 w-6 h-6 border-t-4 border-l-4 rounded-tl transition-colors duration-300",t.documentDetected?"border-emerald-300":"border-emerald-400"])},null,2),o("div",{class:$(["absolute -top-1 -right-1 w-6 h-6 border-t-4 border-r-4 rounded-tr transition-colors duration-300",t.documentDetected?"border-emerald-300":"border-emerald-400"])},null,2),o("div",{class:$(["absolute -bottom-1 -left-1 w-6 h-6 border-b-4 border-l-4 rounded-bl transition-colors duration-300",t.documentDetected?"border-emerald-300":"border-emerald-400"])},null,2),o("div",{class:$(["absolute -bottom-1 -right-1 w-6 h-6 border-b-4 border-r-4 rounded-br transition-colors duration-300",t.documentDetected?"border-emerald-300":"border-emerald-400"])},null,2),t.isScanning&&t.documentDetected?(d(),m("div",$o)):M("",!0),t.documentDetected?(d(),m("div",er," Document detected ")):M("",!0)],2)]),e[16]||(e[16]=o("div",{class:"absolute inset-0 bg-charcoal-900/60 mask-id-scanner"},null,-1)),t.error?(d(),m("div",tr,[o("div",or,[O(F,{class:"w-12 h-12 text-red-500 mx-auto mb-4"}),e[13]||(e[13]=o("h3",{class:"text-lg font-semibold text-charcoal-900 mb-2"}," Camera Error ",-1)),o("p",rr,A(t.error),1),o("div",ar,[o("button",{onClick:e[2]||(e[2]=(...f)=>t.initializeCamera&&t.initializeCamera(...f)),class:"flex-1 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors"}," Try Again "),o("button",{onClick:e[3]||(e[3]=f=>r.$emit("close")),class:"flex-1 px-4 py-2 bg-charcoal-100 text-charcoal-700 rounded-lg hover:bg-charcoal-200 transition-colors"}," Cancel ")])])])):M("",!0),t.processing?(d(),m("div",nr,[o("div",sr,[O(R,{class:"w-12 h-12 text-gray-700 mx-auto mb-4 animate-spin"}),e[14]||(e[14]=o("h3",{class:"text-lg font-semibold text-charcoal-900 mb-2"}," Processing ID ",-1)),e[15]||(e[15]=o("p",{class:"text-charcoal-600"}," Extracting information from Emirates ID... ",-1))])])):M("",!0)]),o("div",ir,[o("div",lr,[t.cameraReady?t.isScanning?(d(),m("p",ur,A(t.documentDetected?"Scanning Emirates ID...":"Detecting document..."),1)):(d(),m("p",dr,A(t.documentDetected?"Document detected - ready to scan":t.scanStatus),1)):(d(),m("p",cr," Initializing camera... "))]),o("div",mr,[t.hasMultipleCameras?(d(),m("button",{key:0,onClick:e[4]||(e[4]=(...f)=>t.switchCamera&&t.switchCamera(...f)),disabled:!t.cameraReady,class:"p-3 rounded-full bg-white/10 text-white hover:bg-white/20 transition-colors disabled:opacity-50"},[O(R,{class:"w-6 h-6"})],8,hr)):(d(),m("div",fr)),o("button",{onClick:e[5]||(e[5]=(...f)=>t.toggleScanning&&t.toggleScanning(...f)),disabled:!t.cameraReady||t.processing,class:$(["px-6 py-3 rounded-full font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",t.isScanning?"bg-red-600 text-white hover:bg-red-700":"bg-gray-600 text-white hover:bg-gray-700"])},A(t.isScanning?"Stop Scan":"Start Scan"),11,gr),o("button",{onClick:e[6]||(e[6]=f=>t.showManualInput=!0),disabled:t.processing,class:"p-3 rounded-full bg-white/10 text-white hover:bg-white/20 transition-colors disabled:opacity-50"},[O(y,{class:"w-6 h-6"})],8,vr)]),e[17]||(e[17]=o("div",{class:"text-center mt-4"},[o("p",{class:"text-white/60 text-xs"}," Position the front of the Emirates ID within the frame. Scanning will start automatically when a document is detected. ")],-1))]),t.showManualInput?(d(),m("div",br,[o("div",pr,[e[21]||(e[21]=o("h3",{class:"text-lg font-semibold text-charcoal-900 mb-4"}," Enter Details Manually ",-1)),o("div",yr,[o("div",null,[e[18]||(e[18]=o("label",{class:"block text-sm font-medium text-charcoal-700 mb-2"}," First Name ",-1)),ae(o("input",{"onUpdate:modelValue":e[7]||(e[7]=f=>t.manualForm.first_name=f),type:"text",placeholder:"Enter first name...",class:"w-full px-3 py-2 border border-charcoal-300 rounded-lg text-charcoal-900 placeholder-charcoal-500 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent"},null,512),[[le,t.manualForm.first_name]])]),o("div",null,[e[19]||(e[19]=o("label",{class:"block text-sm font-medium text-charcoal-700 mb-2"}," Last Name ",-1)),ae(o("input",{"onUpdate:modelValue":e[8]||(e[8]=f=>t.manualForm.last_name=f),type:"text",placeholder:"Enter last name...",class:"w-full px-3 py-2 border border-charcoal-300 rounded-lg text-charcoal-900 placeholder-charcoal-500 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent"},null,512),[[le,t.manualForm.last_name]])]),o("div",null,[e[20]||(e[20]=o("label",{class:"block text-sm font-medium text-charcoal-700 mb-2"}," Emirates ID ",-1)),ae(o("input",{"onUpdate:modelValue":e[9]||(e[9]=f=>t.manualForm.emirates_id=f),type:"text",placeholder:"784-1234-1234567-1",class:"w-full px-3 py-2 border border-charcoal-300 rounded-lg text-charcoal-900 placeholder-charcoal-500 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent"},null,512),[[le,t.manualForm.emirates_id]])]),o("div",wr,[o("button",{onClick:e[10]||(e[10]=(...f)=>t.processManualInput&&t.processManualInput(...f)),disabled:!t.manualForm.first_name||!t.manualForm.last_name||!t.manualForm.emirates_id,class:"flex-1 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," Use Details ",8,_r),o("button",{onClick:e[11]||(e[11]=f=>{t.showManualInput=!1,t.clearManualForm()}),class:"flex-1 px-4 py-2 bg-charcoal-100 text-charcoal-700 rounded-lg hover:bg-charcoal-200 transition-colors"}," Cancel ")])])])])):M("",!0)])}const kr=Ce(Ho,[["render",xr],["__scopeId","data-v-3b5a5c2f"]]),Cr={name:"GiftIssueSuccessModal",components:{CheckCircleIcon:at},emits:["close","issue-another"]},Ir={class:"fixed inset-0 z-50 bg-charcoal-900/80 flex items-center justify-center p-4"},Er={class:"bg-white rounded-xl shadow-2xl p-8 mx-4 text-center max-w-md w-full animate-scale-in"},Sr={class:"w-16 h-16 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center"},Rr={class:"space-y-3"};function Dr(r,e,i,t,k,S){const p=U("CheckCircleIcon");return d(),m("div",Ir,[o("div",Er,[o("div",Sr,[O(p,{class:"w-10 h-10 text-gray-700"})]),e[2]||(e[2]=o("h3",{class:"text-xl font-semibold text-charcoal-900 mb-3"}," Gift Issued Successfully! ",-1)),e[3]||(e[3]=o("p",{class:"text-charcoal-600 mb-8"}," The gift has been successfully issued and recorded in the system. ",-1)),o("div",Rr,[o("button",{onClick:e[0]||(e[0]=C=>r.$emit("issue-another")),class:"w-full px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium"}," Issue Another Gift "),o("button",{onClick:e[1]||(e[1]=C=>r.$emit("close")),class:"w-full px-6 py-3 border border-charcoal-300 text-charcoal-700 rounded-lg hover:bg-charcoal-50 transition-colors"}," Back to Dashboard ")])])])}const Ar=Ce(Cr,[["render",Dr],["__scopeId","data-v-bdc027dd"]]),Mr={name:"GiftIssueFlow",components:{ArrowLeftIcon:lt,ArrowPathIcon:Ae,GiftIcon:it,CameraIcon:He,PhotoIcon:wt,XMarkIcon:Me,DocumentTextIcon:st,ExclamationTriangleIcon:De,InformationCircleIcon:nt,DocumentPlusIcon:_t,TrashIcon:yt,CameraModal:Vt,EmiratesIdScanner:kr,GiftIssueSuccessModal:Ar,InterestForm:pt,CreateRecipientModal:bt},setup(){const r=ut(),e=mt(),{showNotification:i}=ht(),t=E(!0),k=E(!1),S=E(""),p=E({}),C=E(!1),_=E(!1),F=E(!1),R=E(!1),y=E(!1),f=E(""),Y=E(""),W=E(null),I=E({}),V=E(""),D=E([]),P=E(!1),B=E(null),K=E("existing"),H=E(!1),s=E(null),v=Ye({owner_full_name:"",coordinator_full_name:"",mobile_number:"",emirates_id:"",address:"",person_photo:"",date:new Date().toISOString().split("T")[0],documents:[]}),J=h=>{f.value=h,h==="interest"&&(y.value=!0)},oe=()=>j(this,null,function*(){try{t.value=!0,S.value="";const h=e.params.id;if(!h)throw new Error("Gift Code is required");const z=yield ft.getDetails(h);if(!z.success)throw new Error(z.error||"Failed to load gift details");const Q=z.data.gift||z.data;if(p.value=Q,p.value.status!=="Available"){let X=`This gift is currently "${p.value.status}"`;if(p.value.status==="Issued"){const fe=p.value.issued_date||"unknown date",ye=`${p.value.owner_full_name||""}`.trim();X+=ye?` and was issued to ${ye} on ${fe}`:` on ${fe}`,X+=".",i(X,"info"),S.value=`This gift has already been issued. ${X}`}else throw X+='. Only "Available" gifts can be issued.',new Error(X)}}catch(h){console.error("Failed to load gift details:",h),S.value=h.message}finally{t.value=!1}}),ue=()=>{C.value=!0},ne=()=>{var h;(h=W.value)==null||h.click()},he=h=>j(this,null,function*(){const z=h.target.files[0];z&&(yield se(z))}),me=h=>j(this,null,function*(){C.value=!1,yield se(h)}),se=h=>j(this,null,function*(){try{const z=new FileReader;z.onload=X=>{Y.value=X.target.result},z.readAsDataURL(h);const Q=yield Ge.upload(h,!0);if(Q&&Q.success)v.person_photo=Q.data.file_url,i("Photo uploaded successfully","success");else throw new Error((Q==null?void 0:Q.error)||"Failed to upload photo")}catch(z){console.error("Photo upload error:",z),i(`Failed to upload photo: ${z.message}`,"error")}}),ce=()=>{Y.value="",v.person_photo="",W.value&&(W.value.value="")},x=h=>{_.value=!1,B.value||(h.first_name&&h.last_name&&(v.owner_full_name=`${h.first_name} ${h.last_name}`.trim()),h.emirates_id&&(v.emirates_id=h.emirates_id)),i("Emirates ID data extracted successfully","success")},T=()=>j(this,null,function*(){if(!V.value||V.value.length<2){D.value=[],P.value=!1;return}try{const z=yield(yield fetch("/api/method/gift.api_v2.search_recipients",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||""},body:JSON.stringify({search_term:V.value,limit:10})})).json();z.message&&z.message.success?(D.value=z.message.data||[],P.value=D.value.length>0):(D.value=[],P.value=!1)}catch(h){console.error("Error searching recipients:",h),D.value=[],P.value=!1}}),N=h=>{B.value=h,V.value=`${h.owner_full_name} - ${h.coordinator_full_name}`,P.value=!1,v.owner_full_name=h.owner_full_name,v.coordinator_full_name=h.coordinator_full_name,v.mobile_number=h.coordinator_mobile_no,v.emirates_id=h.coordinator_emirates_id||"",v.address=h.address||"",delete I.selectedRecipient},a=()=>{B.value=null,V.value="",v.owner_full_name="",v.coordinator_full_name="",v.mobile_number="",v.emirates_id="",v.address=""},n=()=>{H.value=!0},l=h=>{s.value=h,H.value=!1,v.owner_full_name=h.owner_full_name,v.coordinator_full_name=h.coordinator_full_name,v.mobile_number=h.coordinator_mobile_no,v.emirates_id=h.coordinator_emirates_id||"",v.address=h.address||"",delete I.newRecipient,i("Recipient created and selected successfully","success")},g=()=>{s.value=null,v.owner_full_name="",v.coordinator_full_name="",v.mobile_number="",v.emirates_id="",v.address=""},c=()=>{v.documents.push({document_type:"",document_attachment:"",description:""})},w=h=>{v.documents.splice(h,1)},u=(h,z)=>j(this,null,function*(){const Q=h.target.files[0];if(Q)try{const X=yield Ge.upload(Q,!0);if(X&&X.success)v.documents[z].document_attachment=X.data.file_url,v.documents[z].fileName=Q.name,i("Document uploaded successfully","success");else throw new Error((X==null?void 0:X.error)||"Failed to upload document")}catch(X){console.error("Document upload error:",X),i(`Failed to upload document: ${X.message}`,"error")}}),b=h=>{h.document_attachment&&window.open(h.document_attachment,"_blank")},L=()=>j(this,null,function*(){if(I.value={},K.value==="existing"&&!B.value&&(I.value.selectedRecipient="Please select an existing recipient"),K.value==="new"&&!s.value&&(I.value.newRecipient="Please create a new recipient"),B.value||s.value)return Object.keys(I.value).length===0;if(v.owner_full_name.trim()||(I.value.owner_full_name="Owner full name is required"),v.coordinator_full_name.trim()||(I.value.coordinator_full_name="Coordinator full name is required"),!v.mobile_number.trim())I.value.mobile_number="Mobile number is required";else{const h=v.mobile_number.replace(/\s+/g,"").replace(/[-+()]/g,"");/^\d{8,15}$/.test(h)||(I.value.mobile_number="Please enter a valid mobile number")}if(v.emirates_id&&v.emirates_id.trim())try{const h=yield gt.validateEmiratesId(v.emirates_id);h.success?h.data.valid?v.emirates_id=h.data.formatted_id:I.value.emirates_id=h.data.error:I.value.emirates_id=h.error}catch(h){console.warn("Emirates ID validation failed:",h),I.value.emirates_id="Unable to validate Emirates ID format"}return Object.keys(I.value).length===0}),G=()=>j(this,null,function*(){var z;if(yield L())try{k.value=!0;const Q={gift:p.value.name,gift_recipient:((z=B.value)==null?void 0:z.name)||null,owner_full_name:v.owner_full_name,coordinator_full_name:v.coordinator_full_name,mobile_number:v.mobile_number,emirates_id:v.emirates_id,address:v.address,person_photo:v.person_photo,date:v.date,documents:v.documents.filter(ye=>ye.document_type&&ye.document_attachment)},fe=yield(yield fetch("/api/method/gift.api_v2.create_gift_issue_v2",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)})).json();if(!fe.message||!fe.message.name)throw new Error(fe.exc||fe.error||"Failed to dispatch gift");R.value=!0}catch(Q){console.error("Failed to submit gift issue:",Q),i(Q.message||"Failed to dispatch gift","error")}finally{k.value=!1}}),q=()=>{R.value=!1,r.push("/")},Z=()=>{R.value=!1,r.push("/scan")},te=()=>{y.value=!1,f.value="",r.push("/")},pe=()=>{y.value=!1,f.value=""},Ie=h=>{if(!h)return"N/A";try{const z=new Date(h);return new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(z)}catch(z){return h}};return Pe(()=>{oe(),document.addEventListener("click",h=>{h.target.closest(".recipient-search-container")||(P.value=!1)})}),{loading:t,submitting:k,error:S,gift:p,form:v,errors:I,route:e,showCamera:C,showEmiratesIdScanner:_,showAdditionalDetails:F,showSuccessModal:R,showAddInterest:y,selectedAction:f,capturedPhoto:Y,galleryInput:W,recipientSearch:V,searchResults:D,showRecipientDropdown:P,selectedRecipient:B,recipientMode:K,showCreateRecipientModal:H,newlyCreatedRecipient:s,searchRecipients:T,selectRecipient:N,clearSelectedRecipient:a,editNewRecipient:n,handleRecipientCreated:l,clearNewRecipient:g,selectAction:J,loadGiftDetails:oe,openCamera:ue,openGallery:ne,handleGalleryPhoto:he,handleCapturedPhoto:me,clearPhoto:ce,handleEmiratesIdData:x,addDocument:c,removeDocument:w,handleDocumentUpload:u,viewDocument:b,submitGiftIssue:G,handleSuccessModalClose:q,handleIssueAnother:Z,handleInterestSuccess:te,handleInterestClose:pe,formatDate:Ie}}},Pr={class:"min-h-screen bg-desert-sand-50 pb-safe"},Lr={class:"absolute top-4 left-4 z-10"},Tr={key:0,class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Or={class:"bg-white rounded-xl shadow-card p-6 text-center"},jr={key:1,class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Fr={class:"bg-white rounded-xl shadow-card p-6 text-center"},Nr={key:0,class:"mb-4"},Gr={key:1,class:"mb-4"},Ur={class:"text-charcoal-600 mb-4"},Br={class:"flex flex-col sm:flex-row justify-center gap-3"},zr={key:2,class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24 space-y-8"},Vr={class:"bg-white rounded-xl shadow-card p-6"},Wr={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Hr={class:"lg:col-span-1"},qr={class:"aspect-square rounded-lg overflow-hidden bg-charcoal-100"},Yr=["src","alt"],Kr={key:1,class:"w-full h-full flex items-center justify-center"},Jr={class:"lg:col-span-2"},Xr={class:"flex items-center justify-between mb-4"},Zr={class:"text-2xl font-bold text-charcoal-900"},Qr={key:0,class:"text-charcoal-600 mb-4"},$r={class:"bg-charcoal-50 rounded-lg p-4"},ea={class:"w-full"},ta={class:"space-y-2"},oa={class:"border-b border-charcoal-200 last:border-b-0"},ra={class:"py-2 text-charcoal-900 capitalize"},aa={class:"border-b border-charcoal-200 last:border-b-0"},na={class:"py-2 text-charcoal-900 font-mono"},sa={class:"py-2"},ia={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},la={key:0,class:"bg-white rounded-xl shadow-card p-4"},ca={class:"flex flex-col sm:flex-row gap-3 justify-center"},da={key:1,class:"bg-white rounded-xl shadow-card p-4"},ua={class:"bg-white rounded-xl shadow-card p-6"},ma={class:"flex items-center justify-between mb-6"},ha={class:"mb-8"},fa={class:"mb-6"},ga={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},va={key:0,class:"absolute top-2 right-2"},ba={key:0,class:"absolute top-2 right-2"},pa={key:0,class:"mb-6"},ya={class:"relative recipient-search-container"},wa={key:1,class:"absolute z-20 w-full mt-1 bg-white border border-charcoal-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},_a=["onClick"],xa={class:"font-medium text-charcoal-900"},ka={class:"text-sm text-charcoal-600"},Ca={class:"text-sm text-charcoal-500"},Ia={key:0,class:"mt-3 p-4 bg-green-50 border border-green-200 rounded-lg"},Ea={class:"flex items-center justify-between"},Sa={class:"font-medium text-green-900"},Ra={class:"text-sm text-green-700"},Da={class:"text-sm text-green-600"},Aa={key:1,class:"mt-2 text-sm text-red-600"},Ma={key:1,class:"mb-6"},Pa={key:0,class:"mt-3 p-4 bg-blue-50 border border-blue-200 rounded-lg"},La={class:"flex items-center justify-between"},Ta={class:"font-medium text-blue-900"},Oa={class:"text-sm text-blue-700"},ja={class:"text-sm text-blue-600"},Fa={key:1,class:"mt-2 text-sm text-red-600"},Na={class:"space-y-6"},Ga={class:"mb-8"},Ua={class:"grid grid-cols-1 gap-6"},Ba=["readonly"],za={key:0,class:"mt-1 text-sm text-red-600"},Va={class:"mb-8"},Wa={class:"grid grid-cols-1 gap-6"},Ha=["readonly"],qa={key:0,class:"mt-1 text-sm text-red-600"},Ya={class:"mb-8"},Ka={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ja=["readonly"],Xa={key:0,class:"mt-1 text-sm text-red-600"},Za=["readonly"],Qa={key:0,class:"mt-1 text-sm text-red-600"},$a={class:"mb-6"},en=["readonly"],tn={key:0,class:"mt-1 text-sm text-red-600"},on={class:"bg-white rounded-xl shadow-card p-6"},rn={class:"mb-6"},an={key:0,class:"relative inline-block"},nn=["src"],sn={key:1,class:"w-32 h-32 border-2 border-dashed border-charcoal-300 rounded-lg flex items-center justify-center bg-charcoal-50"},ln={class:"flex flex-wrap gap-3"},cn={class:"bg-white rounded-xl shadow-card p-6"},dn={class:"flex items-center justify-between mb-6"},un={key:0,class:"space-y-4"},mn={class:"grid grid-cols-1 lg:grid-cols-12 gap-4 items-end mb-3"},hn={class:"lg:col-span-3"},fn=["onUpdate:modelValue"],gn={class:"lg:col-span-3"},vn={class:"flex items-center space-x-2"},bn=["id","onChange"],pn=["onClick"],yn={key:0,class:"mt-1 text-xs text-green-600"},wn={class:"lg:col-span-4"},_n=["onUpdate:modelValue"],xn={class:"lg:col-span-2 flex justify-end"},kn=["onClick"],Cn={key:0,class:"mt-4 p-3 bg-gray-50 rounded-lg"},In={class:"flex items-center space-x-3"},En={class:"flex-shrink-0"},Sn={class:"flex-1 min-w-0"},Rn={class:"text-sm font-medium text-charcoal-900 truncate"},Dn={class:"text-xs text-charcoal-500"},An={class:"flex-shrink-0"},Mn=["onClick"],Pn={key:1,class:"text-center py-8 border-2 border-dashed border-charcoal-300 rounded-lg"},Ln={class:"flex justify-center pt-6 pb-20 sm:pb-6"},Tn=["disabled"],On={key:0,class:"flex items-center justify-center"},jn={key:1},Fn={key:6,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-charcoal-900/80 backdrop-blur-sm"},Nn={class:"bg-white rounded-xl p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto"},Gn={class:"flex items-center justify-between mb-4"},Un={class:"space-y-4"},Bn={key:0},zn={class:"grid grid-cols-2 md:grid-cols-3 gap-3"},Vn=["src","alt"],Wn={key:1},Hn={class:"bg-charcoal-50 rounded-lg p-4"},qn={class:"w-full"},Yn={class:"py-3 text-sm font-medium text-charcoal-600 w-1/3"},Kn={class:"py-3 text-charcoal-900"},Jn={class:"bg-charcoal-50 rounded-lg p-4"},Xn={class:"w-full"},Zn={class:"border-b border-charcoal-200"},Qn={class:"py-3 text-charcoal-900"},$n={class:"border-b border-charcoal-200"},es={class:"py-3 text-charcoal-900"},ts={class:"py-3 text-charcoal-900"},os={class:"flex justify-end mt-6"};function rs(r,e,i,t,k,S){const p=U("ArrowLeftIcon"),C=U("ArrowPathIcon"),_=U("InformationCircleIcon"),F=U("ExclamationTriangleIcon"),R=U("GiftIcon"),y=U("DocumentTextIcon"),f=U("XMarkIcon"),Y=U("CameraIcon"),W=U("PhotoIcon"),I=U("DocumentPlusIcon"),V=U("TrashIcon"),D=U("CreateRecipientModal"),P=U("GiftIssueSuccessModal"),B=U("CameraModal"),K=U("EmiratesIdScanner"),H=U("InterestForm");return d(),m("div",Pr,[o("div",Lr,[o("button",{onClick:e[0]||(e[0]=s=>r.$router.push("/scan")),class:"p-3 rounded-full bg-white/90 backdrop-blur-sm text-charcoal-600 hover:bg-white hover:text-charcoal-900 transition-colors shadow-lg"},[O(p,{class:"w-6 h-6"})])]),t.loading?(d(),m("div",Tr,[o("div",Or,[O(C,{class:"w-8 h-8 mx-auto mb-4 animate-spin text-gray-700"}),e[35]||(e[35]=o("p",{class:"text-charcoal-600"},"Loading gift details...",-1))])])):t.error?(d(),m("div",jr,[o("div",Fr,[t.error.includes("already been issued")?(d(),m("div",Nr,[O(_,{class:"w-12 h-12 mx-auto mb-4 text-blue-500"}),e[36]||(e[36]=o("h3",{class:"text-lg font-semibold text-charcoal-900 mb-2"},"Gift Already Issued",-1))])):(d(),m("div",Gr,[O(F,{class:"w-12 h-12 mx-auto mb-4 text-red-500"}),e[37]||(e[37]=o("h3",{class:"text-lg font-semibold text-charcoal-900 mb-2"},"Unable to Issue Gift",-1))])),o("p",Ur,A(t.error),1),o("div",Br,[o("button",{onClick:e[1]||(e[1]=(...s)=>t.loadGiftDetails&&t.loadGiftDetails(...s)),class:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors"}," Refresh "),t.error.includes("already been issued")?(d(),m("button",{key:0,onClick:e[2]||(e[2]=s=>t.showAddInterest=!0),class:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors"}," Add Interest ")):M("",!0),o("button",{onClick:e[3]||(e[3]=s=>r.$router.push("/scanner")),class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"}," Scan Another Gift ")])])])):(d(),m("div",zr,[o("div",Vr,[e[42]||(e[42]=o("h2",{class:"text-xl font-semibold text-charcoal-900 mb-6"},"Gift Details",-1)),o("div",Wr,[o("div",Hr,[o("div",qr,[t.gift.images&&t.gift.images.length>0?(d(),m("img",{key:0,src:t.gift.images[0].image,alt:t.gift.gift_name,class:"w-full h-full object-contain"},null,8,Yr)):(d(),m("div",Kr,[O(R,{class:"w-16 h-16 text-charcoal-400"})]))])]),o("div",Jr,[o("div",Xr,[o("h3",Zr,A(t.gift.gift_name),1),t.gift.additional_attributes&&t.gift.additional_attributes.length>0?(d(),m("button",{key:0,onClick:e[4]||(e[4]=s=>t.showAdditionalDetails=!0),class:"text-sm text-gray-700 hover:text-gray-800 font-medium flex items-center"},[O(_,{class:"w-4 h-4 mr-1"}),e[38]||(e[38]=de(" View Details ",-1))])):M("",!0)]),t.gift.description?(d(),m("p",Qr,A(t.gift.description),1)):M("",!0),o("div",$r,[o("table",ea,[o("tbody",ta,[o("tr",oa,[e[39]||(e[39]=o("td",{class:"py-2 text-sm font-medium text-charcoal-500 w-1/3"},"Category",-1)),o("td",ra,A(t.gift.category),1)]),o("tr",aa,[e[40]||(e[40]=o("td",{class:"py-2 text-sm font-medium text-charcoal-500 w-1/3"},"Gift Code",-1)),o("td",na,A(t.gift.barcode_value),1)]),o("tr",null,[e[41]||(e[41]=o("td",{class:"py-2 text-sm font-medium text-charcoal-500 w-1/3"},"Status",-1)),o("td",sa,[o("span",ia,A(t.gift.status),1)])])])])])])])]),t.selectedAction?M("",!0):(d(),m("div",la,[e[45]||(e[45]=o("h3",{class:"text-lg font-medium text-charcoal-900 mb-4 text-center"},"Choose Action",-1)),o("div",ca,[o("button",{onClick:e[5]||(e[5]=s=>t.selectAction("dispatch")),class:"flex items-center justify-center px-4 py-3 border-2 border-charcoal-200 rounded-lg hover:border-gray-500 hover:bg-gray-50 transition-all duration-200 min-h-[44px] touch-manipulation"},[O(R,{class:"w-5 h-5 mr-2 text-gray-600"}),e[43]||(e[43]=o("span",{class:"text-sm font-medium text-charcoal-900"},"Gift Dispatch",-1))]),o("button",{onClick:e[6]||(e[6]=s=>t.selectAction("interest")),class:"flex items-center justify-center px-4 py-3 border-2 border-charcoal-200 rounded-lg hover:border-gray-500 hover:bg-gray-50 transition-all duration-200 min-h-[44px] touch-manipulation"},[O(y,{class:"w-5 h-5 mr-2 text-gray-600"}),e[44]||(e[44]=o("span",{class:"text-sm font-medium text-charcoal-900"},"Add Interest",-1))])])])),t.selectedAction&&t.selectedAction==="dispatch"?(d(),m("div",da,[o("button",{onClick:e[7]||(e[7]=s=>t.selectedAction=""),class:"flex items-center text-charcoal-600 hover:text-charcoal-800 transition-colors min-h-[44px] touch-manipulation"},[O(p,{class:"w-4 h-4 mr-2"}),e[46]||(e[46]=de(" Back to Action Selection ",-1))])])):M("",!0),t.selectedAction==="dispatch"?(d(),m("form",{key:2,onSubmit:e[29]||(e[29]=ct((...s)=>t.submitGiftIssue&&t.submitGiftIssue(...s),["prevent"])),class:"space-y-8"},[o("div",ua,[o("div",ma,[e[48]||(e[48]=o("h2",{class:"text-xl font-semibold text-charcoal-900"},"Person Details",-1)),o("button",{type:"button",onClick:e[8]||(e[8]=s=>t.showEmiratesIdScanner=!0),class:"flex items-center px-3 py-2 text-sm bg-charcoal-100 text-charcoal-700 rounded-lg hover:bg-charcoal-200 transition-colors"},[O(y,{class:"w-4 h-4 mr-2"}),e[47]||(e[47]=de(" Scan Emirates ID Document ",-1))])]),o("div",ha,[e[56]||(e[56]=o("h3",{class:"text-lg font-medium text-charcoal-800 mb-4 border-b border-charcoal-200 pb-2"},"Recipient Information",-1)),o("div",fa,[e[53]||(e[53]=o("label",{class:"block text-sm font-medium text-charcoal-700 mb-3"}," Choose how to add recipient information: ",-1)),o("div",ga,[o("button",{type:"button",onClick:e[9]||(e[9]=s=>t.recipientMode="existing"),class:$(["flex items-center justify-center p-4 border-2 rounded-xl transition-all duration-200 min-h-[64px] touch-manipulation relative overflow-hidden",t.recipientMode==="existing"?"border-blue-500 bg-blue-50 text-blue-900 shadow-md":"border-charcoal-200 hover:border-blue-300 hover:bg-blue-25 text-charcoal-700"])},[e[50]||(e[50]=Ee('<div class="flex items-center" data-v-d727f413><div class="mr-3 flex-shrink-0" data-v-d727f413><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-d727f413><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" data-v-d727f413></path></svg></div><div class="text-left" data-v-d727f413><div class="font-semibold" data-v-d727f413>Select Existing</div><div class="text-xs mt-1 opacity-75" data-v-d727f413>Choose from saved recipients</div></div></div>',1)),t.recipientMode==="existing"?(d(),m("div",va,[...e[49]||(e[49]=[o("svg",{class:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):M("",!0)],2),o("button",{type:"button",onClick:e[10]||(e[10]=s=>t.recipientMode="new"),class:$(["flex items-center justify-center p-4 border-2 rounded-xl transition-all duration-200 min-h-[64px] touch-manipulation relative overflow-hidden",t.recipientMode==="new"?"border-green-500 bg-green-50 text-green-900 shadow-md":"border-charcoal-200 hover:border-green-300 hover:bg-green-25 text-charcoal-700"])},[e[52]||(e[52]=Ee('<div class="flex items-center" data-v-d727f413><div class="mr-3 flex-shrink-0" data-v-d727f413><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-d727f413><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" data-v-d727f413></path></svg></div><div class="text-left" data-v-d727f413><div class="font-semibold" data-v-d727f413>Create New</div><div class="text-xs mt-1 opacity-75" data-v-d727f413>Add new recipient details</div></div></div>',1)),t.recipientMode==="new"?(d(),m("div",ba,[...e[51]||(e[51]=[o("svg",{class:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):M("",!0)],2)])]),t.recipientMode==="existing"?(d(),m("div",pa,[e[54]||(e[54]=o("label",{class:"block text-sm font-medium text-charcoal-700 mb-2"},[de(" Search and Select Recipient "),o("span",{class:"text-red-500"},"*")],-1)),o("div",ya,[ae(o("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>t.recipientSearch=s),onInput:e[12]||(e[12]=(...s)=>t.searchRecipients&&t.searchRecipients(...s)),onFocus:e[13]||(e[13]=s=>t.showRecipientDropdown=!0),type:"text",placeholder:"Search by name, mobile number, or Emirates ID...",class:$(["w-full px-4 py-3 border border-charcoal-300 rounded-lg text-charcoal-900 placeholder-charcoal-500 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent",{"border-red-500":t.errors.selectedRecipient&&t.recipientMode==="existing"}])},null,34),[[le,t.recipientSearch]]),t.selectedRecipient?(d(),m("button",{key:0,type:"button",onClick:e[14]||(e[14]=(...s)=>t.clearSelectedRecipient&&t.clearSelectedRecipient(...s)),class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-charcoal-400 hover:text-charcoal-600"},[O(f,{class:"w-5 h-5"})])):M("",!0),t.showRecipientDropdown&&t.searchResults.length>0&&!t.selectedRecipient?(d(),m("div",wa,[(d(!0),m(_e,null,xe(t.searchResults,s=>(d(),m("div",{key:s.name,onClick:v=>t.selectRecipient(s),class:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0"},[o("div",xa,A(s.owner_full_name),1),o("div",ka,"Coordinator: "+A(s.coordinator_full_name),1),o("div",Ca,A(s.coordinator_mobile_no),1)],8,_a))),128))])):M("",!0)]),t.selectedRecipient?(d(),m("div",Ia,[o("div",Ea,[o("div",null,[o("div",Sa,A(t.selectedRecipient.owner_full_name),1),o("div",Ra,"Coordinator: "+A(t.selectedRecipient.coordinator_full_name),1),o("div",Da,A(t.selectedRecipient.coordinator_mobile_no),1)]),o("button",{type:"button",onClick:e[15]||(e[15]=(...s)=>t.clearSelectedRecipient&&t.clearSelectedRecipient(...s)),class:"text-green-600 hover:text-green-800"},[O(f,{class:"w-5 h-5"})])])])):M("",!0),t.errors.selectedRecipient&&t.recipientMode==="existing"?(d(),m("p",Aa,A(t.errors.selectedRecipient),1)):M("",!0)])):M("",!0),t.recipientMode==="new"?(d(),m("div",Ma,[o("button",{type:"button",onClick:e[16]||(e[16]=s=>t.showCreateRecipientModal=!0),class:"w-full flex items-center justify-center px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-all duration-200"},[...e[55]||(e[55]=[o("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),de(" Click to Create New Recipient ",-1)])]),t.newlyCreatedRecipient?(d(),m("div",Pa,[o("div",La,[o("div",null,[o("div",Ta,A(t.newlyCreatedRecipient.owner_full_name),1),o("div",Oa,"Coordinator: "+A(t.newlyCreatedRecipient.coordinator_full_name),1),o("div",ja,A(t.newlyCreatedRecipient.coordinator_mobile_no),1)]),o("button",{type:"button",onClick:e[17]||(e[17]=(...s)=>t.editNewRecipient&&t.editNewRecipient(...s)),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," Edit ")])])):M("",!0),t.errors.newRecipient&&t.recipientMode==="new"?(d(),m("p",Fa,A(t.errors.newRecipient),1)):M("",!0)])):M("",!0)]),o("div",Na,[o("div",Ga,[e[58]||(e[58]=o("h3",{class:"text-lg font-medium text-charcoal-800 mb-4 border-b border-charcoal-200 pb-2"},"Owner Details",-1)),o("div",Ua,[o("div",null,[e[57]||(e[57]=o("label",{for:"owner_full_name",class:"block text-sm font-medium text-charcoal-700 mb-2"}," Owner Full Name * ",-1)),ae(o("input",{id:"owner_full_name","onUpdate:modelValue":e[18]||(e[18]=s=>t.form.owner_full_name=s),type:"text",required:"",readonly:!!t.selectedRecipient||!!t.newlyCreatedRecipient,class:$(["w-full px-3 py-2 border border-charcoal-300 rounded-lg text-charcoal-900 placeholder-charcoal-500 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent",{"bg-gray-50":!!t.selectedRecipient||!!t.newlyCreatedRecipient}]),placeholder:"Enter owner full name"},null,10,Ba),[[le,t.form.owner_full_name]]),t.errors.owner_full_name?(d(),m("p",za,A(t.errors.owner_full_name),1)):M("",!0)])])]),o("div",Va,[e[60]||(e[60]=o("h3",{class:"text-lg font-medium text-charcoal-800 mb-4 border-b border-charcoal-200 pb-2"},"Coordinator Details",-1)),o("div",Wa,[o("div",null,[e[59]||(e[59]=o("label",{for:"coordinator_full_name",class:"block text-sm font-medium text-charcoal-700 mb-2"}," Coordinator Full Name * ",-1)),ae(o("input",{id:"coordinator_full_name","onUpdate:modelValue":e[19]||(e[19]=s=>t.form.coordinator_full_name=s),type:"text",required:"",readonly:!!t.selectedRecipient||!!t.newlyCreatedRecipient,class:$(["w-full px-3 py-2 border border-charcoal-300 rounded-lg text-charcoal-900 placeholder-charcoal-500 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent",{"bg-gray-50":!!t.selectedRecipient||!!t.newlyCreatedRecipient}]),placeholder:"Enter coordinator full name"},null,10,Ha),[[le,t.form.coordinator_full_name]]),t.errors.coordinator_full_name?(d(),m("p",qa,A(t.errors.coordinator_full_name),1)):M("",!0)])])]),o("div",Ya,[e[63]||(e[63]=o("h3",{class:"text-lg font-medium text-charcoal-800 mb-4 border-b border-charcoal-200 pb-2"},"Contact Information",-1)),o("div",Ka,[o("div",null,[e[61]||(e[61]=o("label",{for:"mobile_number",class:"block text-sm font-medium text-charcoal-700 mb-2"}," Mobile Number * ",-1)),ae(o("input",{id:"mobile_number","onUpdate:modelValue":e[20]||(e[20]=s=>t.form.mobile_number=s),type:"tel",required:"",readonly:!!t.selectedRecipient||!!t.newlyCreatedRecipient,class:$(["w-full px-3 py-2 border border-charcoal-300 rounded-lg text-charcoal-900 placeholder-charcoal-500 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent",{"bg-gray-50":!!t.selectedRecipient||!!t.newlyCreatedRecipient}]),placeholder:"+971 50 123 4567"},null,10,Ja),[[le,t.form.mobile_number]]),t.errors.mobile_number?(d(),m("p",Xa,A(t.errors.mobile_number),1)):M("",!0)]),o("div",null,[e[62]||(e[62]=o("label",{for:"emirates_id",class:"block text-sm font-medium text-charcoal-700 mb-2"}," Emirates ID (Optional) ",-1)),ae(o("input",{id:"emirates_id","onUpdate:modelValue":e[21]||(e[21]=s=>t.form.emirates_id=s),type:"text",pattern:"[0-9]{3}-[0-9]{4}-[0-9]{7}-[0-9]{1}",readonly:!!t.selectedRecipient||!!t.newlyCreatedRecipient,class:$(["w-full px-3 py-2 border border-charcoal-300 rounded-lg text-charcoal-900 placeholder-charcoal-500 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent",{"bg-gray-50":!!t.selectedRecipient||!!t.newlyCreatedRecipient}]),placeholder:"784-1234-1234567-1"},null,10,Za),[[le,t.form.emirates_id]]),t.errors.emirates_id?(d(),m("p",Qa,A(t.errors.emirates_id),1)):M("",!0)])])]),o("div",$a,[e[65]||(e[65]=o("h3",{class:"text-lg font-medium text-charcoal-800 mb-4 border-b border-charcoal-200 pb-2"},"Additional Information",-1)),o("div",null,[e[64]||(e[64]=o("label",{for:"address",class:"block text-sm font-medium text-charcoal-700 mb-2"}," Address (Optional) ",-1)),ae(o("textarea",{id:"address","onUpdate:modelValue":e[22]||(e[22]=s=>t.form.address=s),rows:"3",readonly:!!t.selectedRecipient||!!t.newlyCreatedRecipient,class:$(["w-full px-3 py-2 border border-charcoal-300 rounded-lg text-charcoal-900 placeholder-charcoal-500 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent resize-vertical",{"bg-gray-50":!!t.selectedRecipient||!!t.newlyCreatedRecipient}]),placeholder:"Enter full address"},null,10,en),[[le,t.form.address]]),t.errors.address?(d(),m("p",tn,A(t.errors.address),1)):M("",!0)])])])]),o("div",on,[e[68]||(e[68]=o("h2",{class:"text-xl font-semibold text-charcoal-900 mb-6"},"Person Photo",-1)),o("div",rn,[t.capturedPhoto||t.form.person_photo?(d(),m("div",an,[o("img",{src:t.capturedPhoto||t.form.person_photo,alt:"Person photo",class:"w-32 h-32 rounded-lg object-cover border-2 border-charcoal-200"},null,8,nn),o("button",{type:"button",onClick:e[23]||(e[23]=(...s)=>t.clearPhoto&&t.clearPhoto(...s)),class:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors"},[O(f,{class:"w-4 h-4"})])])):(d(),m("div",sn,[O(Y,{class:"w-8 h-8 text-charcoal-400"})]))]),o("div",ln,[o("button",{type:"button",onClick:e[24]||(e[24]=(...s)=>t.openCamera&&t.openCamera(...s)),class:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors"},[O(Y,{class:"w-4 h-4 mr-2"}),e[66]||(e[66]=de(" Take Photo ",-1))]),o("button",{type:"button",onClick:e[25]||(e[25]=(...s)=>t.openGallery&&t.openGallery(...s)),class:"flex items-center px-4 py-2 bg-charcoal-600 text-white rounded-lg hover:bg-charcoal-700 transition-colors"},[O(W,{class:"w-4 h-4 mr-2"}),e[67]||(e[67]=de(" Choose from Gallery ",-1))])]),o("input",{ref:"galleryInput",type:"file",accept:"image/*",class:"hidden",onChange:e[26]||(e[26]=(...s)=>t.handleGalleryPhoto&&t.handleGalleryPhoto(...s))},null,544)]),o("div",cn,[o("div",dn,[e[70]||(e[70]=o("h2",{class:"text-xl font-semibold text-charcoal-900"},"Other Documents",-1)),o("button",{type:"button",onClick:e[27]||(e[27]=(...s)=>t.addDocument&&t.addDocument(...s)),class:"flex items-center px-3 py-2 text-sm bg-charcoal-100 text-charcoal-700 rounded-lg hover:bg-charcoal-200 transition-colors"},[O(I,{class:"w-4 h-4 mr-2"}),e[69]||(e[69]=de(" Add Document ",-1))])]),t.form.documents&&t.form.documents.length>0?(d(),m("div",un,[(d(!0),m(_e,null,xe(t.form.documents,(s,v)=>(d(),m("div",{key:v,class:"border border-charcoal-200 rounded-lg p-4"},[o("div",mn,[o("div",hn,[e[72]||(e[72]=o("label",{class:"block text-sm font-medium text-charcoal-700 mb-2"}," Document Type * ",-1)),ae(o("select",{"onUpdate:modelValue":J=>s.document_type=J,class:"w-full px-3 py-2 border border-charcoal-300 rounded-lg text-charcoal-900 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent",required:""},[...e[71]||(e[71]=[Ee('<option value="" data-v-d727f413>Select type</option><option value="Emirates ID Front" data-v-d727f413>Emirates ID Front</option><option value="Emirates ID Back" data-v-d727f413>Emirates ID Back</option><option value="Passport" data-v-d727f413>Passport</option><option value="Visa" data-v-d727f413>Visa</option><option value="Employment Letter" data-v-d727f413>Employment Letter</option><option value="Others" data-v-d727f413>Others</option>',7)])],8,fn),[[dt,s.document_type]])]),o("div",gn,[e[73]||(e[73]=o("label",{class:"block text-sm font-medium text-charcoal-700 mb-2"}," Document File * ",-1)),o("div",vn,[o("input",{type:"file",id:`document_file_${v}`,ref_for:!0,ref:`documentInput_${v}`,accept:"image/*,.pdf,.doc,.docx",class:"hidden",onChange:J=>t.handleDocumentUpload(J,v)},null,40,bn),o("button",{type:"button",onClick:J=>r.$refs[`documentInput_${v}`][0].click(),class:"w-full px-3 py-2 border border-charcoal-300 rounded-lg text-charcoal-700 bg-white hover:bg-charcoal-50 transition-colors"},A(s.document_attachment?"Change File":"Choose File"),9,pn)]),s.document_attachment?(d(),m("p",yn," File uploaded successfully ")):M("",!0)]),o("div",wn,[e[74]||(e[74]=o("label",{class:"block text-sm font-medium text-charcoal-700 mb-2"}," Description ",-1)),ae(o("input",{"onUpdate:modelValue":J=>s.description=J,type:"text",class:"w-full px-3 py-2 border border-charcoal-300 rounded-lg text-charcoal-900 placeholder-charcoal-500 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent",placeholder:"Optional description"},null,8,_n),[[le,s.description]])]),o("div",xn,[o("button",{type:"button",onClick:J=>t.removeDocument(v),class:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",title:"Remove Document"},[O(V,{class:"w-5 h-5"})],8,kn)])]),s.document_attachment?(d(),m("div",Cn,[o("div",In,[o("div",En,[O(y,{class:"w-8 h-8 text-blue-500"})]),o("div",Sn,[o("p",Rn,A(s.fileName||"Document"),1),o("p",Dn,A(s.document_type||"Document type not specified"),1)]),o("div",An,[o("button",{type:"button",onClick:J=>t.viewDocument(s),class:"px-3 py-1 text-xs bg-charcoal-100 text-charcoal-700 rounded-md hover:bg-charcoal-200 transition-colors"}," View ",8,Mn)])])])):M("",!0)]))),128))])):(d(),m("div",Pn,[O(y,{class:"w-12 h-12 mx-auto text-charcoal-400 mb-4"}),e[75]||(e[75]=o("p",{class:"text-charcoal-600 mb-4"},"No documents added yet",-1)),o("button",{type:"button",onClick:e[28]||(e[28]=(...s)=>t.addDocument&&t.addDocument(...s)),class:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors"}," Add First Document ")]))]),o("div",Ln,[o("button",{type:"submit",disabled:t.submitting,class:"w-full sm:w-auto px-8 py-3 border border-transparent text-sm font-medium rounded-lg text-white bg-gray-600 hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[t.submitting?(d(),m("span",On,[O(C,{class:"w-4 h-4 mr-2 animate-spin"}),e[76]||(e[76]=de(" Issuing Gift... ",-1))])):(d(),m("span",jn,"Dispatch Gift"))],8,Tn)])],32)):M("",!0)])),O(D,{show:t.showCreateRecipientModal,"edit-data":t.newlyCreatedRecipient,onClose:e[30]||(e[30]=s=>t.showCreateRecipientModal=!1),onCreated:t.handleRecipientCreated},null,8,["show","edit-data","onCreated"]),t.showSuccessModal?(d(),ve(P,{key:3,onClose:t.handleSuccessModalClose,onIssueAnother:t.handleIssueAnother},null,8,["onClose","onIssueAnother"])):M("",!0),t.showCamera?(d(),ve(B,{key:4,onClose:e[31]||(e[31]=s=>t.showCamera=!1),onPhotoCaptured:t.handleCapturedPhoto},null,8,["onPhotoCaptured"])):M("",!0),t.showEmiratesIdScanner?(d(),ve(K,{key:5,onClose:e[32]||(e[32]=s=>t.showEmiratesIdScanner=!1),onDataExtracted:t.handleEmiratesIdData},null,8,["onDataExtracted"])):M("",!0),O(H,{show:t.showAddInterest,"gift-id":t.gift.name||t.route.params.id,onClose:t.handleInterestClose,onSuccess:t.handleInterestSuccess},null,8,["show","gift-id","onClose","onSuccess"]),t.showAdditionalDetails?(d(),m("div",Fn,[o("div",Nn,[o("div",Gn,[e[77]||(e[77]=o("h3",{class:"text-lg font-semibold text-charcoal-900"}," Additional Gift Details ",-1)),o("button",{onClick:e[33]||(e[33]=s=>t.showAdditionalDetails=!1),class:"p-2 text-charcoal-500 hover:text-charcoal-700 rounded-lg hover:bg-charcoal-100 transition-colors"},[O(f,{class:"w-5 h-5"})])]),o("div",Un,[t.gift.images&&t.gift.images.length>1?(d(),m("div",Bn,[e[78]||(e[78]=o("h4",{class:"font-medium text-charcoal-900 mb-3"},"Gift Images",-1)),o("div",zn,[(d(!0),m(_e,null,xe(t.gift.images,(s,v)=>(d(),m("div",{key:v,class:"aspect-square rounded-lg overflow-hidden bg-charcoal-100"},[o("img",{src:s.image,alt:`Gift image ${v+1}`,class:"w-full h-full object-cover"},null,8,Vn)]))),128))])])):M("",!0),t.gift.additional_attributes&&t.gift.additional_attributes.length>0?(d(),m("div",Wn,[e[79]||(e[79]=o("h4",{class:"font-medium text-charcoal-900 mb-3"},"Additional Attributes",-1)),o("div",Hn,[o("table",qn,[o("tbody",null,[(d(!0),m(_e,null,xe(t.gift.additional_attributes,s=>(d(),m("tr",{key:s.attribute_name,class:"border-b border-charcoal-200 last:border-b-0"},[o("td",Yn,A(s.attribute_name),1),o("td",Kn,A(s.attribute_value),1)]))),128))])])])])):M("",!0),o("div",null,[e[83]||(e[83]=o("h4",{class:"font-medium text-charcoal-900 mb-3"},"Gift Information",-1)),o("div",Jn,[o("table",Xn,[o("tbody",null,[o("tr",Zn,[e[80]||(e[80]=o("td",{class:"py-3 text-sm font-medium text-charcoal-600 w-1/3"},"Created",-1)),o("td",Qn,A(t.formatDate(t.gift.creation)),1)]),o("tr",$n,[e[81]||(e[81]=o("td",{class:"py-3 text-sm font-medium text-charcoal-600 w-1/3"},"Last Modified",-1)),o("td",es,A(t.formatDate(t.gift.modified)),1)]),o("tr",null,[e[82]||(e[82]=o("td",{class:"py-3 text-sm font-medium text-charcoal-600 w-1/3"},"Created By",-1)),o("td",ts,A(t.gift.owner),1)])])])])])]),o("div",os,[o("button",{onClick:e[34]||(e[34]=s=>t.showAdditionalDetails=!1),class:"px-4 py-2 bg-charcoal-100 text-charcoal-700 rounded-lg hover:bg-charcoal-200 transition-colors"}," Close ")])])])):M("",!0)])}const ds=Ce(Mr,[["render",rs],["__scopeId","data-v-d727f413"]]);export{ds as default};
//# sourceMappingURL=GiftIssueFlow-LplEMUt0.js.map
