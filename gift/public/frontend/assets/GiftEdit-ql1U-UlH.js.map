{"version":3,"file":"GiftEdit-ql1U-UlH.js","sources":["../../../../frontend/src/views/gifts/GiftEdit.vue"],"sourcesContent":["<template>\n\t<div class=\"min-h-full bg-desert-sand-50\">\n\t\t<!-- Loading State -->\n\t\t<div v-if=\"loading && !gift.name\" class=\"flex items-center justify-center min-h-screen\">\n\t\t\t<div class=\"animate-pulse text-center\">\n\t\t\t\t<div class=\"w-.peer:checked~.peer-checked\\:bg-gray-600 {\n\tbackground-color: #4B5563;\n}h-16 bg-gray-100 rounded-xl mx-auto mb-4\"></div>\n\t\t\t\t<div class=\"h-4 bg-charcoal-200 rounded w-32 mx-auto mb-2\"></div>\n\t\t\t\t<div class=\"h-3 bg-charcoal-200 rounded w-24 mx-auto\"></div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Error State -->\n\t\t<div v-else-if=\"error\" class=\"flex items-center justify-center min-h-screen\">\n\t\t\t<div class=\"text-center\">\n\t\t\t\t<ExclamationTriangleIcon class=\"w-16 h-16 text-red-500 mx-auto mb-4\" />\n\t\t\t\t<h3 class=\"text-lg font-semibold text-charcoal-900 mb-2\">Gift Not Found</h3>\n\t\t\t\t<p class=\"text-charcoal-600 mb-4\">{{ error }}</p>\n\t\t\t\t<button @click=\"$router.push('/gifts')\"\n\t\t\t\t\tclass=\"inline-flex items-center px-4 py-2 border border-charcoal-300 text-sm font-medium rounded-lg text-charcoal-700 bg-white hover:bg-charcoal-50 transition-colors\">\n\t\t\t\t\t<ArrowLeftIcon class=\"w-4 h-4 mr-2\" />\n\t\t\t\t\tBack to Gifts\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Edit Form -->\n\t\t<div v-else class=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 safe-area-padding\">\n\t\t\t<!-- Back Button -->\n\t\t\t<div class=\"mb-6\">\n\t\t\t\t<button @click=\"$router.go(-1)\"\n\t\t\t\t\tclass=\"inline-flex items-center px-4 py-2 text-sm font-medium text-charcoal-600 hover:text-charcoal-900 transition-colors\">\n\t\t\t\t\t<ArrowLeftIcon class=\"w-4 h-4 mr-2\" />\n\t\t\t\t\tBack\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<GiftForm ref=\"giftFormRef\" :initial-data=\"gift\" :is-edit-mode=\"true\" :gift-status=\"gift.status\"\n\t\t\t\t@submit=\"updateGift\" />\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { ref, reactive, onMounted } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport { useNotifications } from '@composables/useNotifications'\nimport { GiftAPI } from '@services/api'\nimport GiftForm from '@/components/GiftForm.vue'\n\n// Icons\nimport {\n\tArrowLeftIcon,\n\tArrowPathIcon,\n\tExclamationTriangleIcon\n} from '@heroicons/vue/24/outline'\n\nexport default {\n\tname: 'GiftEdit',\n\tcomponents: {\n\t\tArrowLeftIcon,\n\t\tArrowPathIcon,\n\t\tExclamationTriangleIcon,\n\t\tGiftForm\n\t},\n\tsetup() {\n\t\tconst router = useRouter()\n\t\tconst route = useRoute()\n\t\tconst { showNotification } = useNotifications()\n\n\t\t// State\n\t\tconst loading = ref(false)\n\t\tconst error = ref(null)\n\t\tconst giftFormRef = ref(null)\n\n\t\tconst gift = reactive({})\n\n\t\t// Methods\n\t\tconst loadGift = async () => {\n\t\t\ttry {\n\t\t\t\tloading.value = true\n\t\t\t\terror.value = null\n\t\t\t\tconst giftId = route.params.id\n\n\t\t\t\tconst response = await GiftAPI.get(giftId)\n\n\t\t\t\tif (response.success) {\n\t\t\t\t\tObject.assign(gift, response.data)\n\t\t\t\t} else {\n\t\t\t\t\terror.value = response.error || 'Failed to load gift details'\n\t\t\t\t}\n\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error('Failed to load gift:', err)\n\t\t\t\terror.value = 'Failed to load gift details. Please try again.'\n\t\t\t} finally {\n\t\t\t\tloading.value = false\n\t\t\t}\n\t\t}\n\n\t\tconst updateGift = async (formData) => {\n\t\t\ttry {\n\t\t\t\tloading.value = true\n\n\t\t\t\tconst response = await GiftAPI.update(gift.name, {\n\t\t\t\t\t...formData,\n\t\t\t\t\tgender: formData.gender,\n\t\t\t\t\tdocstatus: gift.docstatus\n\t\t\t\t})\n\n\t\t\t\tif (response.success) {\n\t\t\t\t\tshowNotification('Gift updated successfully', 'success')\n\t\t\t\t\trouter.push(`/gifts/${gift.name}`)\n\t\t\t\t} else {\n\t\t\t\t\tshowNotification(response.error || 'Failed to update gift', 'error')\n\t\t\t\t}\n\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Failed to update gift:', error)\n\t\t\t\tshowNotification('Failed to update gift. Please try again.', 'error')\n\t\t\t} finally {\n\t\t\t\tloading.value = false\n\t\t\t\tif (giftFormRef.value) {\n\t\t\t\t\tgiftFormRef.value.resetSaving()\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst updateStatus = async (newStatus) => {\n\t\t\ttry {\n\t\t\t\tloading.value = true\n\n\t\t\t\t// TODO: Replace with actual API call\n\t\t\t\t// await giftApi.updateGiftStatus(gift.name, newStatus)\n\n\t\t\t\t// Mock success\n\t\t\t\tawait new Promise(resolve => setTimeout(resolve, 1000))\n\n\t\t\t\tgift.status = newStatus\n\t\t\t\tshowNotification(`Gift ${newStatus === 'expired' ? 'marked as expired' : 'cancelled'}`, 'success')\n\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Failed to update status:', error)\n\t\t\t\tshowNotification('Failed to update gift status', 'error')\n\t\t\t} finally {\n\t\t\t\tloading.value = false\n\t\t\t}\n\t\t}\n\n\t\t// Utility functions\n\t\tconst getStatusClasses = (status) => {\n\t\t\tconst classes = {\n\t\t\t\tavailable: 'bg-gray-100 text-gray-800',\n\t\t\t\tissued: 'bg-blue-100 text-blue-800',\n\t\t\t\texpired: 'bg-red-100 text-red-800',\n\t\t\t\tcancelled: 'bg-charcoal-100 text-charcoal-800',\n\t\t\t\tredeemed: 'bg-purple-100 text-purple-800'\n\t\t\t}\n\t\t\treturn classes[status] || classes.available\n\t\t}\n\n\t\tconst getStatusText = (status) => {\n\t\t\tconst texts = {\n\t\t\t\tavailable: 'Available',\n\t\t\t\tissued: 'Issued',\n\t\t\t\texpired: 'Expired',\n\t\t\t\tcancelled: 'Cancelled',\n\t\t\t\tredeemed: 'Redeemed'\n\t\t\t}\n\t\t\treturn texts[status] || 'Available'\n\t\t}\n\n\t\t// Lifecycle\n\t\tonMounted(() => {\n\t\t\tloadGift()\n\t\t})\n\n\t\treturn {\n\t\t\tloading,\n\t\t\terror,\n\t\t\tgift,\n\t\t\tgiftFormRef,\n\t\t\tupdateGift,\n\t\t\tupdateStatus,\n\t\t\tgetStatusClasses,\n\t\t\tgetStatusText\n\t\t}\n\t}\n}\n</script>\n\n<style scoped>\n/* Form styling */\ninput:focus,\nselect:focus,\ntextarea:focus {\n\toutline: none !important;\n\tborder-color: #10b981;\n\tbox-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);\n}\n\n/* Loading animation */\n@keyframes pulse {\n\n\t0%,\n\t100% {\n\t\topacity: 1;\n\t}\n\n\t50% {\n\t\topacity: 0.5;\n\t}\n}\n\n@keyframes spin {\n\tto {\n\t\ttransform: rotate(360deg);\n\t}\n}\n\n.animate-pulse {\n\tanimation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n}\n\n.animate-spin {\n\tanimation: spin 1s linear infinite;\n}\n\n/* Toggle switch styling */\n.peer:checked~.peer-checked\\:bg-gray-600 {\n\tbackground-color: #10b981;\n}\n\n.peer:focus~.peer-focus\\:ring-emerald-300 {\n\tbox-shadow: 0 0 0 4px rgba(16, 185, 129, 0.3);\n}\n\n/* Transitions */\n.transition-colors {\n\ttransition-property: color, background-color, border-color;\n\ttransition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n\ttransition-duration: 200ms;\n}\n\n/* Disabled state */\ninput:disabled,\nselect:disabled,\ntextarea:disabled {\n\tbackground-color: #f9fafb;\n\tcursor: not-allowed;\n}\n\nbutton:disabled {\n\topacity: 0.5;\n\tcursor: not-allowed;\n}\n\n/* Accessibility */\n@media (prefers-reduced-motion: reduce) {\n\n\t.animate-pulse,\n\t.animate-spin {\n\t\tanimation: none !important;\n\t}\n\n\t.transition-colors {\n\t\ttransition: none !important;\n\t}\n}\n\n/* High contrast mode */\n@media (prefers-contrast: high) {\n\t.shadow-card {\n\t\tborder: 1px solid #374151;\n\t}\n\n\tinput,\n\tselect,\n\ttextarea {\n\t\tborder-width: 2px;\n\t}\n}\n</style>\n"],"names":["_sfc_main","ArrowLeftIcon","ArrowPathIcon","ExclamationTriangleIcon","GiftForm","router","useRouter","route","useRoute","showNotification","useNotifications","loading","ref","error","giftFormRef","gift","reactive","loadGift","__async","giftId","response","GiftAPI","err","updateGift","formData","__spreadProps","__spreadValues","updateStatus","newStatus","resolve","getStatusClasses","status","classes","getStatusText","onMounted","_hoisted_1","_hoisted_4","_hoisted_5","_hoisted_7","_openBlock","_createElementBlock","$setup","_hoisted_2","_cache","_createElementVNode","_hoisted_3","_createVNode","_component_ExclamationTriangleIcon","_toDisplayString","$event","_ctx","_component_ArrowLeftIcon","_hoisted_6","_component_GiftForm"],"mappings":"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"}