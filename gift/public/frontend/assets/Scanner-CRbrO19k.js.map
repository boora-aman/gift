{"version":3,"mappings":"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","names":["_sfc_main","BarcodeFormat","props","emit","state","reactive","scannerContainer","ref","videoElement","canvasElement","codeReader","currentStream","availableCameras","currentDeviceId","scanLinePosition","isMobileDevice","isSecureContext","animateScanLine","handleError","error","message","enumerateCameras","__async","device","backCamera","camera","checkTorchSupport","videoTrack","capabilities","initializeScanner","nextTick","BrowserMultiFormatReader","startScanning","constraints","result","drawDetection","canvas","video","ctx","resultPoints","point","index","x","y","stopScanning","switchCamera","targetCamera","label","toggleTorch","handleManualInput","handleTapToFocus","retryInitialization","cleanup","track","onMounted","onUnmounted","_hoisted_1","_hoisted_3","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_openBlock","_createElementBlock","$setup","_hoisted_2","_createElementVNode","_cache","_hoisted_4","_hoisted_5","_toDisplayString","args","_normalizeClass","_hoisted_9","_hoisted_10","ArrowLeftIcon","ExclamationTriangleIcon","BarcodeScanner","ZXingBarcodeScanner","router","useRouter","showNotification","useNotifications","showManualInput","manualCode","manualInput","showErrorModal","errorMessage","processingManual","scannerErrorCount","useZXingScanner","currentScannerComponent","computed","originalBodyOverflow","originalHtmlOverflow","supportedFormats","handleScanResult","code","format","processScannedCode","handleScanError","_a","giftCode","url","e","GiftAPI","n","giftResult","gift","issuedTo","issuedDate","apiError","errorMsg","processManualCode","closeManualInput","text","$event","_ctx","_createVNode","_component_ArrowLeftIcon","_createBlock","_resolveDynamicComponent","_component_ExclamationTriangleIcon"],"ignoreList":[],"sources":["../../../../frontend/src/components/scanner/ZXingBarcodeScanner.vue","../../../../frontend/src/views/Scanner.vue"],"sourcesContent":["<template>\n  <div class=\"scanner-main-container\">\n    <!-- Loading State -->\n    <div\n      v-if=\"state.isInitializing\"\n      class=\"absolute inset-0 bg-black flex items-center justify-center z-20\"\n    >\n      <div class=\"text-center text-white px-4\">\n        <div class=\"w-8 h-8 border-2 border-white border-t-transparent rounded-full animate-spin mx-auto mb-3\"></div>\n        <p class=\"text-sm\">Initializing camera...</p>\n        <p v-if=\"isMobileDevice\" class=\"text-xs text-gray-300 mt-2\">\n          ZXing scanner - optimized for mobile devices\n        </p>\n      </div>\n    </div>\n\n    <!-- Error State -->\n    <div\n      v-if=\"state.hasError\"\n      class=\"absolute inset-0 bg-black flex items-center justify-center z-20\"\n    >\n      <div class=\"text-center text-white p-4 max-w-sm mx-auto\">\n        <div class=\"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4\">\n          <svg class=\"w-8 h-8 text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 15.5c-.77.833.192 2.5 1.732 2.5z\" />\n          </svg>\n        </div>\n\n        <h3 class=\"text-lg font-semibold mb-2\">Scanner Error</h3>\n        <p class=\"text-sm text-gray-300 mb-4\">{{ state.errorMessage }}</p>\n\n        <div class=\"space-y-2\">\n          <button\n            @click=\"retryInitialization\"\n            class=\"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            Try Again\n          </button>\n          <button\n            @click=\"handleManualInput\"\n            class=\"w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors\"\n          >\n            Enter Manually\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- Main Scanner UI -->\n    <div\n      v-if=\"!state.isInitializing && !state.hasError\"\n      class=\"relative w-full h-full scanner-container\"\n      :class=\"{ 'front-camera': state.isFrontCamera }\"\n      ref=\"scannerContainer\"\n    >\n      <!-- Video Element -->\n      <video\n        ref=\"videoElement\"\n        autoplay\n        playsinline\n        muted\n        class=\"w-full h-full object-cover\"\n      ></video>\n\n      <!-- Canvas for drawing detection -->\n      <canvas\n        ref=\"canvasElement\"\n        class=\"absolute inset-0 w-full h-full pointer-events-none\"\n        :style=\"{ zIndex: 10 }\"\n      ></canvas>\n\n      <!-- Top Controls -->\n      <div class=\"absolute top-0 left-0 right-0 bg-gradient-to-b from-black/60 to-transparent pointer-events-auto z-30\">\n        <div class=\"flex items-center justify-between p-4 safe-area-top\">\n          <div class=\"flex items-center space-x-2\">\n            <button\n              v-if=\"state.hasMultipleCameras\"\n              @click=\"switchCamera\"\n              class=\"p-2 rounded-lg bg-white/20 backdrop-blur-md text-white hover:bg-white/30 transition-colors\"\n            >\n              <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n              </svg>\n            </button>\n          </div>\n\n          <div class=\"flex items-center space-x-2\">\n            <button\n              v-if=\"state.hasTorch\"\n              @click=\"toggleTorch\"\n              class=\"p-2 rounded-lg bg-white/20 backdrop-blur-md text-white hover:bg-white/30 transition-colors\"\n              :class=\"{ 'bg-yellow-500/40': state.torchOn }\"\n            >\n              <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n              </svg>\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <!-- Center Scanning Frame -->\n      <div class=\"absolute inset-0 flex items-center justify-center pointer-events-none z-20\">\n        <div\n          class=\"relative w-80 h-52 sm:w-96 sm:h-60 md:w-[28rem] md:h-72 lg:w-[32rem] lg:h-80\"\n          @click=\"handleTapToFocus\"\n          :class=\"{ 'cursor-pointer': isMobileDevice && state.isScanning }\"\n        >\n          <!-- Corner brackets -->\n          <div class=\"absolute top-0 left-0 w-8 h-8 border-l-4 border-t-4 border-white rounded-tl-lg\"></div>\n          <div class=\"absolute top-0 right-0 w-8 h-8 border-r-4 border-t-4 border-white rounded-tr-lg\"></div>\n          <div class=\"absolute bottom-0 left-0 w-8 h-8 border-l-4 border-b-4 border-white rounded-bl-lg\"></div>\n          <div class=\"absolute bottom-0 right-0 w-8 h-8 border-r-4 border-b-4 border-white rounded-br-lg\"></div>\n\n          <!-- Scanning line animation -->\n          <div\n            v-if=\"state.isScanning\"\n            class=\"absolute left-0 right-0 h-0.5 bg-gradient-to-r from-transparent via-green-400 to-transparent animate-pulse\"\n            :style=\"{ top: scanLinePosition + '%' }\"\n          ></div>\n        </div>\n      </div>\n\n      <!-- Instructions -->\n      <div class=\"absolute bottom-20 left-0 right-0 text-center px-4 pointer-events-none z-20\">\n        <p class=\"text-white text-sm sm:text-base font-medium mb-2\">\n          {{ state.isScanning ? (isMobileDevice ? 'Hold barcode steady in the frame' : 'Position barcode within the frame') : 'Initializing scanner...' }}\n        </p>\n        <p class=\"text-white/70 text-xs sm:text-sm\">\n          ZXing Scanner - {{ isMobileDevice ? 'Mobile optimized' : 'Desktop mode' }}\n        </p>\n      </div>\n\n      <!-- Bottom Controls -->\n      <div class=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent pointer-events-auto z-30\">\n        <div class=\"flex items-center justify-center px-4 pt-6 pb-safe-bottom\">\n          <button\n            @click=\"handleManualInput\"\n            type=\"button\"\n            class=\"flex items-center space-x-3 px-8 py-4 bg-white/25 backdrop-blur-md text-white rounded-2xl hover:bg-white/35 active:bg-white/40 transition-all duration-200 border border-white/30 shadow-xl min-h-[56px] cursor-pointer touch-manipulation\"\n            style=\"margin-bottom: max(1rem, env(safe-area-inset-bottom)); position: relative; z-index: 100;\"\n          >\n            <svg class=\"w-6 h-6 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n            </svg>\n            <div class=\"flex flex-col items-start\">\n              <span class=\"text-base font-semibold leading-tight\">Enter Manually</span>\n              <span class=\"text-xs text-white/80 leading-tight\">Tap to type barcode</span>\n            </div>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, reactive, onMounted, onUnmounted, nextTick } from 'vue'\nimport { BrowserMultiFormatReader, BarcodeFormat } from '@zxing/browser'\n\nexport default {\n  name: 'ZXingBarcodeScanner',\n  props: {\n    formats: {\n      type: Array,\n      default: () => [\n        BarcodeFormat.CODE_128,\n        BarcodeFormat.EAN_13,\n        BarcodeFormat.EAN_8,\n        BarcodeFormat.CODE_39,\n        BarcodeFormat.QR_CODE,\n        BarcodeFormat.UPC_A,\n        BarcodeFormat.UPC_E\n      ]\n    }\n  },\n  emits: ['scan-result', 'error', 'manual-input'],\n  setup(props, { emit }) {\n    // Reactive state\n    const state = reactive({\n      isInitializing: false,\n      isInitialized: false,\n      isScanning: false,\n      hasError: false,\n      errorMessage: '',\n      hasMultipleCameras: false,\n      hasTorch: false,\n      torchOn: false,\n      isFrontCamera: false\n    })\n\n    // Template refs\n    const scannerContainer = ref(null)\n    const videoElement = ref(null)\n    const canvasElement = ref(null)\n\n    // ZXing scanner instance\n    let codeReader = null\n    let currentStream = null\n    let availableCameras = []\n    let currentDeviceId = null\n    let scanLinePosition = ref(10)\n\n    // Mobile device detection\n    const isMobileDevice = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||\n                          window.matchMedia('(max-width: 768px)').matches ||\n                          window.matchMedia('(pointer: coarse)').matches ||\n                          ('ontouchstart' in window)\n\n    // Check if we're running in a secure context\n    const isSecureContext = window.isSecureContext || location.protocol === 'https:' || location.hostname === 'localhost'\n\n    // Scanning line animation\n    const animateScanLine = () => {\n      if (state.isScanning) {\n        scanLinePosition.value = scanLinePosition.value >= 90 ? 10 : scanLinePosition.value + 2\n        setTimeout(animateScanLine, 100)\n      }\n    }\n\n    // Error handling\n    const handleError = (error) => {\n      console.error('ZXingBarcodeScanner error:', error)\n    //   console.log('Browser info:', {\n    //     userAgent: navigator.userAgent,\n    //     mediaDevices: !!navigator.mediaDevices,\n    //     getUserMedia: !!navigator.mediaDevices?.getUserMedia,\n    //     isHTTPS: location.protocol === 'https:',\n    //     isPWA: window.matchMedia('(display-mode: standalone)').matches,\n    //     isSecureContext: isSecureContext\n    //   })\n\n      state.hasError = true\n      state.isInitialized = false\n      state.isScanning = false\n\n      let message = 'An error occurred with the scanner'\n\n      if (error.name === 'NotAllowedError' || error.message.includes('permission')) {\n        message = 'Camera permission denied. Please allow camera access and try again.'\n        if (isMobileDevice) {\n          message += ' On mobile, you may need to refresh the page and grant permission again.'\n        }\n      } else if (error.name === 'NotFoundError' || error.message.includes('No device')) {\n        message = 'No camera found on this device.'\n      } else if (error.name === 'NotReadableError' || error.message.includes('in use')) {\n        message = 'Camera is already in use by another application.'\n        if (isMobileDevice) {\n          message += ' Try closing other camera apps and refresh the page.'\n        }\n      } else if (error.message.includes('HTTPS')) {\n        message = error.message\n      } else if (error.message) {\n        message = error.message\n      }\n\n      state.errorMessage = message\n      emit('error', error)\n    }\n\n    // Enumerate available cameras\n    const enumerateCameras = async () => {\n      try {\n        if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {\n          return\n        }\n\n        const devices = await navigator.mediaDevices.enumerateDevices()\n        availableCameras = devices.filter(device => device.kind === 'videoinput')\n        state.hasMultipleCameras = availableCameras.length > 1\n\n        // Prefer back camera for barcode scanning\n        const backCamera = availableCameras.find(camera =>\n          camera.label.toLowerCase().includes('back') ||\n          camera.label.toLowerCase().includes('environment')\n        )\n\n        if (backCamera) {\n          currentDeviceId = backCamera.deviceId\n        } else if (availableCameras.length > 0) {\n          currentDeviceId = availableCameras[0].deviceId\n        }\n\n      } catch (error) {\n        console.warn('Could not enumerate cameras:', error)\n      }\n    }\n\n    // Check torch support\n    const checkTorchSupport = async () => {\n      try {\n        if (currentStream) {\n          const videoTrack = currentStream.getVideoTracks()[0]\n          if (videoTrack && videoTrack.getCapabilities) {\n            const capabilities = videoTrack.getCapabilities()\n            state.hasTorch = !!(capabilities && capabilities.torch)\n          }\n        }\n      } catch (error) {\n        console.warn('Could not check torch support:', error)\n      }\n    }\n\n    // Initialize scanner\n    const initializeScanner = async () => {\n      if (state.isInitializing) return\n\n      try {\n        state.isInitializing = true\n        state.hasError = false\n        state.errorMessage = ''\n\n        // Check for camera support\n        if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n          throw new Error('Camera not supported on this device')\n        }\n\n        // Check for secure context on mobile PWA\n        if (isMobileDevice && !isSecureContext) {\n          throw new Error('Camera access requires HTTPS on mobile devices. Please access the site via HTTPS.')\n        }\n\n        // Enumerate cameras\n        await enumerateCameras()\n\n        // Wait for DOM\n        await nextTick()\n\n        if (!videoElement.value) {\n          throw new Error('Video element not found')\n        }\n\n        // Initialize ZXing code reader\n        codeReader = new BrowserMultiFormatReader(null, {\n          tryHarder: true,\n          formats: props.formats\n        })\n\n        // Start scanning\n        await startScanning()\n\n        // Mark as initialized\n        state.isInitialized = true\n\n        // Check for torch support\n        setTimeout(() => {\n          checkTorchSupport()\n        }, 1000)\n\n      } catch (error) {\n        console.error('Scanner initialization failed:', error)\n        handleError(error)\n      } finally {\n        state.isInitializing = false\n      }\n    }\n\n    // Start scanning\n    const startScanning = async () => {\n      if (state.isScanning || state.hasError || !codeReader) {\n        return\n      }\n\n      try {\n        const constraints = {\n          video: {\n            facingMode: state.isFrontCamera ? 'user' : 'environment'\n          }\n        }\n\n        if (currentDeviceId) {\n          constraints.video.deviceId = { exact: currentDeviceId }\n        }\n\n        // Start decoding from video device\n        await codeReader.decodeFromVideoDevice(\n          currentDeviceId || undefined,\n          videoElement.value,\n          (result, error) => {\n            if (result) {\n            //   console.log('Barcode detected with ZXing:', {\n            //     text: result.getText(),\n            //     format: result.getBarcodeFormat()\n            //   })\n\n              // Draw detection indicator\n              drawDetection(result)\n\n              // Emit result\n              emit('scan-result', {\n                code: result.getText(),\n                format: result.getBarcodeFormat(),\n                rawResult: result\n              })\n            }\n\n            if (error && error.name !== 'NotFoundException') {\n              console.warn('ZXing scan error:', error)\n            }\n          }\n        )\n\n        // Get the video stream for torch support\n        currentStream = videoElement.value.srcObject\n\n        state.isScanning = true\n        state.errorMessage = ''\n\n        // Start scan line animation\n        animateScanLine()\n\n        // console.log('ZXing scanning started successfully')\n\n      } catch (error) {\n        console.error('Failed to start ZXing scanning:', error)\n        handleError(error)\n      }\n    }\n\n    // Draw detection indicator\n    const drawDetection = (result) => {\n      try {\n        if (!canvasElement.value || !videoElement.value) return\n\n        const canvas = canvasElement.value\n        const video = videoElement.value\n\n        // Set canvas size to match video\n        canvas.width = video.videoWidth\n        canvas.height = video.videoHeight\n\n        const ctx = canvas.getContext('2d')\n        ctx.clearRect(0, 0, canvas.width, canvas.height)\n\n        // Draw detection points if available\n        const resultPoints = result.getResultPoints()\n        if (resultPoints && resultPoints.length > 0) {\n          ctx.strokeStyle = '#00FF00'\n          ctx.lineWidth = 3\n          ctx.beginPath()\n\n          resultPoints.forEach((point, index) => {\n            const x = point.getX()\n            const y = point.getY()\n\n            if (index === 0) {\n              ctx.moveTo(x, y)\n            } else {\n              ctx.lineTo(x, y)\n            }\n          })\n\n          ctx.closePath()\n          ctx.stroke()\n        }\n\n        // Clear after a delay\n        setTimeout(() => {\n          ctx.clearRect(0, 0, canvas.width, canvas.height)\n        }, 1000)\n\n      } catch (error) {\n        console.warn('Error drawing detection:', error)\n      }\n    }\n\n    // Stop scanning\n    const stopScanning = () => {\n      if (!state.isScanning) return\n\n      try {\n        if (codeReader) {\n          codeReader.reset()\n        }\n        state.isScanning = false\n      } catch (error) {\n        console.error('Failed to stop scanning:', error)\n      }\n    }\n\n    // Switch camera\n    const switchCamera = async () => {\n      if (state.isInitializing || !state.hasMultipleCameras || !state.isInitialized) return\n\n      try {\n        stopScanning()\n        state.isFrontCamera = !state.isFrontCamera\n\n        // Find appropriate camera\n        const targetCamera = availableCameras.find(camera => {\n          const label = camera.label.toLowerCase()\n          if (state.isFrontCamera) {\n            return label.includes('front') || label.includes('user')\n          } else {\n            return label.includes('back') || label.includes('environment')\n          }\n        })\n\n        if (targetCamera) {\n          currentDeviceId = targetCamera.deviceId\n        }\n\n        // Restart with new camera\n        await startScanning()\n\n      } catch (error) {\n        console.error('Failed to switch camera:', error)\n        handleError(error)\n      }\n    }\n\n    // Toggle torch\n    const toggleTorch = async () => {\n      if (!state.hasTorch || !currentStream) return\n\n      try {\n        const videoTrack = currentStream.getVideoTracks()[0]\n        await videoTrack.applyConstraints({\n          advanced: [{ torch: !state.torchOn }]\n        })\n        state.torchOn = !state.torchOn\n      } catch (error) {\n        console.error('Failed to toggle torch:', error)\n      }\n    }\n\n    // Handle manual input\n    const handleManualInput = () => {\n      emit('manual-input')\n    }\n\n    // Handle tap to focus for mobile\n    const handleTapToFocus = async () => {\n      if (!isMobileDevice || !state.isScanning || !currentStream) return\n\n      try {\n        const videoTrack = currentStream.getVideoTracks()[0]\n        await videoTrack.applyConstraints({\n          advanced: [{ focusMode: 'continuous' }]\n        })\n        // console.log('Mobile focus applied')\n      } catch (error) {\n        console.warn('Could not apply focus:', error)\n      }\n    }\n\n    // Retry initialization\n    const retryInitialization = () => {\n      state.hasError = false\n      state.errorMessage = ''\n      initializeScanner()\n    }\n\n    // Cleanup\n    const cleanup = () => {\n      try {\n        stopScanning()\n\n        if (codeReader) {\n          codeReader.reset()\n        }\n\n        if (currentStream) {\n          currentStream.getTracks().forEach(track => track.stop())\n        }\n\n        state.isScanning = false\n        state.isInitialized = false\n        currentStream = null\n\n      } catch (error) {\n        console.error('Cleanup error:', error)\n      }\n    }\n\n    // Lifecycle\n    onMounted(() => {\n      initializeScanner()\n    })\n\n    onUnmounted(() => {\n      cleanup()\n    })\n\n    return {\n      // Template refs\n      scannerContainer,\n      videoElement,\n      canvasElement,\n\n      // State\n      state,\n      scanLinePosition,\n      isMobileDevice,\n\n      // Methods\n      switchCamera,\n      toggleTorch,\n      handleManualInput,\n      handleTapToFocus,\n      retryInitialization\n    }\n  }\n}\n</script>\n\n<style scoped>\n/* Main container fills entire viewport */\n.scanner-main-container {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  background: black;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n\n/* Ensure video covers the entire container */\nvideo {\n  width: 100% !important;\n  height: 100% !important;\n  object-fit: cover !important;\n  position: absolute !important;\n  top: 0 !important;\n  left: 0 !important;\n  right: 0 !important;\n  bottom: 0 !important;\n  z-index: 1 !important;\n}\n\n/* Canvas overlay */\ncanvas {\n  width: 100% !important;\n  height: 100% !important;\n  object-fit: cover !important;\n  position: absolute !important;\n  top: 0 !important;\n  left: 0 !important;\n  right: 0 !important;\n  bottom: 0 !important;\n  z-index: 5 !important;\n  pointer-events: none !important;\n}\n\n/* Safe area support for mobile devices */\n.safe-area-top {\n  padding-top: max(1rem, env(safe-area-inset-top));\n}\n\n.pb-safe-bottom {\n  padding-bottom: max(2.5rem, calc(env(safe-area-inset-bottom) + 1.5rem));\n}\n\n/* Mobile optimizations */\n@media (max-width: 640px) {\n  .pb-safe-bottom {\n    padding-bottom: max(3rem, calc(env(safe-area-inset-bottom) + 2rem));\n  }\n\n  button {\n    font-size: 16px !important; /* Prevent zoom on iOS */\n    user-select: none;\n    -webkit-user-select: none;\n  }\n}\n\n/* PWA specific adjustments */\n@media (display-mode: standalone) {\n  .pb-safe-bottom {\n    padding-bottom: max(3.5rem, calc(env(safe-area-inset-bottom) + 2.5rem));\n  }\n}\n\n/* iOS specific fixes */\n@supports (-webkit-touch-callout: none) {\n  .scanner-main-container {\n    -webkit-user-select: none;\n    user-select: none;\n  }\n\n  video {\n    -webkit-appearance: none;\n    appearance: none;\n    border-radius: 0;\n  }\n}\n\n/* Android specific fixes */\n@media screen and (max-width: 768px) and (orientation: portrait) {\n  .scanner-main-container {\n    height: 100vh !important;\n    height: 100dvh !important;\n  }\n}\n\n/* Touch-friendly controls */\n@media (hover: none) and (pointer: coarse) {\n  button {\n    min-height: 56px !important;\n    min-width: 200px;\n    -webkit-tap-highlight-color: rgba(255, 255, 255, 0.1);\n  }\n\n  button:active {\n    transform: scale(0.98);\n    background-color: rgba(255, 255, 255, 0.4) !important;\n  }\n}\n</style>\n","<template>\n  <div class=\"scanner-page\">\n    <!-- Header Overlay -->\n    <div class=\"absolute top-0 left-0 right-0 z-30 bg-gradient-to-b from-charcoal-900/80 to-transparent\">\n      <div class=\"flex items-center justify-between p-4 sm:p-6 safe-area-top\">\n        <button\n          @click=\"$router.push('/')\"\n          class=\"p-2 rounded-lg text-white/90 hover:text-white hover:bg-charcoal-800/30 transition-colors\"\n        >\n          <ArrowLeftIcon class=\"w-6 h-6\" />\n        </button>\n\n        <h1 class=\"text-lg font-semibold text-white\">Scan Barcode</h1>\n\n        <div class=\"w-10 h-10\"></div>\n      </div>\n    </div>\n\n    <!-- Barcode Scanner Component -->\n        <!-- Barcode Scanner Component -->\n    <component\n      :is=\"currentScannerComponent\"\n      @scan-result=\"handleScanResult\"\n      @error=\"handleScanError\"\n      @manual-input=\"handleManualInput\"\n      :formats=\"supportedFormats\"\n      :frequency=\"20\"\n      :debug=\"false\"\n      :locate=\"true\"\n    />\n\n    <!-- Manual Input Modal -->\n        <!-- Manual Input Modal -->\n    <div\n      v-if=\"showManualInput\"\n      class=\"manual-input-modal fixed inset-0 z-[10000] flex items-center justify-center p-4 bg-charcoal-900/80 backdrop-blur-sm safe-area-padding\"\n      @click.self=\"closeManualInput\"\n    >\n      <div class=\"bg-white rounded-2xl p-6 w-full max-w-md shadow-2xl transform transition-all duration-300 scale-100 mx-4\">\n        <!-- Modal Header -->\n        <div class=\"flex items-center justify-between mb-6\">\n          <h3 class=\"text-xl font-semibold text-charcoal-900\">\n            Barcode Manual Search\n          </h3>\n          <button\n            @click=\"closeManualInput\"\n            class=\"p-2 hover:bg-charcoal-50 rounded-lg transition-colors\"\n          >\n            <svg class=\"w-5 h-5 text-charcoal-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n\n        <!-- Instructions -->\n\n        <!-- Input Section -->\n        <div class=\"space-y-4\">\n          <div>\n            <label class=\"block text-sm font-medium text-charcoal-700 mb-2\">\n              Enter Barcode\n            </label>\n            <input\n              v-model=\"manualCode\"\n              type=\"text\"\n              placeholder=\"Enter or paste barcode here...\"\n              class=\"w-full px-4 py-3 border-2 border-charcoal-200 rounded-xl text-charcoal-900 placeholder-charcoal-400 focus:outline-none focus:ring-2 focus:ring-charcoal-500 focus:border-charcoal-500 transition-all duration-200 text-base\"\n              @keyup.enter=\"processManualCode\"\n              @input=\"manualCode = $event.target.value.trim()\"\n              ref=\"manualInput\"\n            />\n            <!-- Character counter -->\n            <div class=\"mt-2 text-xs text-charcoal-500\" v-if=\"manualCode\">\n              {{ manualCode.length }} characters\n            </div>\n          </div>\n\n          <!-- Action Buttons -->\n          <div class=\"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3 pt-2\">\n            <button\n              @click=\"processManualCode\"\n              :disabled=\"!manualCode.trim() || processingManual\"\n              class=\"flex-1 px-6 py-3 bg-charcoal-600 text-white rounded-xl hover:bg-charcoal-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed font-medium shadow-lg\"\n            >\n              <span v-if=\"!processingManual\">üîç Find Gift</span>\n              <span v-else>‚è≥ Searching...</span>\n            </button>\n            <button\n              @click=\"closeManualInput\"\n              class=\"flex-1 px-6 py-3 bg-charcoal-50 text-charcoal-700 rounded-xl hover:bg-charcoal-100 transition-all duration-200 font-medium\"\n            >\n              Cancel\n            </button>\n          </div>\n\n        </div>\n      </div>\n    </div>\n\n    <!-- Error State Modal -->\n    <div\n      v-if=\"showErrorModal\"\n      class=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-charcoal-900/90\"\n    >\n      <div class=\"bg-white rounded-xl p-6 w-full max-w-md text-center\">\n        <ExclamationTriangleIcon class=\"w-12 h-12 text-red-500 mx-auto mb-4\" />\n        <h3 class=\"text-lg font-semibold text-charcoal-900 mb-2\">\n          Scanner Error\n        </h3>\n        <p class=\"text-charcoal-600 mb-4\">\n          {{ errorMessage }}\n        </p>\n        <div class=\"flex space-x-3\">\n          <button\n            @click=\"retryScanner\"\n            class=\"flex-1 px-4 py-2 bg-charcoal-600 text-white rounded-lg hover:bg-charcoal-700 transition-colors\"\n          >\n            Try Again\n          </button>\n          <button\n            @click=\"$router.push('/')\"\n            class=\"flex-1 px-4 py-2 bg-charcoal-50 text-charcoal-700 rounded-lg hover:bg-charcoal-100 transition-colors\"\n          >\n            Go Back\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, nextTick, onMounted, onUnmounted, computed } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useNotifications } from '@composables/useNotifications'\nimport BarcodeScanner from '@/components/scanner/BarcodeScanner.vue'\nimport ZXingBarcodeScanner from '@/components/scanner/ZXingBarcodeScanner.vue'\n\n// Icons\nimport {\n  ArrowLeftIcon,\n  ExclamationTriangleIcon\n} from '@heroicons/vue/24/outline'\n\nexport default {\n  name: 'Scanner',\n  components: {\n    ArrowLeftIcon,\n    ExclamationTriangleIcon,\n    BarcodeScanner,\n    ZXingBarcodeScanner\n  },\n  setup() {\n    const router = useRouter()\n    const { showNotification } = useNotifications()\n\n    // State\n    const showManualInput = ref(false)\n    const manualCode = ref('')\n    const manualInput = ref(null)\n    const showErrorModal = ref(false)\n    const errorMessage = ref('')\n    const processingManual = ref(false)\n    const scannerErrorCount = ref(0)\n    const useZXingScanner = ref(false)\n\n    // Mobile device detection\n    const isMobileDevice = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||\n                          window.matchMedia('(max-width: 768px)').matches ||\n                          window.matchMedia('(pointer: coarse)').matches\n\n    // Scanner component selection\n    const currentScannerComponent = computed(() => {\n      return useZXingScanner.value ? 'ZXingBarcodeScanner' : 'BarcodeScanner'\n    })\n\n    // Prevent body scrolling when scanner is active\n    onMounted(() => {\n      // Store original overflow values\n      const originalBodyOverflow = document.body.style.overflow\n      const originalHtmlOverflow = document.documentElement.style.overflow\n\n      // Prevent scrolling\n      document.body.style.overflow = 'hidden'\n      document.documentElement.style.overflow = 'hidden'\n      document.body.classList.add('scanner-active')\n\n      // Store for cleanup\n      document.body.dataset.originalOverflow = originalBodyOverflow\n      document.documentElement.dataset.originalOverflow = originalHtmlOverflow\n    })\n\n    onUnmounted(() => {\n      // Restore original overflow values\n      const originalBodyOverflow = document.body.dataset.originalOverflow || ''\n      const originalHtmlOverflow = document.documentElement.dataset.originalOverflow || ''\n\n      document.body.style.overflow = originalBodyOverflow\n      document.documentElement.style.overflow = originalHtmlOverflow\n      document.body.classList.remove('scanner-active')\n\n      // Clean up dataset\n      delete document.body.dataset.originalOverflow\n      delete document.documentElement.dataset.originalOverflow\n    })\n\n    // Supported barcode formats (optimized for gift codes)\n    const supportedFormats = [\n      'code_128_reader',  // Most common for modern barcodes\n      'ean_reader',       // EAN-13\n      'ean_8_reader',     // EAN-8\n      'code_39_reader',   // Common legacy format\n      'code_93_reader',   // More compact than Code 39\n      'upc_reader',       // UPC-A\n      'upc_e_reader',     // UPC-E\n      'codabar_reader'    // Used in some industries\n    ]\n\n    // Handle scan result\n    const handleScanResult = async (result) => {\n      try {\n        const { code, format } = result\n\n        // console.log('Barcode scanned:', { code, format })\n\n        // Show success notification\n        showNotification(`${format.replace('_reader', '').toUpperCase()} scanned: ${code}`, 'success')\n\n        // Process the scanned code\n        await processScannedCode(code)\n\n      } catch (error) {\n        console.error('Error handling scan result:', error)\n        showNotification('Error processing scanned code', 'error')\n      }\n    }\n\n    // Handle scanner errors\n    const handleScanError = (error) => {\n      console.error('Scanner error:', error)\n      scannerErrorCount.value++\n\n      let message = 'Scanner error occurred'\n\n      if (error.name === 'NotAllowedError') {\n        message = 'Camera permission denied. Please allow camera access and try again.'\n      } else if (error.name === 'NotFoundError') {\n        message = 'No camera found. Please ensure your device has a camera.'\n      } else if (error.name === 'NotReadableError') {\n        message = 'Camera is being used by another application.'\n      } else if (error.message?.includes('HTTPS')) {\n        message = error.message\n      } else if (error.message) {\n        message = error.message\n      }\n\n      errorMessage.value = message\n      showErrorModal.value = true\n\n      // Try fallback to ZXing scanner on mobile after multiple QuaggaJS failures\n      if (isMobileDevice && scannerErrorCount.value >= 2 && !useZXingScanner.value) {\n        // console.log('Switching to ZXing scanner due to repeated failures')\n        useZXingScanner.value = true\n        scannerErrorCount.value = 0\n        showNotification('Switching to alternative scanner...', 'info')\n      }\n    }\n\n    // Process scanned or manual code\n    const processScannedCode = async (code) => {\n      try {\n        // Try to parse as URL first\n        let giftCode = code\n\n        try {\n          const url = new URL(code)\n          // Extract gift code from URL parameters\n          giftCode = url.searchParams.get('code') || url.searchParams.get('gift') || code\n        } catch {\n          // Not a URL, treat as direct gift code\n          giftCode = code\n        }\n\n        // Validate gift code format (basic validation)\n        if (!giftCode || giftCode.trim().length === 0) {\n          throw new Error('Invalid code format: Code is empty')\n        }\n\n        // Show success message for barcode detection\n        showNotification(`Barcode successfully scanned: ${giftCode}`, 'success')\n\n        try {\n          // Import GiftAPI for validation\n          const { GiftAPI } = await import('../services/api')\n\n          // API call to get gift details\n          const giftResult = await GiftAPI.getByCode(giftCode.trim())\n\n          if (!giftResult.success) {\n            // Show the scanned code but indicate it's not found in the system\n            showNotification(`Code scanned: ${giftCode} - Not found in gift system`, 'warning')\n            return\n          }\n\n          const gift = giftResult.data\n\n          // Check gift status and redirect accordingly\n          if (gift.status === 'Issued') {\n            // Gift already issued - show issued info and redirect to view\n            const issuedTo = `${gift.owner_full_name || ''} ${gift.owner_full_name || ''}`.trim()\n            const issuedDate = gift.issued_date || 'unknown date'\n            const message = issuedTo\n              ? `Already issued to ${issuedTo} on ${issuedDate}`\n              : `Already issued on ${issuedDate}`\n\n            showNotification(`Gift: ${gift.gift_name} - ${message}`, 'info')\n\n            // Redirect to gift details page to show issued status\n            router.push(`/scan/gift/${gift.name}`)\n\n          } else if (gift.status === 'Available' || gift.status === 'Active') {\n            // Gift available - redirect to dispatch flow\n            showNotification(`Gift found: ${gift.gift_name}`, 'success')\n            router.push(`/scan/gift/${gift.name}`)\n\n          } else {\n            // Other status - show info\n            showNotification(`Gift: ${gift.gift_name} - Status: ${gift.status}`, 'warning')\n            router.push(`/scan/gift/${gift.name}`)\n          }\n\n        } catch (apiError) {\n          console.error('API error:', apiError)\n          showNotification(`Code scanned: ${giftCode} - Unable to verify gift (API error)`, 'warning')\n        }\n\n      } catch (error) {\n        console.error('Code processing error:', error)\n\n        const errorMsg = error.message || 'Gift not found'\n        showNotification(errorMsg, 'error')\n      }\n    }\n\n    // Manual input handlers\n    const processManualCode = async () => {\n      if (!manualCode.value.trim()) {\n        showNotification('Please enter a valid code', 'error')\n        return\n      }\n\n      processingManual.value = true\n\n      try {\n        await processScannedCode(manualCode.value.trim())\n        closeManualInput()\n      } catch (error) {\n        console.error('Manual code processing error:', error)\n      } finally {\n        processingManual.value = false\n      }\n    }\n\n    const closeManualInput = () => {\n      showManualInput.value = false\n      manualCode.value = ''\n      processingManual.value = false\n    }\n\n    const handleManualInput = () => {\n    //   console.log('handleManualInput called in Scanner.vue') // Debug log\n    //   console.log('showManualInput before:', showManualInput.value) // Debug log\n      showManualInput.value = true\n    //   console.log('showManualInput after:', showManualInput.value) // Debug log\n    }\n\n    const pasteFromClipboard = async () => {\n      try {\n        if (navigator.clipboard && navigator.clipboard.readText) {\n          const text = await navigator.clipboard.readText()\n          if (text.trim()) {\n            manualCode.value = text.trim()\n            showNotification('Code pasted from clipboard', 'success')\n          }\n        } else {\n          showNotification('Clipboard access not available', 'warning')\n        }\n      } catch (error) {\n        console.warn('Could not read from clipboard:', error)\n        showNotification('Could not access clipboard', 'warning')\n      }\n    }\n\n    const clearManualCode = () => {\n      manualCode.value = ''\n      if (manualInput.value) {\n        manualInput.value.focus()\n      }\n    }\n\n    // Error modal handlers\n    const retryScanner = () => {\n      showErrorModal.value = false\n      errorMessage.value = ''\n      // The scanner component will automatically retry\n    }\n\n    // Watch for manual input modal opening\n    const watchManualInput = async () => {\n      if (showManualInput.value) {\n        await nextTick()\n        if (manualInput.value) {\n          manualInput.value.focus()\n        }\n      }\n    }\n\n    return {\n      // State\n      showManualInput,\n      manualCode,\n      manualInput,\n      showErrorModal,\n      errorMessage,\n      processingManual,\n      supportedFormats,\n      currentScannerComponent,\n      useZXingScanner,\n      scannerErrorCount,\n\n      // Methods\n      handleScanResult,\n      handleScanError,\n      processManualCode,\n      closeManualInput,\n      handleManualInput,\n      pasteFromClipboard,\n      clearManualCode,\n      retryScanner,\n      watchManualInput\n    }\n  }\n}\n</script>\n\n<style scoped>\n/* Scanner page fills entire viewport */\n.scanner-page {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  min-height: 100vh;\n  background: black;\n  overflow: hidden;\n  z-index: 9999;\n}\n\n/* Scanner component fills page */\n.scanner-component {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n\n/* Additional styles to prevent horizontal scroll */\n.scanner-page * {\n  box-sizing: border-box;\n}\n\n/* Ensure no elements extend beyond viewport */\n.scanner-page .absolute,\n.scanner-page .fixed {\n  max-width: 100%;\n}\n\n/* Smooth transitions */\n.transition-colors {\n  transition-property: color, background-color, border-color;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 200ms;\n}\n\n/* PWA specific modal styling */\n@media (display-mode: standalone) {\n  .fixed[class*=\"z-\"]:last-child {\n    z-index: 10000 !important;\n    position: fixed !important;\n    top: 0 !important;\n    left: 0 !important;\n    right: 0 !important;\n    bottom: 0 !important;\n  }\n}\n\n/* Mobile specific modal improvements */\n@media (max-width: 640px) {\n  .fixed[class*=\"z-\"]:last-child {\n    z-index: 10000 !important;\n  }\n}\n\n/* Manual input modal specific styling */\n.manual-input-modal {\n  z-index: 10000 !important;\n  position: fixed !important;\n  top: 0 !important;\n  left: 0 !important;\n  right: 0 !important;\n  bottom: 0 !important;\n  background: rgba(55, 65, 81, 0.8) !important;\n  backdrop-filter: blur(4px) !important;\n}\n\n/* PWA specific overrides */\n@media (display-mode: standalone) {\n  .manual-input-modal {\n    z-index: 10000 !important;\n    background: rgba(55, 65, 81, 0.9) !important;\n  }\n}\n\n/* Ensure manual input modal content is visible */\n.manual-input-modal > div {\n  z-index: 10001 !important;\n  background: white !important;\n  border-radius: 1rem !important;\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;\n}\n\n/* Focus styles for better accessibility */\nbutton:focus {\n  outline: 2px solid #10b981;\n  outline-offset: 2px;\n}\n\n/* High contrast mode */\n@media (prefers-contrast: high) {\n  .bg-white\\/10 {\n    background-color: rgba(255, 255, 255, 0.2);\n  }\n}\n\n/* Reduced motion support */\n@media (prefers-reduced-motion: reduce) {\n  .transition-colors {\n    transition: none;\n  }\n}\n\n/* Safe area support for mobile devices */\n.safe-area-top {\n  padding-top: max(1rem, env(safe-area-inset-top));\n}\n\n.safe-area-bottom {\n  padding-bottom: max(2rem, env(safe-area-inset-bottom));\n}\n\n.safe-area-padding {\n  padding-left: max(1rem, env(safe-area-inset-left));\n  padding-right: max(1rem, env(safe-area-inset-right));\n  padding-top: max(1rem, env(safe-area-inset-top));\n  padding-bottom: max(1rem, env(safe-area-inset-bottom));\n}\n\n/* Mobile specific adjustments */\n@media (max-width: 640px) {\n  .safe-area-top {\n    padding-top: max(0.5rem, env(safe-area-inset-top));\n  }\n\n  .safe-area-bottom {\n    padding-bottom: max(1rem, env(safe-area-inset-bottom));\n  }\n}\n\n/* Landscape mobile adjustments */\n@media (max-height: 500px) and (orientation: landscape) {\n  .safe-area-top {\n    padding-top: max(0.25rem, env(safe-area-inset-top));\n  }\n\n  .safe-area-bottom {\n    padding-bottom: max(0.5rem, env(safe-area-inset-bottom));\n  }\n}\n\n/* PWA specific adjustments */\n@media (display-mode: standalone) {\n  .safe-area-top {\n    padding-top: max(1.5rem, env(safe-area-inset-top));\n  }\n}\n</style>\n"],"file":"assets/Scanner-CRbrO19k.js"}